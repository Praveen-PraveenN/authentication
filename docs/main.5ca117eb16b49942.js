var nx=Object.defineProperty,rx=Object.defineProperties,ix=Object.getOwnPropertyDescriptors,YR=Object.getOwnPropertySymbols,sx=Object.prototype.hasOwnProperty,ox=Object.prototype.propertyIsEnumerable,QR=(et,ve,k)=>ve in et?nx(et,ve,{enumerable:!0,configurable:!0,writable:!0,value:k}):et[ve]=k,Tt=(et,ve)=>{for(var k in ve||(ve={}))sx.call(ve,k)&&QR(et,k,ve[k]);if(YR)for(var k of YR(ve))ox.call(ve,k)&&QR(et,k,ve[k]);return et},ro=(et,ve)=>rx(et,ix(ve));(self.webpackChunkauthentication=self.webpackChunkauthentication||[]).push([[179],{7905:(et,ve,k)=>{"use strict";k.d(ve,{hO:()=>Ve,xv:()=>he,Dh:()=>ie,GT:()=>ge,cc:()=>Se,on:()=>H,pX:()=>ae});var v=k(3668),V=k(7892),P=k(7233);et=k.hmd(et);const se=["ngOnDestroy"],ae=(Y,ue,Ce,we={})=>new Proxy(Y,{get:(Ke,Ne)=>Ce.runOutsideAngular(()=>{var Ze;if(Y[Ne])return(null===(Ze=null==we?void 0:we.spy)||void 0===Ze?void 0:Ze.get)&&we.spy.get(Ne,Y[Ne]),Y[Ne];if(se.indexOf(Ne)>-1)return()=>{};const Je=ue.toPromise().then(at=>{const re=at&&at[Ne];return"function"==typeof re?re.bind(at):re&&re.then?re.then(fe=>Ce.run(()=>fe)):Ce.run(()=>re)});return new Proxy(()=>{},{get:(at,re)=>Je[re],apply:(at,re,fe)=>Je.then(_e=>{var De;const Fe=_e&&_e(...fe);return(null===(De=null==we?void 0:we.spy)||void 0===De?void 0:De.apply)&&we.spy.apply(Ne,fe,Fe),Fe})})})}),ge=(Y,ue)=>{ue.forEach(Ce=>{Object.getOwnPropertyNames(Ce.prototype||Ce).forEach(we=>{Object.defineProperty(Y.prototype,we,Object.getOwnPropertyDescriptor(Ce.prototype||Ce,we))})})};class oe{constructor(ue){return ue}}const ie=new v.OlP("angularfire2.app.options"),he=new v.OlP("angularfire2.app.name");function H(Y,ue,Ce){const Ke="object"==typeof Ce&&Ce||{};Ke.name=Ke.name||"string"==typeof Ce&&Ce||"[DEFAULT]";const Ze=V.Z.apps.filter(Je=>Je&&Je.name===Ke.name)[0]||ue.runOutsideAngular(()=>V.Z.initializeApp(Y,Ke));try{JSON.stringify(Y)!==JSON.stringify(Ze.options)&&j("error",`${Ze.name} Firebase App already initialized with different options${et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Je){}return new oe(Ze)}const j=(Y,...ue)=>{(0,v.X6Q)()&&"undefined"!=typeof console&&console[Y](...ue)},X={provide:oe,useFactory:H,deps:[ie,v.R0b,[new v.FiY,he]]};let Ve=(()=>{class Y{constructor(Ce){V.Z.registerVersion("angularfire",P.q4.full,"core"),V.Z.registerVersion("angularfire",P.q4.full,"app-compat"),V.Z.registerVersion("angular",v.q4F.full,Ce.toString())}static initializeApp(Ce,we){return{ngModule:Y,providers:[{provide:ie,useValue:Ce},{provide:he,useValue:we}]}}}return Y.\u0275fac=function(Ce){return new(Ce||Y)(v.LFG(v.Lbi))},Y.\u0275mod=v.oAB({type:Y}),Y.\u0275inj=v.cJS({providers:[X]}),Y})();function Se(Y,ue,Ce,we,Ke){const[,Ne,Ze]=globalThis.\u0275AngularfireInstanceCache.find(Je=>Je[0]===Y)||[];if(Ne)return function(Y,ue){try{return Y.toString()===ue.toString()}catch(Ce){return Y===ue}}(Ke,Ze)||(de("error",`${ue} was already initialized on the ${Ce} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:Ke,was:Ze})),Ne;{const Je=we();return globalThis.\u0275AngularfireInstanceCache.push([Y,Je,Ke]),Je}}const Be=!!et.hot,de=(Y,...ue)=>{(0,v.X6Q)()&&"undefined"!=typeof console&&console[Y](...ue)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7233:(et,ve,k)=>{"use strict";k.d(ve,{q4:()=>ui,iC:()=>zs,HU:()=>$c,vb:()=>sg,JM:()=>sa});var v=k(3668),V=k(7713),P=k(8239),se=k(1572),ae=k(4213),ge=k(1177),oe=k(3855),ie=k(4995);const he="@firebase/installations",H="0.5.4",X=`w:${H}`,Ve="FIS_v2",ue=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ce(D){return D instanceof ae.ZR&&D.code.includes("request-failed")}function we({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Ke(D){return{token:D.token,requestStatus:2,expiresIn:_e(D.expiresIn),creationTime:Date.now()}}function Ne(D,C){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,P.Z)(function*(D,C){const L=(yield C.json()).error;return ue.create("request-failed",{requestName:D,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function at(D,{refreshToken:C}){const x=Je(D);return x.append("Authorization",function(D){return`${Ve} ${D}`}(C)),x}function re(D){return fe.apply(this,arguments)}function fe(){return(fe=(0,P.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function _e(D){return Number(D.replace("s","000"))}function Fe(D,C){return me.apply(this,arguments)}function me(){return(me=(0,P.Z)(function*(D,{fid:C}){const x=we(D),ce={method:"POST",headers:Je(D),body:JSON.stringify({fid:C,authVersion:Ve,appId:D.appId,sdkVersion:X})},xe=yield re(()=>fetch(x,ce));if(xe.ok){const Ge=yield xe.json();return{fid:Ge.fid||C,registrationStatus:2,refreshToken:Ge.refreshToken,authToken:Ke(Ge.authToken)}}throw yield Ne("Create Installation",xe)})).apply(this,arguments)}function _t(D){return new Promise(C=>{setTimeout(C,D)})}const $n=/^[cdef][\w-]{21}$/;function Et(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function(D){return function(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return $n.test(x)?x:""}catch(D){return""}}function pn(D){return`${D.appName}!${D.appId}`}const Tr=new Map;function Ar(D,C){const x=pn(D);gn(x,C),function(D,C){const x=(!Qt&&"BroadcastChannel"in self&&(Qt=new BroadcastChannel("[Firebase] FID Change"),Qt.onmessage=D=>{gn(D.data.key,D.data.fid)}),Qt);x&&x.postMessage({key:D,fid:C}),0===Tr.size&&Qt&&(Qt.close(),Qt=null)}(x,C)}function gn(D,C){const x=Tr.get(D);if(x)for(const L of x)L(C)}let Qt=null;const _n="firebase-installations-store";let Hn=null;function _i(){return Hn||(Hn=(0,ie.openDb)("firebase-installations-database",1,D=>{0===D.oldVersion&&D.createObjectStore(_n)})),Hn}function Xe(D,C){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,P.Z)(function*(D,C){const x=pn(D),Q=(yield _i()).transaction(_n,"readwrite"),ce=Q.objectStore(_n),xe=yield ce.get(x);return yield ce.put(C,x),yield Q.complete,(!xe||xe.fid!==C.fid)&&Ar(D,C.fid),C})).apply(this,arguments)}function hr(D){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,P.Z)(function*(D){const C=pn(D),L=(yield _i()).transaction(_n,"readwrite");yield L.objectStore(_n).delete(C),yield L.complete})).apply(this,arguments)}function lt(D,C){return ut.apply(this,arguments)}function ut(){return(ut=(0,P.Z)(function*(D,C){const x=pn(D),Q=(yield _i()).transaction(_n,"readwrite"),ce=Q.objectStore(_n),xe=yield ce.get(x),Ge=C(xe);return void 0===Ge?yield ce.delete(x):yield ce.put(Ge,x),yield Q.complete,Ge&&(!xe||xe.fid!==Ge.fid)&&Ar(D,Ge.fid),Ge})).apply(this,arguments)}function Mt(D){return kt.apply(this,arguments)}function kt(){return(kt=(0,P.Z)(function*(D){let C;const x=yield lt(D,L=>{const Q=Wn(L),ce=rn(D,Q);return C=ce.registrationPromise,ce.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function Wn(D){return Kt(D||{fid:Et(),registrationStatus:0})}function rn(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(ue.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},L=function(D,C){return ot.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:L}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Ma(D)}:{installationEntry:C}}function ot(){return(ot=(0,P.Z)(function*(D,C){try{return Xe(D,yield Fe(D,C))}catch(x){throw Ce(x)&&409===x.customData.serverCode?yield hr(D):yield Xe(D,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Ma(D){return cn.apply(this,arguments)}function cn(){return(cn=(0,P.Z)(function*(D){let C=yield sn(D);for(;1===C.registrationStatus;)yield _t(100),C=yield sn(D);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:L}=yield Mt(D);return L||x}return C})).apply(this,arguments)}function sn(D){return lt(D,C=>{if(!C)throw ue.create("installation-not-found");return Kt(C)})}function Kt(D){return function(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Ps(D,C){return $.apply(this,arguments)}function $(){return($=(0,P.Z)(function*({appConfig:D,platformLoggerProvider:C},x){const L=U(D,x),Q=at(D,x),ce=C.getImmediate({optional:!0});ce&&Q.append("x-firebase-client",ce.getPlatformInfoString());const Ge={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:X}})},ke=yield re(()=>fetch(L,Ge));if(ke.ok)return Ke(yield ke.json());throw yield Ne("Generate Auth Token",ke)})).apply(this,arguments)}function U(D,{fid:C}){return`${we(D)}/${C}/authTokens:generate`}function G(D){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,P.Z)(function*(D,C=!1){let x;const L=yield lt(D.appConfig,ce=>{if(!Fn(ce))throw ue.create("not-registered");const xe=ce.authToken;if(!C&&fr(xe))return ce;if(1===xe.requestStatus)return x=ne(D,C),ce;{if(!navigator.onLine)throw ue.create("app-offline");const Ge=z(ce);return x=on(D,Ge),Ge}});return x?yield x:L.authToken})).apply(this,arguments)}function ne(D,C){return tt.apply(this,arguments)}function tt(){return(tt=(0,P.Z)(function*(D,C){let x=yield it(D.appConfig);for(;1===x.authToken.requestStatus;)yield _t(100),x=yield it(D.appConfig);const L=x.authToken;return 0===L.requestStatus?G(D,C):L})).apply(this,arguments)}function it(D){return lt(D,C=>{if(!Fn(C))throw ue.create("not-registered");return function(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function on(D,C){return zn.apply(this,arguments)}function zn(){return(zn=(0,P.Z)(function*(D,C){try{const x=yield Ps(D,C),L=Object.assign(Object.assign({},C),{authToken:x});return yield Xe(D.appConfig,L),x}catch(x){if(!Ce(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const L=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Xe(D.appConfig,L)}else yield hr(D.appConfig);throw x}})).apply(this,arguments)}function Fn(D){return void 0!==D&&2===D.registrationStatus}function fr(D){return 2===D.requestStatus&&!function(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function z(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function ze(){return(ze=(0,P.Z)(function*(D){const C=D,{installationEntry:x,registrationPromise:L}=yield Mt(C.appConfig);return L?L.catch(console.error):G(C).catch(console.error),x.fid})).apply(this,arguments)}function Lt(){return(Lt=(0,P.Z)(function*(D,C=!1){const x=D;return yield xt(x.appConfig),(yield G(x,C)).token})).apply(this,arguments)}function xt(D){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,P.Z)(function*(D){const{registrationPromise:C}=yield Mt(D);C&&(yield C)})).apply(this,arguments)}function Li(D){return ue.create("missing-app-config-values",{valueName:D})}const er="installations";(0,se._registerComponent)(new ge.wA(er,D=>{const C=D.getProvider("app").getImmediate(),x=function(D){if(!D||!D.options)throw Li("App Configuration");if(!D.name)throw Li("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!D.options[x])throw Li(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:x,platformLoggerProvider:(0,se._getProvider)(C,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,se._registerComponent)(new ge.wA("installations-internal",D=>{const C=D.getProvider("app").getImmediate(),x=(0,se._getProvider)(C,er).getImmediate();return{getId:()=>function(D){return ze.apply(this,arguments)}(x),getToken:Q=>function(D){return Lt.apply(this,arguments)}(x,Q)}},"PRIVATE")),(0,se.registerVersion)(he,H),(0,se.registerVersion)(he,H,"esm2017");const St="@firebase/remote-config",dn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Hl{constructor(C,x,L,Q){this.client=C,this.storage=x,this.storageCache=L,this.logger=Q}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-x,Q=L<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Q}.`),Q}fetch(C){var x=this;return(0,P.Z)(function*(){const[L,Q]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Q&&x.isCachedDataFresh(C.cacheMaxAgeMillis,L))return Q;C.eTag=Q&&Q.eTag;const ce=yield x.client.fetch(C),xe=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ce.status&&xe.push(x.storage.setLastSuccessfulFetchResponse(ce)),yield Promise.all(xe),ce})()}}function zy(D=navigator){return D.languages&&D.languages[0]||D.language}class Sr{constructor(C,x,L,Q,ce,xe){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=L,this.projectId=Q,this.apiKey=ce,this.appId=xe}fetch(C){var x=this;return(0,P.Z)(function*(){const[L,Q]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),xe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ge={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},ke={sdk_version:x.sdkVersion,app_instance_id:L,app_instance_id_token:Q,app_id:x.appId,language_code:zy()},$t={method:"POST",headers:Ge,body:JSON.stringify(ke)},Dn=fetch(xe,$t),Ln=new Promise((xr,Si)=>{C.signal.addEventListener(()=>{const vr=new Error("The operation was aborted.");vr.name="AbortError",Si(vr)})});let _r;try{yield Promise.race([Dn,Ln]),_r=yield Dn}catch(xr){let Si="fetch-client-network";throw"AbortError"===xr.name&&(Si="fetch-timeout"),dn.create(Si,{originalErrorMessage:xr.message})}let tr=_r.status;const qs=_r.headers.get("ETag")||void 0;let ku,qr;if(200===_r.status){let xr;try{xr=yield _r.json()}catch(Si){throw dn.create("fetch-client-parse",{originalErrorMessage:Si.message})}ku=xr.entries,qr=xr.state}if("INSTANCE_STATE_UNSPECIFIED"===qr?tr=500:"NO_CHANGE"===qr?tr=304:("NO_TEMPLATE"===qr||"EMPTY_CONFIG"===qr)&&(ku={}),304!==tr&&200!==tr)throw dn.create("fetch-status",{httpStatus:tr});return{status:tr,eTag:qs,config:ku}})()}}class $h{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,P.Z)(function*(){const L=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,L)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:L}){var Q=this;return(0,P.Z)(function*(){yield function(D,C){return new Promise((x,L)=>{const Q=Math.max(C-Date.now(),0),ce=setTimeout(x,Q);D.addEventListener(()=>{clearTimeout(ce),L(dn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const ce=yield Q.client.fetch(C);return yield Q.storage.deleteThrottleMetadata(),ce}catch(ce){if(!function(D){if(!(D instanceof ae.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ce))throw ce;const xe={throttleEndTimeMillis:Date.now()+(0,ae.$s)(L),backoffCount:L+1};return yield Q.storage.setThrottleMetadata(xe),Q.attemptFetch(C,xe)}})()}}class ql{constructor(C,x,L,Q,ce){this.app=C,this._client=x,this._storageCache=L,this._storage=Q,this._logger=ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ec(D,C){const x=D.target.error||void 0;return dn.create(C,{originalErrorMessage:x&&x.message})}const Fs="app_namespace_store";class Zl{constructor(C,x,L,Q=function(){return new Promise((D,C)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=L=>{C(Ec(L,"storage-open"))},x.onsuccess=L=>{D(L.target.result)},x.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(Fs,{keyPath:"compositeKey"})}}catch(x){C(dn.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=C,this.appName=x,this.namespace=L,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,P.Z)(function*(){const L=yield x.openDbPromise;return new Promise((Q,ce)=>{const Ge=L.transaction([Fs],"readonly").objectStore(Fs),ke=x.createCompositeKey(C);try{const $t=Ge.get(ke);$t.onerror=Dn=>{ce(Ec(Dn,"storage-get"))},$t.onsuccess=Dn=>{const Ln=Dn.target.result;Q(Ln?Ln.value:void 0)}}catch($t){ce(dn.create("storage-get",{originalErrorMessage:$t&&$t.message}))}})})()}set(C,x){var L=this;return(0,P.Z)(function*(){const Q=yield L.openDbPromise;return new Promise((ce,xe)=>{const ke=Q.transaction([Fs],"readwrite").objectStore(Fs),$t=L.createCompositeKey(C);try{const Dn=ke.put({compositeKey:$t,value:x});Dn.onerror=Ln=>{xe(Ec(Ln,"storage-set"))},Dn.onsuccess=()=>{ce()}}catch(Dn){xe(dn.create("storage-set",{originalErrorMessage:Dn&&Dn.message}))}})})()}delete(C){var x=this;return(0,P.Z)(function*(){const L=yield x.openDbPromise;return new Promise((Q,ce)=>{const Ge=L.transaction([Fs],"readwrite").objectStore(Fs),ke=x.createCompositeKey(C);try{const $t=Ge.delete(ke);$t.onerror=Dn=>{ce(Ec(Dn,"storage-delete"))},$t.onsuccess=()=>{Q()}}catch($t){ce(dn.create("storage-delete",{originalErrorMessage:$t&&$t.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Kp{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,P.Z)(function*(){const x=C.storage.getLastFetchStatus(),L=C.storage.getLastSuccessfulFetchTimestampMillis(),Q=C.storage.getActiveConfig(),ce=yield x;ce&&(C.lastFetchStatus=ce);const xe=yield L;xe&&(C.lastSuccessfulFetchTimestampMillis=xe);const Ge=yield Q;Ge&&(C.activeConfig=Ge)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Ic(){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,P.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(D){return!1}})).apply(this,arguments)}(0,se._registerComponent)(new ge.wA("remote-config",function(C,{instanceIdentifier:x}){const L=C.getProvider("app").getImmediate(),Q=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw dn.create("registration-window");if(!(0,ae.hl)())throw dn.create("indexed-db-unavailable");const{projectId:ce,apiKey:xe,appId:Ge}=L.options;if(!ce)throw dn.create("registration-project-id");if(!xe)throw dn.create("registration-api-key");if(!Ge)throw dn.create("registration-app-id");const ke=new Zl(Ge,L.name,x=x||"firebase"),$t=new Kp(ke),Dn=new oe.Yd(St);Dn.logLevel=oe.in.ERROR;const Ln=new Sr(Q,se.SDK_VERSION,x,ce,xe,Ge),_r=new $h(Ln,ke),tr=new Hl(_r,ke,$t,Dn),qs=new ql(L,tr,$t,ke,Dn);return function(D){const C=(0,ae.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(qs),qs},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(St,"0.3.3"),(0,se.registerVersion)(St,"0.3.3","esm2017");const Zp="/firebase-messaging-sw.js",Ql="/firebase-cloud-messaging-push-scope",Ls="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Yi="google.c.a.c_id",Qi="google.c.a.c_l",Jl="google.c.a.ts",Hh="google.c.a.e";var ao=(()=>{return(D=ao||(ao={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",ao;var D})();function Bi(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Dc(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(x),Q=new Uint8Array(L.length);for(let ce=0;ce<L.length;++ce)Q[ce]=L.charCodeAt(ce);return Q}const gu="fcm_token_details_db",mu="fcm_token_object_Store";function Gh(D){return yu.apply(this,arguments)}function yu(){return yu=(0,P.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ce=>ce.name).includes(gu))return null;let C=null;return(yield(0,ie.openDb)(gu,5,function(){var L=(0,P.Z)(function*(Q){var ce;if(Q.oldVersion<2||!Q.objectStoreNames.contains(mu))return;const xe=Q.transaction.objectStore(mu),Ge=yield xe.index("fcmSenderId").get(D);if(yield xe.clear(),Ge)if(2===Q.oldVersion){const ke=Ge;if(!ke.auth||!ke.p256dh||!ke.endpoint)return;C={token:ke.fcmToken,createTime:null!==(ce=ke.createTime)&&void 0!==ce?ce:Date.now(),subscriptionOptions:{auth:ke.auth,p256dh:ke.p256dh,endpoint:ke.endpoint,swScope:ke.swScope,vapidKey:"string"==typeof ke.vapidKey?ke.vapidKey:Bi(ke.vapidKey)}}}else if(3===Q.oldVersion){const ke=Ge;C={token:ke.fcmToken,createTime:ke.createTime,subscriptionOptions:{auth:Bi(ke.auth),p256dh:Bi(ke.p256dh),endpoint:ke.endpoint,swScope:ke.swScope,vapidKey:Bi(ke.vapidKey)}}}else if(4===Q.oldVersion){const ke=Ge;C={token:ke.fcmToken,createTime:ke.createTime,subscriptionOptions:{auth:Bi(ke.auth),p256dh:Bi(ke.p256dh),endpoint:ke.endpoint,swScope:ke.swScope,vapidKey:Bi(ke.vapidKey)}}}});return function(Q){return L.apply(this,arguments)}}())).close(),yield(0,ie.deleteDb)(gu),yield(0,ie.deleteDb)("fcm_vapid_details_db"),yield(0,ie.deleteDb)("undefined"),bc(C)?C:null}),yu.apply(this,arguments)}function bc(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const hn="firebase-messaging-store";let uo=null;function Xl(){return uo||(uo=(0,ie.openDb)("firebase-messaging-database",1,D=>{0===D.oldVersion&&D.createObjectStore(hn)})),uo}function Pn(D){return ii.apply(this,arguments)}function ii(){return(ii=(0,P.Z)(function*(D){const C=zo(D),L=yield(yield Xl()).transaction(hn).objectStore(hn).get(C);if(L)return L;{const Q=yield Gh(D.appConfig.senderId);if(Q)return yield ji(D,Q),Q}})).apply(this,arguments)}function ji(D,C){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,P.Z)(function*(D,C){const x=zo(D),Q=(yield Xl()).transaction(hn,"readwrite");return yield Q.objectStore(hn).put(C,x),yield Q.complete,C})).apply(this,arguments)}function kr(D){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,P.Z)(function*(D){const C=zo(D),L=(yield Xl()).transaction(hn,"readwrite");yield L.objectStore(hn).delete(C),yield L.complete})).apply(this,arguments)}function zo({appConfig:D}){return D.appId}const Gt=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function _u(D,C){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,P.Z)(function*(D,C){const x=yield ed(D),L=Fa(C),Q={method:"POST",headers:x,body:JSON.stringify(L)};let ce;try{ce=yield(yield fetch(ft(D.appConfig),Q)).json()}catch(xe){throw Gt.create("token-subscribe-failed",{errorInfo:xe})}if(ce.error)throw Gt.create("token-subscribe-failed",{errorInfo:ce.error.message});if(!ce.token)throw Gt.create("token-subscribe-no-token");return ce.token})).apply(this,arguments)}function zh(D,C){return $i.apply(this,arguments)}function $i(){return($i=(0,P.Z)(function*(D,C){const x=yield ed(D),L=Fa(C.subscriptionOptions),Q={method:"PATCH",headers:x,body:JSON.stringify(L)};let ce;try{ce=yield(yield fetch(`${ft(D.appConfig)}/${C.token}`,Q)).json()}catch(xe){throw Gt.create("token-update-failed",{errorInfo:xe})}if(ce.error)throw Gt.create("token-update-failed",{errorInfo:ce.error.message});if(!ce.token)throw Gt.create("token-update-no-token");return ce.token})).apply(this,arguments)}function vu(D,C){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,P.Z)(function*(D,C){const L={method:"DELETE",headers:yield ed(D)};try{const ce=yield(yield fetch(`${ft(D.appConfig)}/${C}`,L)).json();if(ce.error)throw Gt.create("token-unsubscribe-failed",{errorInfo:ce.error.message})}catch(Q){throw Gt.create("token-unsubscribe-failed",{errorInfo:Q})}})).apply(this,arguments)}function ft({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function ed(D){return ka.apply(this,arguments)}function ka(){return(ka=(0,P.Z)(function*({appConfig:D,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Fa({p256dh:D,auth:C,endpoint:x,vapidKey:L}){const Q={web:{endpoint:x,auth:C,p256dh:D}};return L!==Ls&&(Q.web.applicationPubKey=L),Q}const Tc=6048e5;function Ac(D){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,P.Z)(function*(D){const C=yield Us(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:Bi(C.getKey("auth")),p256dh:Bi(C.getKey("p256dh"))},L=yield Pn(D.firebaseDependencies);if(L){if(Ko(L.subscriptionOptions,x))return Date.now()>=L.createTime+Tc?Ut(D,{token:L.token,createTime:Date.now(),subscriptionOptions:x}):L.token;try{yield vu(D.firebaseDependencies,L.token)}catch(Q){console.warn(Q)}return In(D.firebaseDependencies,x)}return In(D.firebaseDependencies,x)})).apply(this,arguments)}function Eu(D){return Re.apply(this,arguments)}function Re(){return(Re=(0,P.Z)(function*(D){const C=yield Pn(D.firebaseDependencies);C&&(yield vu(D.firebaseDependencies,C.token),yield kr(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Ut(D,C){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,P.Z)(function*(D,C){try{const x=yield zh(D.firebaseDependencies,C),L=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield ji(D.firebaseDependencies,L),x}catch(x){throw yield Eu(D),x}})).apply(this,arguments)}function In(D,C){return co.apply(this,arguments)}function co(){return(co=(0,P.Z)(function*(D,C){const L={token:yield _u(D,C),createTime:Date.now(),subscriptionOptions:C};return yield ji(D,L),L.token})).apply(this,arguments)}function Us(D,C){return pr.apply(this,arguments)}function pr(){return(pr=(0,P.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Dc(C)})})).apply(this,arguments)}function Ko(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function _s(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcm_message_id};return function(D,C){if(!C.notification)return;D.notification={};const x=C.notification.title;x&&(D.notification.title=x);const L=C.notification.body;L&&(D.notification.body=L);const Q=C.notification.image;Q&&(D.notification.image=Q)}(C,D),function(D,C){!C.data||(D.data=C.data)}(C,D),function(D,C){if(!C.fcmOptions)return;D.fcmOptions={};const x=C.fcmOptions.link;x&&(D.fcmOptions.link=x);const L=C.fcmOptions.analytics_label;L&&(D.fcmOptions.analyticsLabel=L)}(C,D),C}function La(D){return"object"==typeof D&&!!D&&Yi in D}function cr(D,C){const x=[];for(let L=0;L<D.length;L++)x.push(D.charAt(L)),L<C.length&&x.push(C.charAt(L));return x.join("")}function Zo(D){return Gt.create("missing-app-config-values",{valueName:D})}cr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),cr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Es{constructor(C,x,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function(D){if(!D||!D.options)throw Zo("App Configuration Object");if(!D.name)throw Zo("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const L of C)if(!x[L])throw Zo(L);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Q,installations:x,analyticsProvider:L}}_delete(){return Promise.resolve()}}function si(D){return Va.apply(this,arguments)}function Va(){return(Va=(0,P.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Zp,{scope:Ql}),D.swRegistration.update().catch(()=>{})}catch(C){throw Gt.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function Yo(D,C){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,P.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield si(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Gt.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function qh(D,C){return js.apply(this,arguments)}function js(){return(js=(0,P.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=Ls)})).apply(this,arguments)}function Qo(){return(Qo=(0,P.Z)(function*(D,C){if(!navigator)throw Gt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Gt.create("permission-blocked");return yield qh(D,null==C?void 0:C.vapidKey),yield Yo(D,null==C?void 0:C.serviceWorkerRegistration),Ac(D)})).apply(this,arguments)}function xc(D,C,x){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,P.Z)(function*(D,C,x){const L=Ba(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:x[Yi],message_name:x[Qi],message_time:x[Jl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ba(D){switch(D){case ao.NOTIFICATION_CLICKED:return"notification_open";case ao.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Du(){return(Du=(0,P.Z)(function*(D,C){const x=C.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===ao.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(_s(x)):D.onMessageHandler.next(_s(x)));const L=x.data;La(L)&&"1"===L[Hh]&&(yield xc(D,x.messageType,L))})).apply(this,arguments)}const ja="@firebase/messaging";function $a(){return gr.apply(this,arguments)}function gr(){return(gr=(0,P.Z)(function*(){return"undefined"!=typeof window&&(0,ae.hl)()&&(yield(0,ae.eu)())&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,se._registerComponent)(new ge.wA("messaging",D=>{const C=new Es(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function(D,C){return Du.apply(this,arguments)}(C,x)),C},"PUBLIC")),(0,se._registerComponent)(new ge.wA("messaging-internal",D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:L=>function(D,C){return Qo.apply(this,arguments)}(C,L)}},"PRIVATE")),(0,se.registerVersion)(ja,"0.9.4"),(0,se.registerVersion)(ja,"0.9.4","esm2017");const po="analytics",Jo="firebase_id",Zh="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Mc="https://www.googletagmanager.com/gtag/js",Rn=new oe.Yd("@firebase/analytics");function Xo(D){return Promise.all(D.map(C=>C.catch(x=>x)))}function nd(D,C){const x=document.createElement("script");x.src=`${Mc}?l=${D}&id=${C}`,x.async=!0,document.head.appendChild(x)}function Au(D,C,x,L,Q,ce){return es.apply(this,arguments)}function es(){return(es=(0,P.Z)(function*(D,C,x,L,Q,ce){const xe=L[Q];try{if(xe)yield C[xe];else{const ke=(yield Xo(x)).find($t=>$t.measurementId===Q);ke&&(yield C[ke.appId])}}catch(Ge){Rn.error(Ge)}D("config",Q,ce)})).apply(this,arguments)}function Yh(D,C,x,L,Q){return rd.apply(this,arguments)}function rd(){return(rd=(0,P.Z)(function*(D,C,x,L,Q){try{let ce=[];if(Q&&Q.send_to){let xe=Q.send_to;Array.isArray(xe)||(xe=[xe]);const Ge=yield Xo(x);for(const ke of xe){const $t=Ge.find(Ln=>Ln.measurementId===ke),Dn=$t&&C[$t.appId];if(!Dn){ce=[];break}ce.push(Dn)}}0===ce.length&&(ce=Object.values(C)),yield Promise.all(ce),D("event",L,Q||{})}catch(ce){Rn.error(ce)}})).apply(this,arguments)}function Su(){const D=window.document.getElementsByTagName("script");for(const C of Object.values(D))if(C.src&&C.src.includes(Mc))return C;return null}const Rr=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ga=new class{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function ng(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function xu(D){return mo.apply(this,arguments)}function mo(){return(mo=(0,P.Z)(function*(D){var C;const{appId:x,apiKey:L}=D,Q={method:"GET",headers:ng(L)},ce=Zh.replace("{app-id}",x),xe=yield fetch(ce,Q);if(200!==xe.status&&304!==xe.status){let Ge="";try{const ke=yield xe.json();(null===(C=ke.error)||void 0===C?void 0:C.message)&&(Ge=ke.error.message)}catch(ke){}throw Rr.create("config-fetch-failed",{httpStatus:xe.status,responseMessage:Ge})}return xe.json()})).apply(this,arguments)}function ws(D){return kc.apply(this,arguments)}function kc(){return(kc=(0,P.Z)(function*(D,C=Ga,x){const{appId:L,apiKey:Q,measurementId:ce}=D.options;if(!L)throw Rr.create("no-app-id");if(!Q){if(ce)return{measurementId:ce,appId:L};throw Rr.create("no-api-key")}const xe=C.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ge=new Hi;return setTimeout((0,P.Z)(function*(){Ge.abort()}),void 0!==x?x:6e4),sd({appId:L,apiKey:Q,measurementId:ce},xe,Ge,C)})).apply(this,arguments)}function sd(D,C,x){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,P.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:x},L,Q=Ga){const{appId:ce,measurementId:xe}=D;try{yield rg(L,C)}catch(Ge){if(xe)return Rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${Ge.message}]`),{appId:ce,measurementId:xe};throw Ge}try{const Ge=yield xu(D);return Q.deleteThrottleMetadata(ce),Ge}catch(Ge){if(!Un(Ge)){if(Q.deleteThrottleMetadata(ce),xe)return Rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${Ge.message}]`),{appId:ce,measurementId:xe};throw Ge}const ke=503===Number(Ge.customData.httpStatus)?(0,ae.$s)(x,Q.intervalMillis,30):(0,ae.$s)(x,Q.intervalMillis),$t={throttleEndTimeMillis:Date.now()+ke,backoffCount:x+1};return Q.setThrottleMetadata(ce,$t),Rn.debug(`Calling attemptFetch again in ${ke} millis`),sd(D,$t,L,Q)}})).apply(this,arguments)}function rg(D,C){return new Promise((x,L)=>{const Q=Math.max(C-Date.now(),0),ce=setTimeout(x,Q);D.addEventListener(()=>{clearTimeout(ce),L(Rr.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function Un(D){if(!(D instanceof ae.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class Hi{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function pt(){return Di.apply(this,arguments)}function Di(){return(Di=(0,P.Z)(function*(){if(!(0,ae.hl)())return Rn.warn(Rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(D){return Rn.warn(Rr.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function yr(){return(yr=(0,P.Z)(function*(D,C,x,L,Q,ce,xe){var Ge;const ke=ws(D);ke.then(tr=>{x[tr.measurementId]=tr.appId,D.options.measurementId&&tr.measurementId!==D.options.measurementId&&Rn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${tr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(tr=>Rn.error(tr)),C.push(ke);const $t=pt().then(tr=>{if(tr)return L.getId()}),[Dn,Ln]=yield Promise.all([ke,$t]);Su()||nd(ce,Dn.measurementId),Q("js",new Date);const _r=null!==(Ge=null==xe?void 0:xe.config)&&void 0!==Ge?Ge:{};return _r.origin="firebase",_r.update=!0,null!=Ln&&(_r[Jo]=Ln),Q("config",Dn.measurementId,_r),Dn.measurementId})).apply(this,arguments)}class Qh{constructor(C){this.app=C}_delete(){return delete ts[this.app.options.appId],Promise.resolve()}}let ts={},Fc=[];const od={};let Hs,wt,ea="dataLayer",yo=!1;function Kn(D,C,x){!function(){const D=[];if((0,ae.ru)()&&D.push("This is a browser extension environment."),(0,ae.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((L,Q)=>`(${Q+1}) ${L}`).join(" "),x=Rr.create("invalid-analytics-context",{errorInfo:C});Rn.warn(x.message)}}();const L=D.options.appId;if(!L)throw Rr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Rr.create("no-api-key");Rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ts[L])throw Rr.create("already-exists",{id:L});if(!yo){!function(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(ea);const{wrappedGtag:ce,gtagCore:xe}=function(D,C,x,L,Q){let ce=function(...xe){window[L].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(ce=window[Q]),window[Q]=function(D,C,x,L){function ce(){return(ce=(0,P.Z)(function*(xe,Ge,ke){try{"event"===xe?yield Yh(D,C,x,Ge,ke):"config"===xe?yield Au(D,C,x,L,Ge,ke):D("set",Ge)}catch($t){Rn.error($t)}})).apply(this,arguments)}return function(xe,Ge,ke){return ce.apply(this,arguments)}}(ce,D,C,x),{gtagCore:ce,wrappedGtag:window[Q]}}(ts,Fc,od,ea,"gtag");wt=ce,Hs=xe,yo=!0}return ts[L]=function(D,C,x,L,Q,ce,xe){return yr.apply(this,arguments)}(D,Fc,od,C,Hs,ea,x),new Qh(D)}function Wa(){return(Wa=(0,P.Z)(function*(D,C,x,L,Q){if(Q&&Q.global)D("event",x,L);else{const ce=yield C;D("event",x,Object.assign(Object.assign({},L),{send_to:ce}))}})).apply(this,arguments)}function na(){return qa.apply(this,arguments)}function qa(){return(qa=(0,P.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(D){return!1}})).apply(this,arguments)}const Ou="@firebase/analytics";(0,se._registerComponent)(new ge.wA(po,(C,{options:x})=>Kn(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,se._registerComponent)(new ge.wA("analytics-internal",function(C){try{const x=C.getProvider(po).getImmediate();return{logEvent:(L,Q,ce)=>function(D,C,x,L){D=(0,ae.m9)(D),function(D,C,x,L,Q){return Wa.apply(this,arguments)}(wt,ts[D.app.options.appId],C,x,L).catch(Q=>Rn.error(Q))}(x,L,Q,ce)}}catch(x){throw Rr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,se.registerVersion)(Ou,"0.7.4"),(0,se.registerVersion)(Ou,"0.7.4","esm2017");var Is=k(2869),Vr=k(8843);const Ds=new class extends Vr.v{}(class extends Is.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(C,x,L):C.flush(this)}});var ud=k(2210),cd=k(7384),ai=k(5222),is=k(4763);const ui=new v.GfV("7.2.0"),ss="__angularfire_symbol__analyticsIsSupported",Eo="__angularfire_symbol__remoteConfigIsSupported",Bc="__angularfire_symbol__messagingIsSupported";function sa(D,C,x){if(C){if(1===C.length)return C[0];const ce=C.filter(xe=>xe.app===x);if(1===ce.length)return ce[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[ss]||(globalThis[ss]=na().then(D=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=D)),globalThis[Bc]||(globalThis[Bc]=$a().then(D=>globalThis.__angularfire_symbol__messagingIsSupportedValue=D)),globalThis[Eo]||(globalThis[Eo]=Ic().then(D=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=D));const sg=(D,C)=>{const x=C?[C]:(0,V.C6)(),L=[];return x.forEach(Q=>{Q.container.getProvider(D).instances.forEach(xe=>{L.includes(xe)||L.push(xe)})}),L};function Ws(){}class Ka{constructor(C,x=Ds){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,L){const Q=this.zone;return this.delegate.schedule(function(xe){Q.runGuarded(()=>{C.apply(this,[xe])})},x,L)}}class tf{constructor(C){this.zone=C,this.task=null}call(C,x){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ws,{},Ws,Ws)),x.pipe((0,cd.b)({next:L,complete:L,error:L})).subscribe(C).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $c=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Ka(Zone.current)),this.insideAngular=x.run(()=>new Ka(Zone.current,ud.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(v.LFG(v.R0b))},D.\u0275prov=v.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function wo(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function zs(D){return wo(),function(D){return function(x){return(x=x.lift(new tf(D.ngZone))).pipe((0,ai.R)(D.outsideAngular),(0,is.Q)(D.insideAngular))}}(wo())(D)}},1347:(et,ve,k)=>{"use strict";k.d(ve,{$:()=>qh,A:()=>vt,E:()=>ks,G:()=>Sr,I:()=>Ui,K:()=>io,L:()=>Pn,M:()=>kr,N:()=>Cc,P:()=>Za,Q:()=>zo,R:()=>sg,T:()=>Ji,U:()=>Vs,V:()=>zh,W:()=>ed,X:()=>_s,Y:()=>Rc,Z:()=>La,_:()=>Es,a:()=>Hs,a0:()=>Iu,a1:()=>xc,a2:()=>Ba,a3:()=>Du,a4:()=>Nc,a5:()=>bu,a6:()=>Yp,a7:()=>gr,a8:()=>$s,a9:()=>Qp,aA:()=>pd,aB:()=>nf,aC:()=>wn,aG:()=>Pu,aJ:()=>Gt,aa:()=>Jp,ab:()=>po,ae:()=>Zh,af:()=>Rn,ag:()=>Xo,aj:()=>Sc,ak:()=>id,am:()=>sd,an:()=>Di,ao:()=>_c,ap:()=>Hn,aq:()=>Os,ar:()=>an,as:()=>nn,at:()=>Id,au:()=>af,av:()=>Qt,aw:()=>Oe,ax:()=>Xe,ay:()=>Ei,az:()=>ug,b:()=>ea,c:()=>ke,d:()=>_r,e:()=>Dn,f:()=>og,g:()=>Wc,h:()=>la,i:()=>Is,j:()=>hd,k:()=>Qa,l:()=>wo,m:()=>V0,o:()=>_t,r:()=>Ai,s:()=>tf,u:()=>aa,z:()=>pn});var v=k(8239),V=k(4213),P=k(1572);function oe(_,h){var g={};for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&h.indexOf(w)<0&&(g[w]=_[w]);if(null!=_&&"function"==typeof Object.getOwnPropertySymbols){var A=0;for(w=Object.getOwnPropertySymbols(_);A<w.length;A++)h.indexOf(w[A])<0&&Object.prototype.propertyIsEnumerable.call(_,w[A])&&(g[w[A]]=_[w[A]])}return g}var De=k(3855),Fe=k(1177);const _t={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},vt={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const pn=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Tr=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ar=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),hs=new De.Yd("@firebase/auth");function gn(_,...h){hs.logLevel<=De.in.ERROR&&hs.error(`Auth (${P.SDK_VERSION}): ${_}`,...h)}function nn(_,...h){throw Fi(_,...h)}function Qt(_,...h){return Fi(_,...h)}function fs(_,h,g){const w=Object.assign(Object.assign({},Tr()),{[h]:g});return new V.LL("auth","Firebase",w).create(h,{appName:_.name})}function yi(_,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&nn(_,"argument-error"),fs(_,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fi(_,...h){if("string"!=typeof _){const g=h[0],w=[...h.slice(1)];return w[0]&&(w[0].appName=_.name),_._errorFactory.create(g,...w)}return Ar.create(_,...h)}function Oe(_,h,...g){if(!_)throw Fi(h,...g)}function _n(_){const h="INTERNAL ASSERTION FAILED: "+_;throw gn(h),new Error(h)}function Hn(_,h){_||_n(h)}const _i=new Map;function Xe(_){Hn(_ instanceof Function,"Expected a class definition");let h=_i.get(_);return h?(Hn(h instanceof _,"Instance stored in cache mismatched with class"),h):(h=new _,_i.set(_,h),h)}function Gn(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function lt(){return"http:"===ut()||"https:"===ut()}function ut(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Wn{constructor(h,g){this.shortDelay=h,this.longDelay=g,Hn(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lt()||(0,V.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function rn(_,h){Hn(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class $e{static initialize(h,g,w){this.fetchImpl=h,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ot={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ma=new Wn(3e4,6e4);function cn(_,h){return _.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:_.tenantId}):h}function sn(_,h,g,w){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,v.Z)(function*(_,h,g,w,A={}){return ln(_,A,()=>{let R={},K={};w&&("GET"===h?K=w:R={body:JSON.stringify(w)});const ye=(0,V.xO)(Object.assign({key:_.config.apiKey},K)).slice(1),qe=new($e.headers());return qe.set("Content-Type","application/json"),qe.set("X-Client-Version",_._getSdkClientVersion()),_.languageCode&&qe.set("X-Firebase-Locale",_.languageCode),$e.fetch()(G(_,_.config.apiHost,g,ye),Object.assign({method:h,headers:qe,referrerPolicy:"no-referrer"},R))})})).apply(this,arguments)}function ln(_,h,g){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,v.Z)(function*(_,h,g){_._canInitEmulator=!1;const w=Object.assign(Object.assign({},ot),h);try{const A=new Ie(_),R=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const K=yield R.json();if("needConfirmation"in K)throw ne(_,"account-exists-with-different-credential",K);if(R.ok&&!("errorMessage"in K))return K;{const ye=R.ok?K.errorMessage:K.error.message,[qe,Ue]=ye.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===qe)throw ne(_,"credential-already-in-use",K);if("EMAIL_EXISTS"===qe)throw ne(_,"email-already-in-use",K);const dt=w[qe]||qe.toLowerCase().replace(/[_\s]+/g,"-");if(Ue)throw fs(_,dt,Ue);nn(_,dt)}}catch(A){if(A instanceof V.ZR)throw A;nn(_,"network-request-failed")}})).apply(this,arguments)}function $(_,h,g,w){return U.apply(this,arguments)}function U(){return(U=(0,v.Z)(function*(_,h,g,w,A={}){const R=yield sn(_,h,g,w,A);return"mfaPendingCredential"in R&&nn(_,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function G(_,h,g,w){const A=`${h}${g}?${w}`;return _.config.emulator?rn(_.config,A):`${_.config.apiScheme}://${A}`}class Ie{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(Qt(this.auth,"timeout")),Ma.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ne(_,h,g){const w={appName:_.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const A=Qt(_,h,w);return A.customData._tokenResponse=g,A}function it(){return(it=(0,v.Z)(function*(_,h){return sn(_,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function on(_,h){return zn.apply(this,arguments)}function zn(){return(zn=(0,v.Z)(function*(_,h){return sn(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Fn(_,h){return fr.apply(this,arguments)}function fr(){return(fr=(0,v.Z)(function*(_,h){return sn(_,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function ee(_){if(_)try{const h=new Date(Number(_));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Te(){return(Te=(0,v.Z)(function*(_,h=!1){const g=(0,V.m9)(_),w=yield g.getIdToken(h),A=gt(w);Oe(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,K=null==R?void 0:R.sign_in_provider;return{claims:A,token:w,authTime:ee(ze(A.auth_time)),issuedAtTime:ee(ze(A.iat)),expirationTime:ee(ze(A.exp)),signInProvider:K||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function ze(_){return 1e3*Number(_)}function gt(_){const[h,g,w]=_.split(".");if(void 0===h||void 0===g||void 0===w)return gn("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,V.tV)(g);return A?JSON.parse(A):(gn("Failed to decode base64 JWT payload"),null)}catch(A){return gn("Caught error parsing JWT payload as JSON",A),null}}function xt(_,h){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,v.Z)(function*(_,h,g=!1){if(g)return h;try{return yield h}catch(w){throw w instanceof V.ZR&&Vn(w)&&_.auth.currentUser===_&&(yield _.auth.signOut()),w}})).apply(this,arguments)}function Vn({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Nn{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(h);this.timerId=setTimeout((0,v.Z)(function*(){yield g.iteration()}),w)}iteration(){var h=this;return(0,v.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&h.schedule(!0))}h.schedule()})()}}class mt{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=ee(this.lastLoginAt),this.creationTime=ee(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Sn(_){return He.apply(this,arguments)}function He(){return(He=(0,v.Z)(function*(_){var h;const g=_.auth,w=yield _.getIdToken(),A=yield xt(_,Fn(g,{idToken:w}));Oe(null==A?void 0:A.users.length,g,"internal-error");const R=A.users[0];_._notifyReloadListener(R);const K=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?Li(R.providerUserInfo):[],ye=ni(_.providerData,K),dt=!!_.isAnonymous&&!(_.email&&R.passwordHash||(null==ye?void 0:ye.length)),Jt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ye,metadata:new mt(R.createdAt,R.lastLoginAt),isAnonymous:dt};Object.assign(_,Jt)})).apply(this,arguments)}function vn(){return(vn=(0,v.Z)(function*(_){const h=(0,V.m9)(_);yield Sn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function ni(_,h){return[..._.filter(w=>!h.some(A=>A.providerId===w.providerId)),...h]}function Li(_){return _.map(h=>{var{providerId:g}=h,w=oe(h,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function ps(){return(ps=(0,v.Z)(function*(_,h){const g=yield ln(_,{},()=>{const w=(0,V.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:R}=_.config,K=G(_,A,"/v1/token",`key=${R}`);return $e.fetch()(K,{method:"POST",headers:{"X-Client-Version":_._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:w})});return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class En{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){Oe(h.idToken,"internal-error"),Oe(void 0!==h.idToken,"internal-error"),Oe(void 0!==h.refreshToken,"internal-error");const g="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function(_){const h=gt(_);return Oe(h,"internal-error"),Oe(void 0!==h.exp,"internal-error"),Oe(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var w=this;return(0,v.Z)(function*(){return Oe(!w.accessToken||w.refreshToken,h,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(h,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var w=this;return(0,v.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:K}=yield function(_,h){return ps.apply(this,arguments)}(h,g);w.updateTokensAndExpiration(A,R,Number(K))})()}updateTokensAndExpiration(h,g,w){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(h,g){const{refreshToken:w,accessToken:A,expirationTime:R}=g,K=new En;return w&&(Oe("string"==typeof w,"internal-error",{appName:h}),K.refreshToken=w),A&&(Oe("string"==typeof A,"internal-error",{appName:h}),K.accessToken=A),R&&(Oe("number"==typeof R,"internal-error",{appName:h}),K.expirationTime=R),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new En,this.toJSON())}_performRefresh(){return _n("not implemented")}}function zr(_,h){Oe("string"==typeof _||void 0===_,"internal-error",{appName:h})}class vi{constructor(h){var{uid:g,auth:w,stsTokenManager:A}=h,R=oe(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Nn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.metadata=new mt(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,v.Z)(function*(){const w=yield xt(g,g.stsTokenManager.getToken(g.auth,h));return Oe(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(h){return function(_){return Te.apply(this,arguments)}(this,h)}reload(){return function(_){return vn.apply(this,arguments)}(this)}_assign(h){this!==h&&(Oe(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new vi(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var w=this;return(0,v.Z)(function*(){let A=!1;h.idToken&&h.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(h),A=!0),g&&(yield Sn(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var h=this;return(0,v.Z)(function*(){const g=yield h.getIdToken();return yield xt(h,function(_,h){return it.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var w,A,R,K,ye,qe,Ue,dt;const Jt=null!==(w=g.displayName)&&void 0!==w?w:void 0,bn=null!==(A=g.email)&&void 0!==A?A:void 0,Kr=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,To=null!==(K=g.photoURL)&&void 0!==K?K:void 0,df=null!==(ye=g.tenantId)&&void 0!==ye?ye:void 0,vg=null!==(qe=g._redirectEventId)&&void 0!==qe?qe:void 0,fa=null!==(Ue=g.createdAt)&&void 0!==Ue?Ue:void 0,Cn=null!==(dt=g.lastLoginAt)&&void 0!==dt?dt:void 0,{uid:Vu,emailVerified:bd,isAnonymous:Uu,providerData:nr,stsTokenManager:Bu}=g;Oe(Vu&&Bu,h,"internal-error");const hf=En.fromJSON(this.name,Bu);Oe("string"==typeof Vu,h,"internal-error"),zr(Jt,h.name),zr(bn,h.name),Oe("boolean"==typeof bd,h,"internal-error"),Oe("boolean"==typeof Uu,h,"internal-error"),zr(Kr,h.name),zr(To,h.name),zr(df,h.name),zr(vg,h.name),zr(fa,h.name),zr(Cn,h.name);const ff=new vi({uid:Vu,auth:h,email:bn,emailVerified:bd,displayName:Jt,isAnonymous:Uu,photoURL:To,phoneNumber:Kr,tenantId:df,stsTokenManager:hf,createdAt:fa,lastLoginAt:Cn});return nr&&Array.isArray(nr)&&(ff.providerData=nr.map(r_=>Object.assign({},r_))),vg&&(ff._redirectEventId=vg),ff}static _fromIdTokenResponse(h,g,w=!1){return(0,v.Z)(function*(){const A=new En;A.updateFromServerResponse(g);const R=new vi({uid:g.localId,auth:h,stsTokenManager:A,isAnonymous:w});return yield Sn(R),R})()}}const io=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,v.Z)(function*(){return!0})()}_set(g,w){var A=this;return(0,v.Z)(function*(){A.storage[g]=w})()}_get(g){var w=this;return(0,v.Z)(function*(){const A=w.storage[g];return void 0===A?null:A})()}_remove(g){var w=this;return(0,v.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return _.type="NONE",_})();function Ei(_,h,g){return`firebase:${_}:${h}:${g}`}class wi{constructor(h,g,w){this.persistence=h,this.auth=g,this.userKey=w;const{config:A,name:R}=this.auth;this.fullUserKey=Ei(this.userKey,A.apiKey,R),this.fullPersistenceKey=Ei("persistence",A.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,v.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?vi._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,v.Z)(function*(){if(g.persistence===h)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,w="authUser"){return(0,v.Z)(function*(){if(!g.length)return new wi(Xe(io),h,w);const A=(yield Promise.all(g.map(function(){var Ue=(0,v.Z)(function*(dt){if(yield dt._isAvailable())return dt});return function(dt){return Ue.apply(this,arguments)}}()))).filter(Ue=>Ue);let R=A[0]||Xe(io);const K=Ei(w,h.config.apiKey,h.name);let ye=null;for(const Ue of g)try{const dt=yield Ue._get(K);if(dt){const Jt=vi._fromJSON(h,dt);Ue!==R&&(ye=Jt),R=Ue;break}}catch(dt){}const qe=A.filter(Ue=>Ue._shouldAllowMigration);return R._shouldAllowMigration&&qe.length?(R=qe[0],ye&&(yield R._set(K,ye.toJSON())),yield Promise.all(g.map(function(){var Ue=(0,v.Z)(function*(dt){if(dt!==R)try{yield dt._remove(K)}catch(Jt){}});return function(dt){return Ue.apply(this,arguments)}}())),new wi(R,h,w)):new wi(R,h,w)})()}}function Ms(_){const h=_.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ii(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(dn(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(jl(h))return"Blackberry";if(hu(h))return"Webos";if(Ho(h))return"Safari";if((h.includes("chrome/")||so(h))&&!h.includes("edge/"))return"Chrome";if(an(h))return"Android";{const w=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function dn(_=(0,V.z$)()){return/firefox\//i.test(_)}function Ho(_=(0,V.z$)()){const h=_.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function so(_=(0,V.z$)()){return/crios\//i.test(_)}function Ii(_=(0,V.z$)()){return/iemobile/i.test(_)}function an(_=(0,V.z$)()){return/android/i.test(_)}function jl(_=(0,V.z$)()){return/blackberry/i.test(_)}function hu(_=(0,V.z$)()){return/webos/i.test(_)}function Os(_=(0,V.z$)()){return/iphone|ipad|ipod/i.test(_)}function _c(_=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}function gs(_=(0,V.z$)()){return Os(_)||an(_)||hu(_)||jl(_)||/windows phone/i.test(_)||Ii(_)}function vc(_,h=[]){let g;switch(_){case"Browser":g=Ms((0,V.z$)());break;case"Worker":g=`${Ms((0,V.z$)())}-${_}`;break;default:g=_}const w=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${P.SDK_VERSION}/${w}`}class ms{constructor(h,g){this.app=h,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $l(this),this.idTokenSubscription=new $l(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ar,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(h,g){var w=this;return g&&(this._popupRedirectResolver=Xe(g)),this._initializationPromise=this.queue((0,v.Z)(function*(){var A,R;w._deleted||(w.persistenceManager=yield wi.create(w,h),!w._deleted&&((null===(A=w._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)&&(yield w._popupRedirectResolver._initialize(w)),yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(R=w.currentUser)||void 0===R?void 0:R.uid)||null,!w._deleted&&(w._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,v.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g)}})()}initializeCurrentUser(h){var g=this;return(0,v.Z)(function*(){var w;let A=yield g.assertedPersistence.getCurrentUser();if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const R=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,K=null==A?void 0:A._redirectEventId,ye=yield g.tryRedirectSignIn(h);(!R||R===K)&&(null==ye?void 0:ye.user)&&(A=ye.user)}return A?A._redirectEventId?(Oe(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===A._redirectEventId?g.directlySetCurrentUser(A):g.reloadAndSetCurrentUserOrClear(A)):g.reloadAndSetCurrentUserOrClear(A):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var g=this;return(0,v.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch(A){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,v.Z)(function*(){try{yield Sn(h)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var h=this;return(0,v.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,v.Z)(function*(){const w=h?(0,V.m9)(h):null;return w&&Oe(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(h){var g=this;return(0,v.Z)(function*(){if(!g._deleted)return h&&Oe(g.tenantId===h.tenantId,g,"tenant-id-mismatch"),g.queue((0,v.Z)(function*(){yield g.directlySetCurrentUser(h),g.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,v.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var g=this;return this.queue((0,v.Z)(function*(){yield g.assertedPersistence.setPersistence(Xe(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new V.LL("auth","Firebase",h())}onAuthStateChanged(h,g,w){return this.registerStateListener(this.authStateSubscription,h,g,w)}onIdTokenChanged(h,g,w){return this.registerStateListener(this.idTokenSubscription,h,g,w)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var w=this;return(0,v.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(g);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,v.Z)(function*(){if(!g.redirectPersistenceManager){const w=h&&Xe(h)||g._popupRedirectResolver;Oe(w,g,"argument-error"),g.redirectPersistenceManager=yield wi.create(g,[Xe(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,v.Z)(function*(){var w,A;return g._isInitialized&&(yield g.queue((0,v.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===h?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,v.Z)(function*(){if(h===g.currentUser)return g.queue((0,v.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,w,A){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),K=this._isInitialized?Promise.resolve():this._initializationPromise;return Oe(K,this,"internal-error"),K.then(()=>R(this.currentUser)),"function"==typeof g?h.addObserver(g,w,A):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,v.Z)(function*(){g.currentUser&&g.currentUser!==h&&(g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh()),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=vc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function wn(_){return(0,V.m9)(_)}class $l{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,V.ne)(g=>this.observer=g)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ks(_,h,g){const w=wn(_);Oe(w._canInitEmulator,w,"emulator-config-failed"),Oe(/^https?:\/\//.test(h),w,"invalid-emulator-scheme");const A=!!(null==g?void 0:g.disableWarnings),R=pu(h),{host:K,port:ye}=function(_){const h=pu(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(h.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const R=A[1];return{host:R,port:Hl(w.substr(R.length+1))}}{const[R,K]=w.split(":");return{host:R,port:Hl(K)}}}(h);w.config.emulator={url:`${R}//${K}${null===ye?"":`:${ye}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:K,port:ye,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function(){function _(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}function pu(_){const h=_.indexOf(":");return h<0?"":_.substr(0,h+1)}function Hl(_){if(!_)return null;const h=Number(_);return isNaN(h)?null:h}class Sr{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return _n("not implemented")}_getIdTokenResponse(h){return _n("not implemented")}_linkToIdToken(h,g){return _n("not implemented")}_getReauthenticationResolver(h){return _n("not implemented")}}function Gl(_,h){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,v.Z)(function*(_,h){return sn(_,"POST","/v1/accounts:resetPassword",cn(_,h))})).apply(this,arguments)}function $h(_,h){return zl.apply(this,arguments)}function zl(){return(zl=(0,v.Z)(function*(_,h){return sn(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function zp(_,h){return ql.apply(this,arguments)}function ql(){return(ql=(0,v.Z)(function*(_,h){return sn(_,"POST","/v1/accounts:update",cn(_,h))})).apply(this,arguments)}function Fs(){return(Fs=(0,v.Z)(function*(_,h){return $(_,"POST","/v1/accounts:signInWithPassword",cn(_,h))})).apply(this,arguments)}function wc(_,h){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,v.Z)(function*(_,h){return sn(_,"POST","/v1/accounts:sendOobCode",cn(_,h))})).apply(this,arguments)}function qp(_,h){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,v.Z)(function*(_,h){return wc(_,h)})).apply(this,arguments)}function Kp(_,h){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,v.Z)(function*(_,h){return wc(_,h)})).apply(this,arguments)}function qy(_,h){return Go.apply(this,arguments)}function Go(){return(Go=(0,v.Z)(function*(_,h){return wc(_,h)})).apply(this,arguments)}function Ic(_,h){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,v.Z)(function*(_,h){return wc(_,h)})).apply(this,arguments)}function Ql(){return(Ql=(0,v.Z)(function*(_,h){return $(_,"POST","/v1/accounts:signInWithEmailLink",cn(_,h))})).apply(this,arguments)}function Wo(){return(Wo=(0,v.Z)(function*(_,h){return $(_,"POST","/v1/accounts:signInWithEmailLink",cn(_,h))})).apply(this,arguments)}class Yi extends Sr{constructor(h,g,w,A=null){super("password",w),this._email=h,this._password=g,this._tenantId=A}static _fromEmailAndPassword(h,g){return new Yi(h,g,"password")}static _fromEmailAndCode(h,g,w=null){return new Yi(h,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,v.Z)(function*(){switch(g.signInMethod){case"password":return function(_,h){return Fs.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(_,h){return Ql.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:nn(h,"internal-error")}})()}_linkToIdToken(h,g){var w=this;return(0,v.Z)(function*(){switch(w.signInMethod){case"password":return $h(h,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(_,h){return Wo.apply(this,arguments)}(h,{idToken:g,email:w._email,oobCode:w._password});default:nn(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Qi(_,h){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,v.Z)(function*(_,h){return $(_,"POST","/v1/accounts:signInWithIdp",cn(_,h))})).apply(this,arguments)}class Ui extends Sr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new Ui(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):nn("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:A}=g,R=oe(g,["providerId","signInMethod"]);if(!w||!A)return null;const K=new Ui(w,A);return K.idToken=R.idToken||void 0,K.accessToken=R.accessToken||void 0,K.secret=R.secret,K.nonce=R.nonce,K.pendingToken=R.pendingToken||null,K}_getIdTokenResponse(h){return Qi(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,Qi(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Qi(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,V.xO)(g)}return h}}function ao(_,h){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,v.Z)(function*(_,h){return sn(_,"POST","/v1/accounts:sendVerificationCode",cn(_,h))})).apply(this,arguments)}function gu(){return(gu=(0,v.Z)(function*(_,h){return $(_,"POST","/v1/accounts:signInWithPhoneNumber",cn(_,h))})).apply(this,arguments)}function mu(){return(mu=(0,v.Z)(function*(_,h){const g=yield $(_,"POST","/v1/accounts:signInWithPhoneNumber",cn(_,h));if(g.temporaryProof)throw ne(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Gh={USER_NOT_FOUND:"user-not-found"};function bc(){return(bc=(0,v.Z)(function*(_,h){return $(_,"POST","/v1/accounts:signInWithPhoneNumber",cn(_,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Gh)})).apply(this,arguments)}class ys extends Sr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new ys({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new ys({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function(_,h){return gu.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function(_,h){return mu.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function(_,h){return bc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:w,verificationCode:A}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:w,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:R}=h;return w||g||A||R?new ys({verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:R}):null}}class uo{constructor(h){var g,w,A,R,K,ye;const qe=(0,V.zd)((0,V.pd)(h)),Ue=null!==(g=qe.apiKey)&&void 0!==g?g:null,dt=null!==(w=qe.oobCode)&&void 0!==w?w:null,Jt=function(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=qe.mode)&&void 0!==A?A:null);Oe(Ue&&dt&&Jt,"argument-error"),this.apiKey=Ue,this.operation=Jt,this.code=dt,this.continueUrl=null!==(R=qe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(K=qe.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(ye=qe.tenantId)&&void 0!==ye?ye:null}static parseLink(h){const g=function(_){const h=(0,V.zd)((0,V.pd)(_)).link,g=h?(0,V.zd)((0,V.pd)(h)).deep_link_id:null,w=(0,V.zd)((0,V.pd)(_)).deep_link_id;return(w?(0,V.zd)((0,V.pd)(w)).link:null)||w||g||h||_}(h);try{return new uo(g)}catch(w){return null}}}let Pn=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,w){return Yi._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const A=uo.parseLink(w);return Oe(A,"argument-error"),Yi._fromEmailAndCode(g,A.code,A.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class ii{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class ji extends ii{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Ji extends ji{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return Oe("providerId"in g&&"signInMethod"in g,"argument-error"),Ui._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return Oe(h.idToken||h.accessToken,"argument-error"),Ui._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Ji.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Ji.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:R,nonce:K,providerId:ye}=h;if(!w&&!A&&!g&&!R||!ye)return null;try{return new Ji(ye)._credential({idToken:g,accessToken:w,nonce:K,pendingToken:R})}catch(qe){return null}}}let kr=(()=>{class _ extends ji{constructor(){super("facebook.com")}static credential(g){return Ui._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(w){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Cc=(()=>{class _ extends ji{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return Ui._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:A}=g;if(!w&&!A)return null;try{return _.credential(w,A)}catch(R){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),zo=(()=>{class _ extends ji{constructor(){super("github.com")}static credential(g){return Ui._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(w){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Gt extends Sr{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Qi(h,this.buildRequest())}_linkToIdToken(h,g){const w=this.buildRequest();return w.idToken=g,Qi(h,w)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Qi(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:w,signInMethod:A,pendingToken:R}=g;return w&&A&&R&&w===A?new Gt(w,R):null}static _create(h,g){return new Gt(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Vs extends ii{constructor(h){Oe(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Vs.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Vs.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=Gt.fromJSON(h);return Oe(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:w}=h;if(!g||!w)return null;try{return Gt._create(w,g)}catch(A){return null}}}let zh=(()=>{class _ extends ji{constructor(){super("twitter.com")}static credential(g,w){return Ui._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=g;if(!w||!A)return null;try{return _.credential(w,A)}catch(R){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function $i(_,h){return vu.apply(this,arguments)}function vu(){return(vu=(0,v.Z)(function*(_,h){return $(_,"POST","/v1/accounts:signUp",cn(_,h))})).apply(this,arguments)}class Fr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,w,A=!1){return(0,v.Z)(function*(){const R=yield vi._fromIdTokenResponse(h,w,A),K=ft(w);return new Fr({user:R,providerId:K,_tokenResponse:w,operationType:g})})()}static _forOperation(h,g,w){return(0,v.Z)(function*(){yield h._updateTokensIfNecessary(w,!0);const A=ft(w);return new Fr({user:h,providerId:A,_tokenResponse:w,operationType:g})})()}}function ft(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function ed(_){return ka.apply(this,arguments)}function ka(){return(ka=(0,v.Z)(function*(_){var h;const g=wn(_);if(yield g._initializationPromise,null===(h=g.currentUser)||void 0===h?void 0:h.isAnonymous)return new Fr({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield $i(g,{returnSecureToken:!0}),A=yield Fr._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Fa extends V.ZR{constructor(h,g,w,A){var R;super(g.code,g.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,Fa.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(h,g,w,A){return new Fa(h,g,w,A)}}function Tc(_,h,g,w){return("reauthenticate"===h?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Fa._fromErrorAndOperation(_,R,h,w):R})}function Ac(_){return new Set(_.map(({providerId:h})=>h).filter(h=>!!h))}function Sc(_,h){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,v.Z)(function*(_,h){const g=(0,V.m9)(_);yield Xi(!0,g,h);const{providerUserInfo:w}=yield on(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),A=Ac(w||[]);return g.providerData=g.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Re(_,h){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,v.Z)(function*(_,h,g=!1){const w=yield xt(_,h._linkToIdToken(_.auth,yield _.getIdToken()),g);return Fr._forOperation(_,"link",w)})).apply(this,arguments)}function Xi(_,h,g){return In.apply(this,arguments)}function In(){return(In=(0,v.Z)(function*(_,h,g){yield Sn(h);const A=!1===_?"provider-already-linked":"no-such-provider";Oe(Ac(h.providerData).has(g)===_,h.auth,A)})).apply(this,arguments)}function co(_,h){return Us.apply(this,arguments)}function Us(){return(Us=(0,v.Z)(function*(_,h,g=!1){const{auth:w}=_,A="reauthenticate";try{const R=yield xt(_,Tc(w,A,h,_),g);Oe(R.idToken,w,"internal-error");const K=gt(R.idToken);Oe(K,w,"internal-error");const{sub:ye}=K;return Oe(_.uid===ye,w,"user-mismatch"),Fr._forOperation(_,A,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&nn(w,"user-mismatch"),R}})).apply(this,arguments)}function pr(_,h){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,v.Z)(function*(_,h,g=!1){const w="signIn",A=yield Tc(_,w,h),R=yield Fr._fromIdTokenResponse(_,w,A);return g||(yield _._updateCurrentUser(R.user)),R})).apply(this,arguments)}function _s(_,h){return wu.apply(this,arguments)}function wu(){return(wu=(0,v.Z)(function*(_,h){return pr(wn(_),h)})).apply(this,arguments)}function Rc(_,h){return lo.apply(this,arguments)}function lo(){return(lo=(0,v.Z)(function*(_,h){const g=(0,V.m9)(_);return yield Xi(!1,g,h.providerId),Re(g,h)})).apply(this,arguments)}function La(_,h){return cr.apply(this,arguments)}function cr(){return(cr=(0,v.Z)(function*(_,h){return co((0,V.m9)(_),h)})).apply(this,arguments)}function vs(_,h){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,v.Z)(function*(_,h){return $(_,"POST","/v1/accounts:signInWithCustomToken",cn(_,h))})).apply(this,arguments)}function Es(_,h){return si.apply(this,arguments)}function si(){return(si=(0,v.Z)(function*(_,h){const g=wn(_),w=yield vs(g,{token:h,returnSecureToken:!0}),A=yield Fr._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Va{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?Yo._fromServerResponse(h,g):nn(h,"internal-error")}}class Yo extends Va{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new Yo(g)}}function Bs(_,h,g){var w;Oe((null===(w=g.url)||void 0===w?void 0:w.length)>0,_,"invalid-continue-uri"),Oe(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Oe(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(Oe(g.android.packageName.length>0,_,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function qh(_,h,g){return js.apply(this,arguments)}function js(){return(js=(0,v.Z)(function*(_,h,g){const w=(0,V.m9)(_),A={requestType:"PASSWORD_RESET",email:h};g&&Bs(w,A,g),yield Kp(w,A)})).apply(this,arguments)}function Iu(_,h,g){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,v.Z)(function*(_,h,g){yield Gl((0,V.m9)(_),{oobCode:h,newPassword:g})})).apply(this,arguments)}function xc(_,h){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,v.Z)(function*(_,h){yield zp((0,V.m9)(_),{oobCode:h})})).apply(this,arguments)}function Ba(_,h){return ho.apply(this,arguments)}function ho(){return(ho=(0,v.Z)(function*(_,h){const g=(0,V.m9)(_),w=yield Gl(g,{oobCode:h}),A=w.requestType;switch(Oe(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Oe(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Oe(w.mfaInfo,g,"internal-error");default:Oe(w.email,g,"internal-error")}let R=null;return w.mfaInfo&&(R=Va._fromServerResponse(wn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function Du(_,h){return ja.apply(this,arguments)}function ja(){return(ja=(0,v.Z)(function*(_,h){const{data:g}=yield Ba((0,V.m9)(_),h);return g.email})).apply(this,arguments)}function Nc(_,h,g){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,v.Z)(function*(_,h,g){const w=wn(_),A=yield $i(w,{returnSecureToken:!0,email:h,password:g}),R=yield Fr._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(R.user),R})).apply(this,arguments)}function bu(_,h,g){return _s((0,V.m9)(_),Pn.credential(h,g))}function Yp(_,h,g){return $a.apply(this,arguments)}function $a(){return($a=(0,v.Z)(function*(_,h,g){const w=(0,V.m9)(_),A={requestType:"EMAIL_SIGNIN",email:h};Oe(g.handleCodeInApp,w,"argument-error"),g&&Bs(w,A,g),yield qy(w,A)})).apply(this,arguments)}function gr(_,h){const g=uo.parseLink(h);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}function $s(_,h,g){return mn.apply(this,arguments)}function mn(){return(mn=(0,v.Z)(function*(_,h,g){const w=(0,V.m9)(_),A=Pn.credentialWithLink(h,g||Gn());return Oe(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),_s(w,A)})).apply(this,arguments)}function Kh(_,h){return td.apply(this,arguments)}function td(){return(td=(0,v.Z)(function*(_,h){return sn(_,"POST","/v1/accounts:createAuthUri",cn(_,h))})).apply(this,arguments)}function Qp(_,h){return fo.apply(this,arguments)}function fo(){return(fo=(0,v.Z)(function*(_,h){const w={identifier:h,continueUri:lt()?Gn():"http://localhost"},{signinMethods:A}=yield Kh((0,V.m9)(_),w);return A||[]})).apply(this,arguments)}function Jp(_,h){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,v.Z)(function*(_,h){const g=(0,V.m9)(_),A={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};h&&Bs(g.auth,A,h);const{email:R}=yield qp(g.auth,A);R!==_.email&&(yield _.reload())})).apply(this,arguments)}function po(_,h,g){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,v.Z)(function*(_,h,g){const w=(0,V.m9)(_),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:h};g&&Bs(w.auth,R,g);const{email:K}=yield Ic(w.auth,R);K!==_.email&&(yield _.reload())})).apply(this,arguments)}function Tu(_,h){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,v.Z)(function*(_,h){return sn(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Zh(_,h){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,v.Z)(function*(_,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const w=(0,V.m9)(_),R={idToken:yield w.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},K=yield xt(w,Tu(w.auth,R));w.displayName=K.displayName||null,w.photoURL=K.photoUrl||null;const ye=w.providerData.find(({providerId:qe})=>"password"===qe);ye&&(ye.displayName=w.displayName,ye.photoURL=w.photoURL),yield w._updateTokensIfNecessary(K)})).apply(this,arguments)}function Rn(_,h){return nd((0,V.m9)(_),h,null)}function Xo(_,h){return nd((0,V.m9)(_),null,h)}function nd(_,h,g){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,v.Z)(function*(_,h,g){const{auth:w}=_,R={idToken:yield _.getIdToken(),returnSecureToken:!0};h&&(R.email=h),g&&(R.password=g);const K=yield xt(_,$h(w,R));yield _._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class es{constructor(h,g,w={}){this.isNewUser=h,this.providerId=g,this.profile=w}}class Yh extends es{constructor(h,g,w,A){super(h,g,w),this.username=A}}class rd extends es{constructor(h,g){super(h,"facebook.com",g)}}class Xp extends Yh{constructor(h,g){super(h,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class go extends es{constructor(h,g){super(h,"google.com",g)}}class Su extends Yh{constructor(h,g,w){super(h,"twitter.com",g,w)}}function id(_){const{user:h,_tokenResponse:g}=_;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(_){var h,g;if(!_)return null;const{providerId:w}=_,A=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},R=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!w&&(null==_?void 0:_.idToken)){const K=null===(g=null===(h=gt(_.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(K)return new es(R,"anonymous"!==K&&"custom"!==K?K:null)}if(!w)return null;switch(w){case"facebook.com":return new rd(R,A);case"github.com":return new Xp(R,A);case"google.com":return new go(R,A);case"twitter.com":return new Su(R,A,_.screenName||null);case"custom":case"anonymous":return new es(R,null);default:return new es(R,w,A)}}(g)}class ws{constructor(h,g){this.type=h,this.credential=g}static _fromIdtoken(h){return new ws("enroll",h)}static _fromMfaPendingCredential(h){return new ws("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,w;if(null==h?void 0:h.multiFactorSession){if(null===(g=h.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return ws._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(w=h.multiFactorSession)||void 0===w?void 0:w.idToken)return ws._fromIdtoken(h.multiFactorSession.idToken)}return null}}class kc{constructor(h,g,w){this.session=h,this.hints=g,this.signInResolver=w}static _fromError(h,g){const w=wn(h),A=g.customData._serverResponse,R=(A.mfaInfo||[]).map(ye=>Va._fromServerResponse(w,ye));Oe(A.mfaPendingCredential,w,"internal-error");const K=ws._fromMfaPendingCredential(A.mfaPendingCredential);return new kc(K,R,function(){var ye=(0,v.Z)(function*(qe){const Ue=yield qe._process(w,K);delete A.mfaInfo,delete A.mfaPendingCredential;const dt=Object.assign(Object.assign({},A),{idToken:Ue.idToken,refreshToken:Ue.refreshToken});switch(g.operationType){case"signIn":const Jt=yield Fr._fromIdTokenResponse(w,g.operationType,dt);return yield w._updateCurrentUser(Jt.user),Jt;case"reauthenticate":return Oe(g.user,w,"internal-error"),Fr._forOperation(g.user,g.operationType,dt);default:nn(w,"internal-error")}});return function(qe){return ye.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,v.Z)(function*(){return g.signInResolver(h)})()}}function sd(_,h){var g;const w=(0,V.m9)(_),A=h;return Oe(h.customData.operationType,w,"argument-error"),Oe(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),kc._fromError(w,A)}function Nu(_,h){return sn(_,"POST","/v2/accounts/mfaEnrollment:start",cn(_,h))}class Hi{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>Va._fromServerResponse(h.auth,w)))})}static _fromUser(h){return new Hi(h)}getSession(){var h=this;return(0,v.Z)(function*(){return ws._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,g){var w=this;return(0,v.Z)(function*(){const A=h,R=yield w.getSession(),K=yield xt(w.user,A._process(w.user.auth,R,g));return yield w.user._updateTokensIfNecessary(K),w.user.reload()})()}unenroll(h){var g=this;return(0,v.Z)(function*(){const w="string"==typeof h?h:h.uid,A=yield g.user.getIdToken(),R=yield xt(g.user,function(_,h){return sn(_,"POST","/v2/accounts/mfaEnrollment:withdraw",cn(_,h))}(g.user.auth,{idToken:A,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:K})=>K!==w),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(K){if("auth/user-token-expired"!==K.code)throw K}})()}}const pt=new WeakMap;function Di(_){const h=(0,V.m9)(_);return pt.has(h)||pt.set(h,Hi._fromUser(h)),pt.get(h)}const mr="__sak";class yr{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(mr,"1"),this.storage.removeItem(mr),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const ea=(()=>{class _ extends yr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const _=(0,V.z$)();return Ho(_)||Os(_)}()&&function(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=gs(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),R=this.localCache[w];A!==R&&g(w,R,A)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((ye,qe,Ue)=>{this.notifyListeners(ye,Ue)});const A=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ye=this.storage.getItem(A);if(g.newValue!==ye)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!w)return}const R=()=>{const ye=this.storage.getItem(A);!w&&this.localCache[A]===ye||this.notifyListeners(A,ye)},K=this.storage.getItem(A);(0,V.w1)()&&10===document.documentMode&&K!==g.newValue&&g.newValue!==g.oldValue?setTimeout(R,10):R()}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var A=()=>super._set,R=this;return(0,v.Z)(function*(){yield A().call(R,g,w),R.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,A=this;return(0,v.Z)(function*(){const R=yield w().call(A,g);return A.localCache[g]=JSON.stringify(R),R})()}_remove(g){var w=()=>super._remove,A=this;return(0,v.Z)(function*(){yield w().call(A,g),delete A.localCache[g]})()}}return _.type="LOCAL",_})(),Hs=(()=>{class _ extends yr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return _.type="SESSION",_})();let yo=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(R=>R.isListeningto(g));if(w)return w;const A=new _(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,v.Z)(function*(){const A=g,{eventId:R,eventType:K,data:ye}=A.data,qe=w.handlersMap[K];if(!(null==qe?void 0:qe.size))return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:K});const Ue=Array.from(qe).map(function(){var Jt=(0,v.Z)(function*(bn){return bn(A.origin,ye)});return function(bn){return Jt.apply(this,arguments)}}()),dt=yield function(_){return Promise.all(_.map(function(){var h=(0,v.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return h.apply(this,arguments)}}()))}(Ue);A.ports[0].postMessage({status:"done",eventId:R,eventType:K,response:dt})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Pu(_="",h=10){let g="";for(let w=0;w<h;w++)g+=Math.floor(10*Math.random());return _+g}class ad{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,w=50){var A=this;return(0,v.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let K,ye;return new Promise((qe,Ue)=>{const dt=Pu("",20);R.port1.start();const Jt=setTimeout(()=>{Ue(new Error("unsupported_event"))},w);ye={messageChannel:R,onMessage(bn){const Kr=bn;if(Kr.data.eventId===dt)switch(Kr.data.status){case"ack":clearTimeout(Jt),K=setTimeout(()=>{Ue(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),qe(Kr.data.response);break;default:clearTimeout(Jt),clearTimeout(K),Ue(new Error("invalid_response"))}}},A.handlers.add(ye),R.port1.addEventListener("message",ye.onMessage),A.target.postMessage({eventType:h,eventId:dt,data:g},[R.port2])}).finally(()=>{ye&&A.removeMessageHandler(ye)})})()}}function Kn(){return window}function Wa(){return void 0!==Kn().WorkerGlobalScope&&"function"==typeof Kn().importScripts}function _o(){return(_o=(0,v.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const ns="firebaseLocalStorageDb",ta="firebaseLocalStorage",bi="fbase_key";class za{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Mu(_,h){return _.transaction([ta],h?"readwrite":"readonly").objectStore(ta)}function qa(){const _=indexedDB.open(ns,1);return new Promise((h,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const w=_.result;try{w.createObjectStore(ta,{keyPath:bi})}catch(A){g(A)}}),_.addEventListener("success",(0,v.Z)(function*(){const w=_.result;w.objectStoreNames.contains(ta)?h(w):(w.close(),yield function(){const _=indexedDB.deleteDatabase(ns);return new za(_).toPromise()}(),h(yield qa()))}))})}function oi(_,h,g){return xn.apply(this,arguments)}function xn(){return(xn=(0,v.Z)(function*(_,h,g){const w=Mu(_,!0).put({[bi]:h,value:g});return new za(w).toPromise()})).apply(this,arguments)}function Lr(){return(Lr=(0,v.Z)(function*(_,h){const g=Mu(_,!1).get(h),w=yield new za(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Vc(_,h){const g=Mu(_,!0).delete(h);return new za(g).toPromise()}const Is=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,v.Z)(function*(){return g.db||(g.db=yield qa()),g.db})()}_withRetries(g){var w=this;return(0,v.Z)(function*(){let A=0;for(;;)try{const R=yield w._openDb();return yield g(R)}catch(R){if(A++>3)throw R;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,v.Z)(function*(){return Wa()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,v.Z)(function*(){g.receiver=yo._getInstance(Wa()?self:null),g.receiver._subscribe("keyChanged",function(){var w=(0,v.Z)(function*(A,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(A,R){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,v.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,v.Z)(function*(){var w,A;if(g.activeServiceWorker=yield function(){return _o.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new ad(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(w=R[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,v.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,v.Z)(function*(){try{if(!indexedDB)return!1;const g=yield qa();return yield oi(g,mr,"1"),yield Vc(g,mr),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,v.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var A=this;return(0,v.Z)(function*(){return A._withPendingWrite((0,v.Z)(function*(){return yield A._withRetries(R=>oi(R,g,w)),A.localCache[g]=w,A.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,v.Z)(function*(){const A=yield w._withRetries(R=>function(_,h){return Lr.apply(this,arguments)}(R,g));return w.localCache[g]=A,A})()}_remove(g){var w=this;return(0,v.Z)(function*(){return w._withPendingWrite((0,v.Z)(function*(){return yield w._withRetries(A=>Vc(A,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,v.Z)(function*(){const w=yield g._withRetries(K=>{const ye=Mu(K,!1).getAll();return new za(ye).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:K,value:ye}of w)R.add(K),JSON.stringify(g.localCache[K])!==JSON.stringify(ye)&&(g.notifyListeners(K,ye),A.push(K));for(const K of Object.keys(g.localCache))g.localCache[K]&&!R.has(K)&&(g.notifyListeners(K,null),A.push(K));return A})()}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,v.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Ci(_,h){return sn(_,"POST","/v2/accounts/mfaSignIn:start",cn(_,h))}function Ds(){return(Ds=(0,v.Z)(function*(_){return(yield sn(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ud(_){return new Promise((h,g)=>{const w=document.createElement("script");w.setAttribute("src",_),w.onload=h,w.onerror=A=>{const R=Qt("internal-error");R.customData=A,g(R)},w.type="text/javascript",w.charset="UTF-8",function(){var _,h;return null!==(h=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==h?h:document}().appendChild(w)})}function cd(_){return`__${_}${Math.floor(1e6*Math.random())}`}const ui=1e12;class Yn{constructor(h){this.auth=h,this.counter=ui,this._widgets=new Map}render(h,g){const w=this.counter;return this._widgets.set(w,new ss(h,this.auth.name,g||{})),this.counter++,w}reset(h){var g;const w=h||ui;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(h){var g;return(null===(g=this._widgets.get(h||ui))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,v.Z)(function*(){var w;return null===(w=g._widgets.get(h||ui))||void 0===w||w.execute(),""})()}}class ss{constructor(h,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;Oe(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(_){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<50;w++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}();const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Eo=cd("rcb"),ia=new Wn(3e4,6e4);class ld{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Kn().grecaptcha}load(h,g=""){return Oe((_=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Kn().grecaptcha):new Promise((w,A)=>{const R=Kn().setTimeout(()=>{A(Qt(h,"network-request-failed"))},ia.get());Kn()[Eo]=()=>{Kn().clearTimeout(R),delete Kn()[Eo];const ye=Kn().grecaptcha;if(!ye)return void A(Qt(h,"internal-error"));const qe=ye.render;ye.render=(Ue,dt)=>{const Jt=qe(Ue,dt);return this.counter++,Jt},this.hostLanguage=g,w(ye)},ud(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:Eo,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),A(Qt(h,"internal-error"))})});var _}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!Kn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ti{load(h){return(0,v.Z)(function*(){return new Yn(h)})()}clearedOneInstance(){}}const jc="recaptcha",sa={theme:"light",type:"image"};class sg{constructor(h,g=Object.assign({},sa),w){this.parameters=g,this.type=jc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wn(w),this.isInvisible="invisible"===this.parameters.size,Oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;Oe(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ti:new ld,this.validateStartingState()}verify(){var h=this;return(0,v.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),w=h.getAssertedRecaptcha();return w.getResponse(g)||new Promise(R=>{const K=ye=>{!ye||(h.tokenChangeListeners.delete(K),R(ye))};h.tokenChangeListeners.add(K),h.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){Oe(!this.parameters.sitekey,this.auth,"argument-error"),Oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof h)h(g);else if("string"==typeof h){const w=Kn()[h];"function"==typeof w&&w(g)}}}assertNotDestroyed(){Oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,v.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,v.Z)(function*(){Oe(lt()&&!Wa(),h.auth,"internal-error"),yield function(){let _=null;return new Promise(h=>{"complete"!==document.readyState?(_=()=>h(),window.addEventListener("load",_)):h()}).catch(h=>{throw _&&window.removeEventListener("load",_),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function(_){return Ds.apply(this,arguments)}(h.auth);Oe(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return Oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ka{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=ys._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function tf(_,h,g){return $c.apply(this,arguments)}function $c(){return($c=(0,v.Z)(function*(_,h,g){const w=wn(_),A=yield oa(w,h,(0,V.m9)(g));return new Ka(A,R=>_s(w,R))})).apply(this,arguments)}function wo(_,h,g){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,v.Z)(function*(_,h,g){const w=(0,V.m9)(_);yield Xi(!1,w,"phone");const A=yield oa(w.auth,h,(0,V.m9)(g));return new Ka(A,R=>Rc(w,R))})).apply(this,arguments)}function Ai(_,h,g){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,v.Z)(function*(_,h,g){const w=(0,V.m9)(_),A=yield oa(w.auth,h,(0,V.m9)(g));return new Ka(A,R=>La(w,R))})).apply(this,arguments)}function oa(_,h,g){return zs.apply(this,arguments)}function zs(){return(zs=(0,v.Z)(function*(_,h,g){var w;const A=yield g.verify();try{let R;if(Oe("string"==typeof A,_,"argument-error"),Oe(g.type===jc,_,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const K=R.session;if("phoneNumber"in R)return Oe("enroll"===K.type,_,"internal-error"),(yield Nu(_,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{Oe("signin"===K.type,_,"internal-error");const ye=(null===(w=R.multiFactorHint)||void 0===w?void 0:w.uid)||R.multiFactorUid;return Oe(ye,_,"missing-multi-factor-info"),(yield Ci(_,{mfaPendingCredential:K.credential,mfaEnrollmentId:ye,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield ao(_,{phoneNumber:R.phoneNumber,recaptchaToken:A});return K}}finally{g._reset()}})).apply(this,arguments)}function aa(_,h){return Io.apply(this,arguments)}function Io(){return(Io=(0,v.Z)(function*(_,h){yield Re((0,V.m9)(_),h)})).apply(this,arguments)}let Za=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=wn(g)}verifyPhoneNumber(g,w){return oa(this.auth,g,(0,V.m9)(w))}static credential(g,w){return ys._fromVerification(g,w)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:A}=g;return w&&A?ys._fromTokenResponse(w,A):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function D(_,h){return h?Xe(h):(Oe(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class C extends Sr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Qi(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Qi(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Qi(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function x(_){return pr(_.auth,new C(_),_.bypassAuthState)}function L(_){const{auth:h,user:g}=_;return Oe(g,h,"internal-error"),co(g,new C(_),_.bypassAuthState)}function Q(_){return ce.apply(this,arguments)}function ce(){return(ce=(0,v.Z)(function*(_){const{auth:h,user:g}=_;return Oe(g,h,"internal-error"),Re(g,new C(_),_.bypassAuthState)})).apply(this,arguments)}class xe{constructor(h,g,w,A,R=!1){this.auth=h,this.resolver=w,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,v.Z)(function*(w,A){h.pendingPromise={resolve:w,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(w,A){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,v.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:R,tenantId:K,error:ye,type:qe}=h;if(ye)return void g.reject(ye);const Ue={auth:g.auth,requestUri:w,sessionId:A,tenantId:K||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(qe)(Ue))}catch(dt){g.reject(dt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return x;case"linkViaPopup":case"linkViaRedirect":return Q;case"reauthViaPopup":case"reauthViaRedirect":return L;default:nn(this.auth,"internal-error")}}resolve(h){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ge=new Wn(2e3,1e4);function ke(_,h,g){return $t.apply(this,arguments)}function $t(){return($t=(0,v.Z)(function*(_,h,g){const w=wn(_);yi(_,h,ii);const A=D(w,g);return new qs(w,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function Dn(_,h,g){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,v.Z)(function*(_,h,g){const w=(0,V.m9)(_);yi(w.auth,h,ii);const A=D(w.auth,g);return new qs(w.auth,"reauthViaPopup",h,A,w).executeNotNull()})).apply(this,arguments)}function _r(_,h,g){return tr.apply(this,arguments)}function tr(){return(tr=(0,v.Z)(function*(_,h,g){const w=(0,V.m9)(_);yi(w.auth,h,ii);const A=D(w.auth,g);return new qs(w.auth,"linkViaPopup",h,A,w).executeNotNull()})).apply(this,arguments)}let qs=(()=>{class _ extends xe{constructor(g,w,A,R,K){super(g,w,R,K),this.provider=A,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,v.Z)(function*(){const w=yield g.execute();return Oe(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,v.Z)(function*(){Hn(1===g.filter.length,"Popup operations only handle one event");const w=Pu();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(Qt(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,A;this.pollId=(null===(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Qt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Ge.get())};g()}}return _.currentPopupAction=null,_})();const qr=new Map;class xr extends xe{constructor(h,g,w=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,v.Z)(function*(){let w=qr.get(g.auth._key());if(!w){try{const R=(yield function(_,h){return vr.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;w=()=>Promise.resolve(R)}catch(A){w=()=>Promise.reject(A)}qr.set(g.auth._key(),w)}return g.bypassAuthState||qr.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,w=this;return(0,v.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(w,h);if("unknown"!==h.type){if(h.eventId){const A=yield w.auth._redirectUserForId(h.eventId);if(A)return w.user=A,g().call(w,h);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,v.Z)(function*(){})()}cleanUp(){}}function vr(){return(vr=(0,v.Z)(function*(_,h){const g=rf(h),w=bs(_);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(g));return yield w._remove(g),A})).apply(this,arguments)}function Bt(_,h){return ua.apply(this,arguments)}function ua(){return(ua=(0,v.Z)(function*(_,h){return bs(_)._set(rf(h),"true")})).apply(this,arguments)}function nf(){qr.clear()}function bs(_){return Xe(_._redirectPersistence)}function rf(_){return Ei("pendingRedirect",_.config.apiKey,_.name)}function og(_,h,g){return function(_,h,g){return ca.apply(this,arguments)}(_,h,g)}function ca(){return(ca=(0,v.Z)(function*(_,h,g){const w=wn(_);yi(_,h,ii);const A=D(w,g);return yield Bt(A,w),A._openRedirect(w,h,"signInViaRedirect")})).apply(this,arguments)}function la(_,h,g){return function(_,h,g){return sf.apply(this,arguments)}(_,h,g)}function sf(){return(sf=(0,v.Z)(function*(_,h,g){const w=(0,V.m9)(_);yi(w.auth,h,ii);const A=D(w.auth,g);yield Bt(A,w.auth);const R=yield gd(w);return A._openRedirect(w.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Wc(_,h,g){return function(_,h,g){return dd.apply(this,arguments)}(_,h,g)}function dd(){return(dd=(0,v.Z)(function*(_,h,g){const w=(0,V.m9)(_);yi(w.auth,h,ii);const A=D(w.auth,g);yield Xi(!1,w,h.providerId),yield Bt(A,w.auth);const R=yield gd(w);return A._openRedirect(w.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function hd(_,h){return fd.apply(this,arguments)}function fd(){return(fd=(0,v.Z)(function*(_,h){return yield wn(_)._initializationPromise,pd(_,h,!1)})).apply(this,arguments)}function pd(_,h){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,v.Z)(function*(_,h,g=!1){const w=wn(_),A=D(w,h),K=yield new xr(w,A,g).execute();return K&&!g&&(delete K.user._redirectEventId,yield w._persistUserIfCurrent(K.user),yield w._setRedirectUser(null,h)),K})).apply(this,arguments)}function gd(_){return da.apply(this,arguments)}function da(){return(da=(0,v.Z)(function*(_){const h=Pu(`${_.uid}:::`);return _._redirectEventId=h,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),h})).apply(this,arguments)}class ug{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(h,w)&&(g=!0,this.sendToConsumer(h,w),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zc(_);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var w;if(h.error&&!zc(h)){const A=(null===(w=h.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(Qt(this.auth,A))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const w=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&w}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zy(h))}saveEventToCache(h){this.cachedEventUids.add(Zy(h)),this.lastProcessedEventTime=Date.now()}}function Zy(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(h=>h).join("-")}function zc({type:_,error:h}){return"unknown"===_&&"auth/no-auth-event"===(null==h?void 0:h.code)}function af(_){return qc.apply(this,arguments)}function qc(){return(qc=(0,v.Z)(function*(_,h={}){return sn(_,"GET","/v1/projects",h)})).apply(this,arguments)}const yd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Do=/^https?/;function ha(){return(ha=(0,v.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:h}=yield af(_);for(const g of h)try{if(cg(g))return}catch(w){}nn(_,"unauthorized-domain")})).apply(this,arguments)}function cg(_){const h=Gn(),{protocol:g,hostname:w}=new URL(h);if(_.startsWith("chrome-extension://")){const K=new URL(_);return""===K.hostname&&""===w?"chrome-extension:"===g&&_.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&K.hostname===w}if(!Do.test(g))return!1;if(yd.test(_))return w===_;const A=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const lg=new Wn(3e4,6e4);function dg(){const _=Kn().___jsl;if(null==_?void 0:_.H)for(const h of Object.keys(_.H))if(_.H[h].r=_.H[h].r||[],_.H[h].L=_.H[h].L||[],_.H[h].r=[..._.H[h].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let Ks=null;function hg(_){return Ks=Ks||function(_){return new Promise((h,g)=>{var w,A,R;function K(){dg(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{dg(),g(Qt(_,"network-request-failed"))},timeout:lg.get()})}if(null===(A=null===(w=Kn().gapi)||void 0===w?void 0:w.iframes)||void 0===A?void 0:A.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=Kn().gapi)||void 0===R?void 0:R.load)){const ye=cd("iframefcb");return Kn()[ye]=()=>{gapi.load?K():g(Qt(_,"network-request-failed"))},ud(`https://apis.google.com/js/api.js?onload=${ye}`)}K()}}).catch(h=>{throw Ks=null,h})}(_),Ks}const _d=new Wn(5e3,15e3),pg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vd(_){const h=_.config;Oe(h.authDomain,_,"auth-domain-config-required");const g=h.emulator?rn(h,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,w={apiKey:h.apiKey,appName:_.name,v:P.SDK_VERSION},A=cf.get(_.config.apiHost);A&&(w.eid=A);const R=_._getFrameworks();return R.length&&(w.fw=R.join(",")),`${g}?${(0,V.xO)(w).slice(1)}`}function Ya(){return Ya=(0,v.Z)(function*(_){const h=yield hg(_),g=Kn().gapi;return Oe(g,_,"internal-error"),h.open({where:document.body,url:vd(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pg,dontclear:!0},w=>new Promise(function(){var A=(0,v.Z)(function*(R,K){yield w.restyle({setHideOnLeave:!1});const ye=Qt(_,"network-request-failed"),qe=Kn().setTimeout(()=>{K(ye)},_d.get());function Ue(){Kn().clearTimeout(qe),R(w)}w.ping(Ue).then(Ue,()=>{K(ye)})});return function(R,K){return A.apply(this,arguments)}}()))}),Ya.apply(this,arguments)}const Qy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Kc{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Id(_,h,g,w,A,R){Oe(_.config.authDomain,_,"auth-domain-config-required"),Oe(_.config.apiKey,_,"invalid-api-key");const K={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:w,v:P.SDK_VERSION,eventId:A};if(h instanceof ii){h.setDefaultLanguage(_.languageCode),K.providerId=h.providerId||"",(0,V.xb)(h.getCustomParameters())||(K.customParameters=JSON.stringify(h.getCustomParameters()));for(const[qe,Ue]of Object.entries(R||{}))K[qe]=Ue}if(h instanceof ji){const qe=h.getScopes().filter(Ue=>""!==Ue);qe.length>0&&(K.scopes=qe.join(","))}_.tenantId&&(K.tid=_.tenantId);const ye=K;for(const qe of Object.keys(ye))void 0===ye[qe]&&delete ye[qe];return`${function({config:_}){return _.emulator?rn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,V.xO)(ye).slice(1)}`}const mg="webStorageSupport",Qa=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hs,this._completeRedirectFn=pd}_openPopup(h,g,w,A){var R=this;return(0,v.Z)(function*(){var K;Hn(null===(K=R.eventManagers[h._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const ye=Id(h,g,w,Gn(),A);return function(_,h,g,w=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),K=Math.max((window.screen.availWidth-w)/2,0).toString();let ye="";const qe=Object.assign(Object.assign({},Qy),{width:w.toString(),height:A.toString(),top:R,left:K}),Ue=(0,V.z$)().toLowerCase();g&&(ye=so(Ue)?"_blank":g),dn(Ue)&&(h=h||"http://localhost",qe.scrollbars="yes");const dt=Object.entries(qe).reduce((bn,[Kr,To])=>`${bn}${Kr}=${To},`,"");if(function(_=(0,V.z$)()){var h;return Os(_)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Ue)&&"_self"!==ye)return function(_,h){const g=document.createElement("a");g.href=_,g.target=h;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(h||"",ye),new Kc(null);const Jt=window.open(h||"",ye,dt);Oe(Jt,_,"popup-blocked");try{Jt.focus()}catch(bn){}return new Kc(Jt)}(h,ye,Pu())})()}_openRedirect(h,g,w,A){var R=this;return(0,v.Z)(function*(){return yield R._originValidation(h),_=Id(h,g,w,Gn(),A),Kn().location.href=_,new Promise(()=>{});var _})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:A,promise:R}=this.eventManagers[g];return A?Promise.resolve(A):(Hn(R,"If manager is not set, promise should be"),R)}const w=this.initAndGetManager(h);return this.eventManagers[g]={promise:w},w}initAndGetManager(h){var g=this;return(0,v.Z)(function*(){const w=yield function(_){return Ya.apply(this,arguments)}(h),A=new ug(h);return w.register("authEvent",R=>(Oe(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:A},g.iframes[h._key()]=w,A})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(mg,{type:mg},A=>{var R;const K=null===(R=null==A?void 0:A[0])||void 0===R?void 0:R[mg];void 0!==K&&g(!!K),nn(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(_){return ha.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return gs()||Ho()||Os()}};class Ja extends class{constructor(h){this.factorId=h}_process(h,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,w);case"signin":return this._finalizeSignIn(h,g.credential);default:return _n("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Ja(h)}_finalizeEnroll(h,g,w){return function(_,h){return sn(_,"POST","/v2/accounts/mfaEnrollment:finalize",cn(_,h))}(h,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function(_,h){return sn(_,"POST","/v2/accounts/mfaSignIn:finalize",cn(_,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let V0=(()=>{class _{constructor(){}static assertion(g){return Ja._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var _,yg="@firebase/auth";class e_{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,v.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(w=>{var A;h((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}_="Browser",(0,P._registerComponent)(new Fe.wA("auth",(h,{options:g})=>{const w=h.getProvider("app").getImmediate(),{apiKey:A,authDomain:R}=w.options;return(K=>{Oe(A&&!A.includes(":"),"invalid-api-key",{appName:K.name}),Oe(!(null==R?void 0:R.includes(":")),"argument-error",{appName:K.name});const ye={apiKey:A,authDomain:R,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vc(_)},qe=new ms(K,ye);return function(_,h){const g=(null==h?void 0:h.persistence)||[],w=(Array.isArray(g)?g:[g]).map(Xe);(null==h?void 0:h.errorMap)&&_._updateErrorMap(h.errorMap),_._initializeWithPersistence(w,null==h?void 0:h.popupRedirectResolver)}(qe,g),qe})(w)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,w)=>{h.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new Fe.wA("auth-internal",h=>{const g=wn(h.getProvider("auth").getImmediate());return new e_(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(yg,"0.19.3",void 0),(0,P.registerVersion)(yg,"0.19.3","esm2017")},4213:(et,ve,k)=>{"use strict";k.d(ve,{BH:()=>Ve,LL:()=>me,ZR:()=>Fe,zI:()=>fe,US:()=>ge,tV:()=>he,$s:()=>sn,r3:()=>tn,Sg:()=>Se,ne:()=>Hn,vZ:()=>Qt,ZB:()=>j,pd:()=>Oe,m9:()=>Ps,z$:()=>We,jU:()=>Y,ru:()=>ue,d:()=>we,xb:()=>gn,w1:()=>Ke,hl:()=>at,uI:()=>Be,UG:()=>de,b$:()=>Ce,G6:()=>Je,Mn:()=>Ne,xO:()=>yi,zd:()=>Fi,eu:()=>re});const se=function($){const U=[];let G=0;for(let Ie=0;Ie<$.length;Ie++){let ne=$.charCodeAt(Ie);ne<128?U[G++]=ne:ne<2048?(U[G++]=ne>>6|192,U[G++]=63&ne|128):55296==(64512&ne)&&Ie+1<$.length&&56320==(64512&$.charCodeAt(Ie+1))?(ne=65536+((1023&ne)<<10)+(1023&$.charCodeAt(++Ie)),U[G++]=ne>>18|240,U[G++]=ne>>12&63|128,U[G++]=ne>>6&63|128,U[G++]=63&ne|128):(U[G++]=ne>>12|224,U[G++]=ne>>6&63|128,U[G++]=63&ne|128)}return U},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,U){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let ne=0;ne<$.length;ne+=3){const tt=$[ne],it=ne+1<$.length,on=it?$[ne+1]:0,zn=ne+2<$.length,Fn=zn?$[ne+2]:0;let z=(15&on)<<2|Fn>>6,W=63&Fn;zn||(W=64,it||(z=64)),Ie.push(G[tt>>2],G[(3&tt)<<4|on>>4],G[z],G[W])}return Ie.join("")},encodeString($,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa($):this.encodeByteArray(se($),U)},decodeString($,U){return this.HAS_NATIVE_SUPPORT&&!U?atob($):function($){const U=[];let G=0,Ie=0;for(;G<$.length;){const ne=$[G++];if(ne<128)U[Ie++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const tt=$[G++];U[Ie++]=String.fromCharCode((31&ne)<<6|63&tt)}else if(ne>239&&ne<365){const zn=((7&ne)<<18|(63&$[G++])<<12|(63&$[G++])<<6|63&$[G++])-65536;U[Ie++]=String.fromCharCode(55296+(zn>>10)),U[Ie++]=String.fromCharCode(56320+(1023&zn))}else{const tt=$[G++],it=$[G++];U[Ie++]=String.fromCharCode((15&ne)<<12|(63&tt)<<6|63&it)}}return U.join("")}(this.decodeStringToByteArray($,U))},decodeStringToByteArray($,U){this.init_();const G=U?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let ne=0;ne<$.length;){const tt=G[$.charAt(ne++)],on=ne<$.length?G[$.charAt(ne)]:0;++ne;const Fn=ne<$.length?G[$.charAt(ne)]:64;++ne;const ee=ne<$.length?G[$.charAt(ne)]:64;if(++ne,null==tt||null==on||null==Fn||null==ee)throw Error();Ie.push(tt<<2|on>>4),64!==Fn&&(Ie.push(on<<4&240|Fn>>2),64!==ee&&Ie.push(Fn<<6&192|ee))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},ie=function($){return function($){const U=se($);return ge.encodeByteArray(U,!0)}($).replace(/\./g,"")},he=function($){try{return ge.decodeString($,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function j($,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return U}for(const G in U)!U.hasOwnProperty(G)||!X(G)||($[G]=j($[G],U[G]));return $}function X($){return"__proto__"!==$}class Ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,G)=>{this.resolve=U,this.reject=G})}wrapCallback(U){return(G,Ie)=>{G?this.reject(G):this.resolve(Ie),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(G):U(G,Ie))}}}function Se($,U){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=U||"demo-project",ne=$.iat||0,tt=$.sub||$.user_id;if(!tt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const it=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:ne,exp:ne+3600,auth_time:ne,sub:tt,user_id:tt,firebase:{sign_in_provider:"custom",identities:{}}},$);return[ie(JSON.stringify({alg:"none",type:"JWT"})),ie(JSON.stringify(it)),""].join(".")}function We(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function de(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch($){return!1}}function Y(){return"object"==typeof self&&self.self===self}function ue(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Ce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function we(){return We().indexOf("Electron/")>=0}function Ke(){const $=We();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Ne(){return We().indexOf("MSAppHost/")>=0}function Je(){return!de()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function at(){return"object"==typeof indexedDB}function re(){return new Promise(($,U)=>{try{let G=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(Ie);ne.onsuccess=()=>{ne.result.close(),G||self.indexedDB.deleteDatabase(Ie),$(!0)},ne.onupgradeneeded=()=>{G=!1},ne.onerror=()=>{var tt;U((null===(tt=ne.error)||void 0===tt?void 0:tt.message)||"")}}catch(G){U(G)}})}function fe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Fe extends Error{constructor(U,G,Ie){super(G),this.code=U,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,Fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,me.prototype.create)}}class me{constructor(U,G,Ie){this.service=U,this.serviceName=G,this.errors=Ie}create(U,...G){const Ie=G[0]||{},ne=`${this.service}/${U}`,tt=this.errors[U],it=tt?function($,U){return $.replace(un,(G,Ie)=>{const ne=U[Ie];return null!=ne?String(ne):`<${Ie}?>`})}(tt,Ie):"Error";return new Fe(ne,`${this.serviceName}: ${it} (${ne}).`,Ie)}}const un=/\{\$([^}]+)}/g;function tn($,U){return Object.prototype.hasOwnProperty.call($,U)}function gn($){for(const U in $)if(Object.prototype.hasOwnProperty.call($,U))return!1;return!0}function Qt($,U){if($===U)return!0;const G=Object.keys($),Ie=Object.keys(U);for(const ne of G){if(!Ie.includes(ne))return!1;const tt=$[ne],it=U[ne];if(fs(tt)&&fs(it)){if(!Qt(tt,it))return!1}else if(tt!==it)return!1}for(const ne of Ie)if(!G.includes(ne))return!1;return!0}function fs($){return null!==$&&"object"==typeof $}function yi($){const U=[];for(const[G,Ie]of Object.entries($))Array.isArray(Ie)?Ie.forEach(ne=>{U.push(encodeURIComponent(G)+"="+encodeURIComponent(ne))}):U.push(encodeURIComponent(G)+"="+encodeURIComponent(Ie));return U.length?"&"+U.join("&"):""}function Fi($){const U={};return $.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[ne,tt]=Ie.split("=");U[decodeURIComponent(ne)]=decodeURIComponent(tt)}}),U}function Oe($){const U=$.indexOf("?");if(!U)return"";const G=$.indexOf("#",U);return $.substring(U,G>0?G:void 0)}function Hn($,U){const G=new _i($,U);return G.subscribe.bind(G)}class _i{constructor(U,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{U(this)}).catch(Ie=>{this.error(Ie)})}next(U){this.forEachObserver(G=>{G.next(U)})}error(U){this.forEachObserver(G=>{G.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,G,Ie){let ne;if(void 0===U&&void 0===G&&void 0===Ie)throw new Error("Missing Observer.");ne=function($,U){if("object"!=typeof $||null===$)return!1;for(const G of["next","error","complete"])if(G in $&&"function"==typeof $[G])return!0;return!1}(U)?U:{next:U,error:G,complete:Ie},void 0===ne.next&&(ne.next=hr),void 0===ne.error&&(ne.error=hr),void 0===ne.complete&&(ne.complete=hr);const tt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch(it){}}),this.observers.push(ne),tt}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,U)}sendOne(U,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{G(this.observers[U])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hr(){}function sn($,U=1e3,G=2){const Ie=U*Math.pow(G,$),ne=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+ne)}function Ps($){return $&&$._delegate?$._delegate:$}},7713:(et,ve,k)=>{"use strict";k.d(ve,{Mq:()=>v.getApp,C6:()=>v.getApps});var v=k(1572);(0,v.registerVersion)("firebase","9.5.0","app")},7892:(et,ve,k)=>{"use strict";k.d(ve,{Z:()=>v.Z});var v=k(6293);v.Z.registerVersion("firebase","9.5.0","app-compat")},2115:(et,ve,k)=>{"use strict";k.r(ve);var v=k(8239),V=k(6293),P=k(1347),se=k(4213),oe=(k(1572),k(3855),k(1177));function ie(){return window}function j(){return(j=(0,v.Z)(function*(ee,z,W){var Te;const{BuildInfo:ze}=ie();(0,P.ap)(z.sessionId,"AuthEvent did not contain a session ID");const gt=yield Y(z.sessionId),Lt={};return(0,P.aq)()?Lt.ibi=ze.packageName:(0,P.ar)()?Lt.apn=ze.packageName:(0,P.as)(ee,"operation-not-supported-in-this-environment"),ze.displayName&&(Lt.appDisplayName=ze.displayName),Lt.sessionId=gt,(0,P.at)(ee,W,z.type,void 0,null!==(Te=z.eventId)&&void 0!==Te?Te:void 0,Lt)})).apply(this,arguments)}function Ve(){return(Ve=(0,v.Z)(function*(ee){const{BuildInfo:z}=ie(),W={};(0,P.aq)()?W.iosBundleId=z.packageName:(0,P.ar)()?W.androidPackageName=z.packageName:(0,P.as)(ee,"operation-not-supported-in-this-environment"),yield(0,P.au)(ee,W)})).apply(this,arguments)}function Be(){return(Be=(0,v.Z)(function*(ee,z,W){const{cordova:Te}=ie();let ze=()=>{};try{yield new Promise((gt,Lt)=>{let xt=null;function Vt(){var mt;gt();const Sn=null===(mt=Te.plugins.browsertab)||void 0===mt?void 0:mt.close;"function"==typeof Sn&&Sn(),"function"==typeof(null==W?void 0:W.close)&&W.close()}function Vn(){xt||(xt=window.setTimeout(()=>{Lt((0,P.av)(ee,"redirect-cancelled-by-user"))},2e3))}function Nn(){"visible"===(null==document?void 0:document.visibilityState)&&Vn()}z.addPassiveListener(Vt),document.addEventListener("resume",Vn,!1),(0,P.ar)()&&document.addEventListener("visibilitychange",Nn,!1),ze=()=>{z.removePassiveListener(Vt),document.removeEventListener("resume",Vn,!1),document.removeEventListener("visibilitychange",Nn,!1),xt&&window.clearTimeout(xt)}})}finally{ze()}})).apply(this,arguments)}function Y(ee){return ue.apply(this,arguments)}function ue(){return(ue=(0,v.Z)(function*(ee){const z=Ce(ee),W=yield crypto.subtle.digest("SHA-256",z);return Array.from(new Uint8Array(W)).map(ze=>ze.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ce(ee){if((0,P.ap)(/[0-9a-zA-Z]+/.test(ee),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ee);const z=new ArrayBuffer(ee.length),W=new Uint8Array(z);for(let Te=0;Te<ee.length;Te++)W[Te]=ee.charCodeAt(Te);return W}class Ke extends P.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(z=>{this.resolveInialized=z})}addPassiveListener(z){this.passiveListeners.add(z)}removePassiveListener(z){this.passiveListeners.delete(z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(z){return this.resolveInialized(),this.passiveListeners.forEach(W=>W(z)),super.onEvent(z)}initialized(){var z=this;return(0,v.Z)(function*(){yield z.initPromise})()}}function Je(ee){return at.apply(this,arguments)}function at(){return(at=(0,v.Z)(function*(ee){const z=yield _e()._get(De(ee));return z&&(yield _e()._remove(De(ee))),z})).apply(this,arguments)}function fe(){const ee=[],z="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let W=0;W<20;W++){const Te=Math.floor(Math.random()*z.length);ee.push(z.charAt(Te))}return ee.join("")}function _e(){return(0,P.ax)(P.b)}function De(ee){return(0,P.ay)("authEvent",ee.config.apiKey,ee.name)}function _t(ee){if(!(null==ee?void 0:ee.includes("?")))return{};const[z,...W]=ee.split("?");return(0,se.zd)(W.join("?"))}function Et(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.av)("no-auth-event")}}function tn(){var ee;return(null===(ee=null==self?void 0:self.location)||void 0===ee?void 0:ee.protocol)||null}function gn(ee=(0,se.z$)()){return!("file:"!==tn()&&"ionic:"!==tn()||!ee.toLowerCase().match(/iphone|ipad|ipod|android/))}function Fi(){try{const ee=self.localStorage,z=P.aG();if(ee)return ee.setItem(z,"1"),ee.removeItem(z),!function(ee=(0,se.z$)()){return(0,se.w1)()&&11===(null==document?void 0:document.documentMode)||function(ee=(0,se.z$)()){return/Edge\/\d+/.test(ee)}(ee)}()||(0,se.hl)()}catch(ee){return Oe()&&(0,se.hl)()}return!1}function Oe(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function _n(){return("http:"===tn()||"https:"===tn()||(0,se.ru)()||gn())&&!((0,se.b$)()||(0,se.UG)())&&Fi()&&!Oe()}function Hn(){return gn()&&"undefined"!=typeof document}function Xe(){return(Xe=(0,v.Z)(function*(){return!!Hn()&&new Promise(ee=>{const z=setTimeout(()=>{ee(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(z),ee(!0)})})})).apply(this,arguments)}const Ht={LOCAL:"local",NONE:"none",SESSION:"session"},hr=P.aw,Gn="persistence";function ut(ee){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,v.Z)(function*(ee){yield ee._initializationPromise;const z=Wn(),W=P.ay(Gn,ee.config.apiKey,ee.name);(null==z?void 0:z.sessionStorage)&&z.sessionStorage.setItem(W,ee._getPersistence())})).apply(this,arguments)}function Wn(){return"undefined"!=typeof window?window:null}const rn=P.aw;class $e{constructor(){this.browserResolver=P.ax(P.k),this.cordovaResolver=P.ax(class{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aA}_initialize(z){var W=this;return(0,v.Z)(function*(){const Te=z._key();let ze=W.eventManagers.get(Te);return ze||(ze=new Ke(z),W.eventManagers.set(Te,ze),W.attachCallbackListeners(z,ze)),ze})()}_openPopup(z){(0,P.as)(z,"operation-not-supported-in-this-environment")}_openRedirect(z,W,Te,ze){var gt=this;return(0,v.Z)(function*(){!function(ee){var z,W,Te,ze,gt,Lt,xt,Vt,Vn,Nn;const mt=ie();(0,P.aw)("function"==typeof(null===(z=null==mt?void 0:mt.universalLinks)||void 0===z?void 0:z.subscribe),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.aw)(void 0!==(null===(W=null==mt?void 0:mt.BuildInfo)||void 0===W?void 0:W.packageName),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.aw)("function"==typeof(null===(gt=null===(ze=null===(Te=null==mt?void 0:mt.cordova)||void 0===Te?void 0:Te.plugins)||void 0===ze?void 0:ze.browsertab)||void 0===gt?void 0:gt.openUrl),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aw)("function"==typeof(null===(Vt=null===(xt=null===(Lt=null==mt?void 0:mt.cordova)||void 0===Lt?void 0:Lt.plugins)||void 0===xt?void 0:xt.browsertab)||void 0===Vt?void 0:Vt.isAvailable),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aw)("function"==typeof(null===(Nn=null===(Vn=null==mt?void 0:mt.cordova)||void 0===Vn?void 0:Vn.InAppBrowser)||void 0===Nn?void 0:Nn.open),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(z);const Lt=yield gt._initialize(z);yield Lt.initialized(),Lt.resetRedirect(),(0,P.aB)(),yield gt._originValidation(z);const xt=function(ee,z,W=null){return{type:z,eventId:W,urlResponse:null,sessionId:fe(),postBody:null,tenantId:ee.tenantId,error:(0,P.av)(ee,"no-auth-event")}}(z,Te,ze);yield function(ee,z){return _e()._set(De(ee),z)}(z,xt);const Vt=yield function(ee,z,W){return j.apply(this,arguments)}(z,xt,W),Vn=yield function(ee){const{cordova:z}=ie();return new Promise(W=>{z.plugins.browsertab.isAvailable(Te=>{let ze=null;Te?z.plugins.browsertab.openUrl(ee):ze=z.InAppBrowser.open(ee,(0,P.ao)()?"_blank":"_system","location=yes"),W(ze)})})}(Vt);return function(ee,z,W){return Be.apply(this,arguments)}(z,Lt,Vn)})()}_isIframeWebStorageSupported(z,W){throw new Error("Method not implemented.")}_originValidation(z){const W=z._key();return this.originValidationPromises[W]||(this.originValidationPromises[W]=function(ee){return Ve.apply(this,arguments)}(z)),this.originValidationPromises[W]}attachCallbackListeners(z,W){const{universalLinks:Te,handleOpenURL:ze,BuildInfo:gt}=ie(),Lt=setTimeout((0,v.Z)(function*(){yield Je(z),W.onEvent(Et())}),500),xt=function(){var Nn=(0,v.Z)(function*(mt){clearTimeout(Lt);const Sn=yield Je(z);let He=null;Sn&&(null==mt?void 0:mt.url)&&(He=function(ee,z){var W,Te;const ze=function(ee){const z=_t(ee),W=z.link?decodeURIComponent(z.link):void 0,Te=_t(W).link,ze=z.deep_link_id?decodeURIComponent(z.deep_link_id):void 0;return _t(ze).link||ze||Te||W||ee}(z);if(ze.includes("/__/auth/callback")){const gt=_t(ze),Lt=gt.firebaseError?function(ee){try{return JSON.parse(ee)}catch(z){return null}}(decodeURIComponent(gt.firebaseError)):null,xt=null===(Te=null===(W=null==Lt?void 0:Lt.code)||void 0===W?void 0:W.split("auth/"))||void 0===Te?void 0:Te[1],Vt=xt?(0,P.av)(xt):null;return Vt?{type:ee.type,eventId:ee.eventId,tenantId:ee.tenantId,error:Vt,urlResponse:null,sessionId:null,postBody:null}:{type:ee.type,eventId:ee.eventId,tenantId:ee.tenantId,sessionId:ee.sessionId,urlResponse:ze,postBody:null}}return null}(Sn,mt.url)),W.onEvent(He||Et())});return function(Sn){return Nn.apply(this,arguments)}}();void 0!==Te&&"function"==typeof Te.subscribe&&Te.subscribe(null,xt);const Vt=ze,Vn=`${gt.packageName.toLowerCase()}://`;ie().handleOpenURL=function(){var Nn=(0,v.Z)(function*(mt){if(mt.toLowerCase().startsWith(Vn)&&xt({url:mt}),"function"==typeof Vt)try{Vt(mt)}catch(Sn){console.error(Sn)}});return function(mt){return Nn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aA}_initialize(z){var W=this;return(0,v.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._initialize(z)})()}_openPopup(z,W,Te,ze){var gt=this;return(0,v.Z)(function*(){return yield gt.selectUnderlyingResolver(),gt.assertedUnderlyingResolver._openPopup(z,W,Te,ze)})()}_openRedirect(z,W,Te,ze){var gt=this;return(0,v.Z)(function*(){return yield gt.selectUnderlyingResolver(),gt.assertedUnderlyingResolver._openRedirect(z,W,Te,ze)})()}_isIframeWebStorageSupported(z,W){this.assertedUnderlyingResolver._isIframeWebStorageSupported(z,W)}_originValidation(z){return this.assertedUnderlyingResolver._originValidation(z)}get _shouldInitProactively(){return Hn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return rn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var z=this;return(0,v.Z)(function*(){if(z.underlyingResolver)return;const W=yield function(){return Xe.apply(this,arguments)}();z.underlyingResolver=W?z.cordovaResolver:z.browserResolver})()}}function ot(ee){return ee.unwrap()}function cn(ee){return Kt(ee)}function Kt(ee){const{_tokenResponse:z}=ee instanceof se.ZR?ee.customData:ee;if(!z)return null;if(!(ee instanceof se.ZR)&&"temporaryProof"in z&&"phoneNumber"in z)return P.P.credentialFromResult(ee);const W=z.providerId;if(!W||W===P.o.PASSWORD)return null;let Te;switch(W){case P.o.GOOGLE:Te=P.N;break;case P.o.FACEBOOK:Te=P.M;break;case P.o.GITHUB:Te=P.Q;break;case P.o.TWITTER:Te=P.V;break;default:const{oauthIdToken:ze,oauthAccessToken:gt,oauthTokenSecret:Lt,pendingToken:xt,nonce:Vt}=z;return gt||Lt||ze||xt?xt?W.startsWith("saml.")?P.aJ._create(W,xt):P.I._fromParams({providerId:W,signInMethod:W,pendingToken:xt,idToken:ze,accessToken:gt}):new P.T(W).credential({idToken:ze,accessToken:gt,rawNonce:Vt}):null}return ee instanceof se.ZR?Te.credentialFromError(ee):Te.credentialFromResult(ee)}function ln(ee,z){return z.catch(W=>{throw W instanceof se.ZR&&function(ee,z){var W;const Te=null===(W=z.customData)||void 0===W?void 0:W._tokenResponse;if("auth/multi-factor-auth-required"===z.code)z.resolver=new U(ee,P.am(ee,z));else if(Te){const ze=Kt(z),gt=z;ze&&(gt.credential=ze,gt.tenantId=Te.tenantId||void 0,gt.email=Te.email||void 0,gt.phoneNumber=Te.phoneNumber||void 0)}}(ee,W),W}).then(W=>{const ze=W.user;return{operationType:W.operationType,credential:cn(W),additionalUserInfo:P.ak(W),user:G.getOrCreate(ze)}})}function Ps(ee,z){return $.apply(this,arguments)}function $(){return($=(0,v.Z)(function*(ee,z){const W=yield z;return{verificationId:W.verificationId,confirm:Te=>ln(ee,W.confirm(Te))}})).apply(this,arguments)}class U{constructor(z,W){this.resolver=W,this.auth=z.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(z){return ln(ot(this.auth),this.resolver.resolveSignIn(z))}}class G{constructor(z){this._delegate=z,this.multiFactor=P.an(z)}static getOrCreate(z){return G.USER_MAP.has(z)||G.USER_MAP.set(z,new G(z)),G.USER_MAP.get(z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(z){return this._delegate.getIdTokenResult(z)}getIdToken(z){return this._delegate.getIdToken(z)}linkAndRetrieveDataWithCredential(z){return this.linkWithCredential(z)}linkWithCredential(z){var W=this;return(0,v.Z)(function*(){return ln(W.auth,P.Y(W._delegate,z))})()}linkWithPhoneNumber(z,W){var Te=this;return(0,v.Z)(function*(){return Ps(Te.auth,P.l(Te._delegate,z,W))})()}linkWithPopup(z){var W=this;return(0,v.Z)(function*(){return ln(W.auth,P.d(W._delegate,z,$e))})()}linkWithRedirect(z){var W=this;return(0,v.Z)(function*(){return yield ut(P.aC(W.auth)),P.g(W._delegate,z,$e)})()}reauthenticateAndRetrieveDataWithCredential(z){return this.reauthenticateWithCredential(z)}reauthenticateWithCredential(z){var W=this;return(0,v.Z)(function*(){return ln(W.auth,P.Z(W._delegate,z))})()}reauthenticateWithPhoneNumber(z,W){return Ps(this.auth,P.r(this._delegate,z,W))}reauthenticateWithPopup(z){return ln(this.auth,P.e(this._delegate,z,$e))}reauthenticateWithRedirect(z){var W=this;return(0,v.Z)(function*(){return yield ut(P.aC(W.auth)),P.h(W._delegate,z,$e)})()}sendEmailVerification(z){return P.aa(this._delegate,z)}unlink(z){var W=this;return(0,v.Z)(function*(){return yield P.aj(W._delegate,z),W})()}updateEmail(z){return P.af(this._delegate,z)}updatePassword(z){return P.ag(this._delegate,z)}updatePhoneNumber(z){return P.u(this._delegate,z)}updateProfile(z){return P.ae(this._delegate,z)}verifyBeforeUpdateEmail(z,W){return P.ab(this._delegate,z,W)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}G.USER_MAP=new WeakMap;const Ie=P.aw;let ne=(()=>{class ee{constructor(W,Te){if(this.app=W,Te.isInitialized())return this._delegate=Te.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ze}=W.options;Ie(ze,"invalid-api-key",{appName:W.name});let gt=[P.K];if("undefined"!=typeof window){gt=function(ee,z){const W=Wn();if(!(null==W?void 0:W.sessionStorage))return[];const Te=P.ay(Gn,ee,z);switch(W.sessionStorage.getItem(Te)){case Ht.NONE:return[P.K];case Ht.LOCAL:return[P.i,P.a];case Ht.SESSION:return[P.a];default:return[]}}(ze,W.name);for(const xt of[P.i,P.b,P.a])gt.includes(xt)||gt.push(xt)}Ie(ze,"invalid-api-key",{appName:W.name});const Lt="undefined"!=typeof window?$e:void 0;this._delegate=Te.initialize({options:{persistence:gt,popupRedirectResolver:Lt}}),this._delegate._updateErrorMap(P.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?G.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(W){this._delegate.languageCode=W}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(W){this._delegate.tenantId=W}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(W,Te){P.E(this._delegate,W,Te)}applyActionCode(W){return P.a1(this._delegate,W)}checkActionCode(W){return P.a2(this._delegate,W)}confirmPasswordReset(W,Te){return P.a0(this._delegate,W,Te)}createUserWithEmailAndPassword(W,Te){var ze=this;return(0,v.Z)(function*(){return ln(ze._delegate,P.a4(ze._delegate,W,Te))})()}fetchProvidersForEmail(W){return this.fetchSignInMethodsForEmail(W)}fetchSignInMethodsForEmail(W){return P.a9(this._delegate,W)}isSignInWithEmailLink(W){return P.a7(this._delegate,W)}getRedirectResult(){var W=this;return(0,v.Z)(function*(){Ie(_n(),W._delegate,"operation-not-supported-in-this-environment");const Te=yield P.j(W._delegate,$e);return Te?ln(W._delegate,Promise.resolve(Te)):{credential:null,user:null}})()}addFrameworkForLogging(W){!function(ee,z){(0,P.aC)(ee)._logFramework(z)}(this._delegate,W)}onAuthStateChanged(W,Te,ze){const{next:gt,error:Lt,complete:xt}=tt(W,Te,ze);return this._delegate.onAuthStateChanged(gt,Lt,xt)}onIdTokenChanged(W,Te,ze){const{next:gt,error:Lt,complete:xt}=tt(W,Te,ze);return this._delegate.onIdTokenChanged(gt,Lt,xt)}sendSignInLinkToEmail(W,Te){return P.a6(this._delegate,W,Te)}sendPasswordResetEmail(W,Te){return P.$(this._delegate,W,Te||void 0)}setPersistence(W){var Te=this;return(0,v.Z)(function*(){let ze;switch(function(ee,z){hr(Object.values(Ht).includes(z),ee,"invalid-persistence-type"),(0,se.b$)()?hr(z!==Ht.SESSION,ee,"unsupported-persistence-type"):(0,se.UG)()?hr(z===Ht.NONE,ee,"unsupported-persistence-type"):Oe()?hr(z===Ht.NONE||z===Ht.LOCAL&&(0,se.hl)(),ee,"unsupported-persistence-type"):hr(z===Ht.NONE||Fi(),ee,"unsupported-persistence-type")}(Te._delegate,W),W){case Ht.SESSION:ze=P.a;break;case Ht.LOCAL:ze=(yield P.ax(P.i)._isAvailable())?P.i:P.b;break;case Ht.NONE:ze=P.K;break;default:return P.as("argument-error",{appName:Te._delegate.name})}return Te._delegate.setPersistence(ze)})()}signInAndRetrieveDataWithCredential(W){return this.signInWithCredential(W)}signInAnonymously(){return ln(this._delegate,P.W(this._delegate))}signInWithCredential(W){return ln(this._delegate,P.X(this._delegate,W))}signInWithCustomToken(W){return ln(this._delegate,P._(this._delegate,W))}signInWithEmailAndPassword(W,Te){return ln(this._delegate,P.a5(this._delegate,W,Te))}signInWithEmailLink(W,Te){return ln(this._delegate,P.a8(this._delegate,W,Te))}signInWithPhoneNumber(W,Te){return Ps(this._delegate,P.s(this._delegate,W,Te))}signInWithPopup(W){var Te=this;return(0,v.Z)(function*(){return Ie(_n(),Te._delegate,"operation-not-supported-in-this-environment"),ln(Te._delegate,P.c(Te._delegate,W,$e))})()}signInWithRedirect(W){var Te=this;return(0,v.Z)(function*(){return Ie(_n(),Te._delegate,"operation-not-supported-in-this-environment"),yield ut(Te._delegate),P.f(Te._delegate,W,$e)})()}updateCurrentUser(W){return this._delegate.updateCurrentUser(W)}verifyPasswordResetCode(W){return P.a3(this._delegate,W)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ee.Persistence=Ht,ee})();function tt(ee,z,W){let Te=ee;"function"!=typeof ee&&({next:Te,error:z,complete:W}=ee);const ze=Te;return{next:Lt=>ze(Lt&&G.getOrCreate(Lt)),error:z,complete:W}}class it{constructor(){this.providerId="phone",this._delegate=new P.P(ot(V.Z.auth()))}static credential(z,W){return P.P.credential(z,W)}verifyPhoneNumber(z,W){return this._delegate.verifyPhoneNumber(z,W)}unwrap(){return this._delegate}}it.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,it.PROVIDER_ID=P.P.PROVIDER_ID;const on=P.aw;var ee;(ee=V.Z).INTERNAL.registerComponent(new oe.wA("auth-compat",z=>{const W=z.getProvider("app-compat").getImmediate(),Te=z.getProvider("auth");return new ne(W,Te)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.L,FacebookAuthProvider:P.M,GithubAuthProvider:P.Q,GoogleAuthProvider:P.N,OAuthProvider:P.T,SAMLAuthProvider:P.U,PhoneAuthProvider:it,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:class{constructor(z,W,Te=V.Z.app()){var ze;on(null===(ze=Te.options)||void 0===ze?void 0:ze.apiKey,"invalid-api-key",{appName:Te.name}),this._delegate=new P.R(z,W,Te.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:P.V,Auth:ne,AuthCredential:P.G,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ee.registerVersion("@firebase/auth-compat","0.2.3")},4995:function(et,ve){!function(k){"use strict";function v(de){return Array.prototype.slice.call(de)}function V(de){return new Promise(function(Y,ue){de.onsuccess=function(){Y(de.result)},de.onerror=function(){ue(de.error)}})}function P(de,Y,ue){var Ce,we=new Promise(function(Ke,Ne){V(Ce=de[Y].apply(de,ue)).then(Ke,Ne)});return we.request=Ce,we}function se(de,Y,ue){var Ce=P(de,Y,ue);return Ce.then(function(we){if(we)return new H(we,Ce.request)})}function ae(de,Y,ue){ue.forEach(function(Ce){Object.defineProperty(de.prototype,Ce,{get:function(){return this[Y][Ce]},set:function(we){this[Y][Ce]=we}})})}function ge(de,Y,ue,Ce){Ce.forEach(function(we){we in ue.prototype&&(de.prototype[we]=function(){return P(this[Y],we,arguments)})})}function oe(de,Y,ue,Ce){Ce.forEach(function(we){we in ue.prototype&&(de.prototype[we]=function(){return this[Y][we].apply(this[Y],arguments)})})}function ie(de,Y,ue,Ce){Ce.forEach(function(we){we in ue.prototype&&(de.prototype[we]=function(){return se(this[Y],we,arguments)})})}function he(de){this._index=de}function H(de,Y){this._cursor=de,this._request=Y}function j(de){this._store=de}function X(de){this._tx=de,this.complete=new Promise(function(Y,ue){de.oncomplete=function(){Y()},de.onerror=function(){ue(de.error)},de.onabort=function(){ue(de.error)}})}function Ve(de,Y,ue){this._db=de,this.oldVersion=Y,this.transaction=new X(ue)}function Se(de){this._db=de}ae(he,"_index",["name","keyPath","multiEntry","unique"]),ge(he,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ie(he,"_index",IDBIndex,["openCursor","openKeyCursor"]),ae(H,"_cursor",["direction","key","primaryKey","value"]),ge(H,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(de){de in IDBCursor.prototype&&(H.prototype[de]=function(){var Y=this,ue=arguments;return Promise.resolve().then(function(){return Y._cursor[de].apply(Y._cursor,ue),V(Y._request).then(function(Ce){if(Ce)return new H(Ce,Y._request)})})})}),j.prototype.createIndex=function(){return new he(this._store.createIndex.apply(this._store,arguments))},j.prototype.index=function(){return new he(this._store.index.apply(this._store,arguments))},ae(j,"_store",["name","keyPath","indexNames","autoIncrement"]),ge(j,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ie(j,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),oe(j,"_store",IDBObjectStore,["deleteIndex"]),X.prototype.objectStore=function(){return new j(this._tx.objectStore.apply(this._tx,arguments))},ae(X,"_tx",["objectStoreNames","mode"]),oe(X,"_tx",IDBTransaction,["abort"]),Ve.prototype.createObjectStore=function(){return new j(this._db.createObjectStore.apply(this._db,arguments))},ae(Ve,"_db",["name","version","objectStoreNames"]),oe(Ve,"_db",IDBDatabase,["deleteObjectStore","close"]),Se.prototype.transaction=function(){return new X(this._db.transaction.apply(this._db,arguments))},ae(Se,"_db",["name","version","objectStoreNames"]),oe(Se,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(de){[j,he].forEach(function(Y){de in Y.prototype&&(Y.prototype[de.replace("open","iterate")]=function(){var ue=v(arguments),Ce=ue[ue.length-1],we=this._store||this._index,Ke=we[de].apply(we,ue.slice(0,-1));Ke.onsuccess=function(){Ce(Ke.result)}})})}),[he,j].forEach(function(de){de.prototype.getAll||(de.prototype.getAll=function(Y,ue){var Ce=this,we=[];return new Promise(function(Ke){Ce.iterateCursor(Y,function(Ne){Ne?(we.push(Ne.value),void 0===ue||we.length!=ue?Ne.continue():Ke(we)):Ke(we)})})})}),k.openDb=function(de,Y,ue){var Ce=P(indexedDB,"open",[de,Y]),we=Ce.request;return we&&(we.onupgradeneeded=function(Ke){ue&&ue(new Ve(we.result,Ke.oldVersion,we.transaction))}),Ce.then(function(Ke){return new Se(Ke)})},k.deleteDb=function(de){return P(indexedDB,"deleteDatabase",[de])},Object.defineProperty(k,"__esModule",{value:!0})}(ve)},8305:(et,ve,k)=>{"use strict";k.d(ve,{y:()=>H});var v=k(3113),V=k(7908),P=k(4816),se=k(4623);var oe=k(5367),ie=k(5044),he=k(8706);let H=(()=>{class Se{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const de=new Se;return de.source=this,de.operator=Be,de}subscribe(Be,de,Y){const ue=function(Se){return Se&&Se instanceof v.Lv||function(Se){return Se&&(0,ie.m)(Se.next)&&(0,ie.m)(Se.error)&&(0,ie.m)(Se.complete)}(Se)&&(0,V.Nn)(Se)}(Be)?Be:new v.Hp(Be,de,Y);return(0,he.x)(()=>{const{operator:Ce,source:we}=this;ue.add(Ce?Ce.call(ue,we):we?this._subscribe(ue):this._trySubscribe(ue))}),ue}_trySubscribe(Be){try{return this._subscribe(Be)}catch(de){Be.error(de)}}forEach(Be,de){return new(de=j(de))((Y,ue)=>{let Ce;Ce=this.subscribe(we=>{try{Be(we)}catch(Ke){ue(Ke),null==Ce||Ce.unsubscribe()}},ue,Y)})}_subscribe(Be){var de;return null===(de=this.source)||void 0===de?void 0:de.subscribe(Be)}[P.L](){return this}pipe(...Be){return function(Se){return 0===Se.length?se.y:1===Se.length?Se[0]:function(Be){return Se.reduce((de,Y)=>Y(de),Be)}}(Be)(this)}toPromise(Be){return new(Be=j(Be))((de,Y)=>{let ue;this.subscribe(Ce=>ue=Ce,Ce=>Y(Ce),()=>de(ue))})}}return Se.create=We=>new Se(We),Se})();function j(Se){var We;return null!==(We=null!=Se?Se:oe.v.Promise)&&void 0!==We?We:Promise}},273:(et,ve,k)=>{"use strict";k.d(ve,{x:()=>oe});var v=k(8305),V=k(7908);const se=(0,k(4893).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=k(3980),ge=k(8706);let oe=(()=>{class he extends v.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const X=new ie(this,this);return X.operator=j,X}_throwIfClosed(){if(this.closed)throw new se}next(j){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const X=this.observers.slice();for(const Ve of X)Ve.next(j)}})}error(j){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:X}=this;for(;X.length;)X.shift().error(j)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:X,isStopped:Ve,observers:Se}=this;return X||Ve?V.Lc:(Se.push(j),new V.w0(()=>(0,ae.P)(Se,j)))}_checkFinalizedStatuses(j){const{hasError:X,thrownError:Ve,isStopped:Se}=this;X?j.error(Ve):Se&&j.complete()}asObservable(){const j=new v.y;return j.source=this,j}}return he.create=(H,j)=>new ie(H,j),he})();class ie extends oe{constructor(H,j){super(),this.destination=H,this.source=j}next(H){var j,X;null===(X=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===X||X.call(j,H)}error(H){var j,X;null===(X=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===X||X.call(j,H)}complete(){var H,j;null===(j=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===j||j.call(H)}_subscribe(H){var j,X;return null!==(X=null===(j=this.source)||void 0===j?void 0:j.subscribe(H))&&void 0!==X?X:V.Lc}}},3113:(et,ve,k)=>{"use strict";k.d(ve,{Hp:()=>Ve,Lv:()=>X});var v=k(5044),V=k(7908),P=k(5367),se=k(5160);function ae(){}const ge=he("C",void 0,void 0);function he(Y,ue,Ce){return{kind:Y,value:ue,error:Ce}}var H=k(2496),j=k(8706);class X extends V.w0{constructor(ue){super(),this.isStopped=!1,ue?(this.destination=ue,(0,V.Nn)(ue)&&ue.add(this)):this.destination=de}static create(ue,Ce,we){return new Ve(ue,Ce,we)}next(ue){this.isStopped?Be(he("N",ue,void 0),this):this._next(ue)}error(ue){this.isStopped?Be(he("E",void 0,ue),this):(this.isStopped=!0,this._error(ue))}complete(){this.isStopped?Be(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ue){this.destination.next(ue)}_error(ue){try{this.destination.error(ue)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Ve extends X{constructor(ue,Ce,we){let Ke;if(super(),(0,v.m)(ue))Ke=ue;else if(ue){let Ne;({next:Ke,error:Ce,complete:we}=ue),this&&P.v.useDeprecatedNextContext?(Ne=Object.create(ue),Ne.unsubscribe=()=>this.unsubscribe()):Ne=ue,Ke=null==Ke?void 0:Ke.bind(Ne),Ce=null==Ce?void 0:Ce.bind(Ne),we=null==we?void 0:we.bind(Ne)}this.destination={next:Ke?Se(Ke):ae,error:Se(null!=Ce?Ce:We),complete:we?Se(we):ae}}}function Se(Y,ue){return(...Ce)=>{try{Y(...Ce)}catch(we){P.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(we):(0,se.h)(we)}}}function We(Y){throw Y}function Be(Y,ue){const{onStoppedNotification:Ce}=P.v;Ce&&H.z.setTimeout(()=>Ce(Y,ue))}const de={closed:!0,next:ae,error:We,complete:ae}},7908:(et,ve,k)=>{"use strict";k.d(ve,{Lc:()=>ge,w0:()=>ae,Nn:()=>oe});var v=k(5044);const P=(0,k(4893).d)(he=>function(j){he(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((X,Ve)=>`${Ve+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var se=k(3980);class ae{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Se of j)Se.remove(this);else j.remove(this);const{initialTeardown:X}=this;if((0,v.m)(X))try{X()}catch(Se){H=Se instanceof P?Se.errors:[Se]}const{_teardowns:Ve}=this;if(Ve){this._teardowns=null;for(const Se of Ve)try{ie(Se)}catch(We){H=null!=H?H:[],We instanceof P?H=[...H,...We.errors]:H.push(We)}}if(H)throw new P(H)}}add(H){var j;if(H&&H!==this)if(this.closed)ie(H);else{if(H instanceof ae){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._teardowns=null!==(j=this._teardowns)&&void 0!==j?j:[]).push(H)}}_hasParent(H){const{_parentage:j}=this;return j===H||Array.isArray(j)&&j.includes(H)}_addParent(H){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(H),j):j?[j,H]:H}_removeParent(H){const{_parentage:j}=this;j===H?this._parentage=null:Array.isArray(j)&&(0,se.P)(j,H)}remove(H){const{_teardowns:j}=this;j&&(0,se.P)(j,H),H instanceof ae&&H._removeParent(this)}}ae.EMPTY=(()=>{const he=new ae;return he.closed=!0,he})();const ge=ae.EMPTY;function oe(he){return he instanceof ae||he&&"closed"in he&&(0,v.m)(he.remove)&&(0,v.m)(he.add)&&(0,v.m)(he.unsubscribe)}function ie(he){(0,v.m)(he)?he():he.unsubscribe()}},5367:(et,ve,k)=>{"use strict";k.d(ve,{v:()=>v});const v={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5583:(et,ve,k)=>{"use strict";k.d(ve,{E:()=>V});const V=new(k(8305).y)(ae=>ae.complete())},5947:(et,ve,k)=>{"use strict";k.d(ve,{D:()=>Ke});var v=k(9985),V=k(4763),P=k(5222),ge=k(8305),ie=k(5497),he=k(5044),H=k(8395);function X(Ne,Ze){if(!Ne)throw new Error("Iterable cannot be null");return new ge.y(Je=>{(0,H.f)(Je,Ze,()=>{const at=Ne[Symbol.asyncIterator]();(0,H.f)(Je,Ze,()=>{at.next().then(re=>{re.done?Je.complete():Je.next(re.value)})},0,!0)})})}var Ve=k(1073),Se=k(2442),We=k(1537),Be=k(2317),de=k(9908),Y=k(3754),ue=k(7751);function Ke(Ne,Ze){return Ze?function(Ne,Ze){if(null!=Ne){if((0,Ve.c)(Ne))return function(Ne,Ze){return(0,v.Xf)(Ne).pipe((0,P.R)(Ze),(0,V.Q)(Ze))}(Ne,Ze);if((0,We.z)(Ne))return function(Ne,Ze){return new ge.y(Je=>{let at=0;return Ze.schedule(function(){at===Ne.length?Je.complete():(Je.next(Ne[at++]),Je.closed||this.schedule())})})}(Ne,Ze);if((0,Se.t)(Ne))return function(Ne,Ze){return(0,v.Xf)(Ne).pipe((0,P.R)(Ze),(0,V.Q)(Ze))}(Ne,Ze);if((0,de.D)(Ne))return X(Ne,Ze);if((0,Be.T)(Ne))return function(Ne,Ze){return new ge.y(Je=>{let at;return(0,H.f)(Je,Ze,()=>{at=Ne[ie.h](),(0,H.f)(Je,Ze,()=>{let re,fe;try{({value:re,done:fe}=at.next())}catch(_e){return void Je.error(_e)}fe?Je.complete():Je.next(re)},0,!0)}),()=>(0,he.m)(null==at?void 0:at.return)&&at.return()})}(Ne,Ze);if((0,ue.L)(Ne))return function(Ne,Ze){return X((0,ue.Q)(Ne),Ze)}(Ne,Ze)}throw(0,Y.z)(Ne)}(Ne,Ze):(0,v.Xf)(Ne)}},9985:(et,ve,k)=>{"use strict";k.d(ve,{Xf:()=>Ve});var v=k(9162),V=k(1537),P=k(2442),se=k(8305),ae=k(1073),ge=k(9908),oe=k(3754),ie=k(2317),he=k(7751),H=k(5044),j=k(5160),X=k(4816);function Ve(we){if(we instanceof se.y)return we;if(null!=we){if((0,ae.c)(we))return function(we){return new se.y(Ke=>{const Ne=we[X.L]();if((0,H.m)(Ne.subscribe))return Ne.subscribe(Ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(we);if((0,V.z)(we))return function(we){return new se.y(Ke=>{for(let Ne=0;Ne<we.length&&!Ke.closed;Ne++)Ke.next(we[Ne]);Ke.complete()})}(we);if((0,P.t)(we))return function(we){return new se.y(Ke=>{we.then(Ne=>{Ke.closed||(Ke.next(Ne),Ke.complete())},Ne=>Ke.error(Ne)).then(null,j.h)})}(we);if((0,ge.D)(we))return Y(we);if((0,ie.T)(we))return function(we){return new se.y(Ke=>{for(const Ne of we)if(Ke.next(Ne),Ke.closed)return;Ke.complete()})}(we);if((0,he.L)(we))return function(we){return Y((0,he.Q)(we))}(we)}throw(0,oe.z)(we)}function Y(we){return new se.y(Ke=>{(function(we,Ke){var Ne,Ze,Je,at;return(0,v.mG)(this,void 0,void 0,function*(){try{for(Ne=(0,v.KL)(we);!(Ze=yield Ne.next()).done;)if(Ke.next(Ze.value),Ke.closed)return}catch(re){Je={error:re}}finally{try{Ze&&!Ze.done&&(at=Ne.return)&&(yield at.call(Ne))}finally{if(Je)throw Je.error}}Ke.complete()})})(we,Ke).catch(Ne=>Ke.error(Ne))})}},3719:(et,ve,k)=>{"use strict";k.d(ve,{T:()=>ge});var v=k(5373),V=k(9985),P=k(5583),se=k(8830),ae=k(5947);function ge(...oe){const ie=(0,se.yG)(oe),he=(0,se._6)(oe,1/0),H=oe;return H.length?1===H.length?(0,V.Xf)(H[0]):(0,v.J)(he)((0,ae.D)(H,ie)):P.E}},8889:(et,ve,k)=>{"use strict";k.d(ve,{Q:()=>V});var v=k(3113);class V extends v.Lv{constructor(se,ae,ge,oe,ie){super(se),this.onFinalize=ie,this._next=ae?function(he){try{ae(he)}catch(H){se.error(H)}}:super._next,this._error=oe?function(he){try{oe(he)}catch(H){se.error(H)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(he){se.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;const{closed:ae}=this;super.unsubscribe(),!ae&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}},4753:(et,ve,k)=>{"use strict";k.d(ve,{U:()=>P});var v=k(9947),V=k(8889);function P(se,ae){return(0,v.e)((ge,oe)=>{let ie=0;ge.subscribe(new V.Q(oe,he=>{oe.next(se.call(ae,he,ie++))}))})}},5373:(et,ve,k)=>{"use strict";k.d(ve,{J:()=>P});var v=k(5724),V=k(4623);function P(se=1/0){return(0,v.z)(V.y,se)}},5724:(et,ve,k)=>{"use strict";k.d(ve,{z:()=>ie});var v=k(4753),V=k(9985),P=k(9947),ae=(k(8395),k(8889)),oe=k(5044);function ie(he,H,j=1/0){return(0,oe.m)(H)?ie((X,Ve)=>(0,v.U)((Se,We)=>H(X,Se,Ve,We))((0,V.Xf)(he(X,Ve))),j):("number"==typeof H&&(j=H),(0,P.e)((X,Ve)=>function(he,H,j,X,Ve,Se,We,Be){const de=[];let Y=0,ue=0,Ce=!1;const we=()=>{Ce&&!de.length&&!Y&&H.complete()},Ke=Ze=>Y<X?Ne(Ze):de.push(Ze),Ne=Ze=>{Y++;let Je=!1;(0,V.Xf)(j(Ze,ue++)).subscribe(new ae.Q(H,at=>{H.next(at)},()=>{Je=!0},void 0,()=>{if(Je)try{for(Y--;de.length&&Y<X;){const at=de.shift();Ne(at)}we()}catch(at){H.error(at)}}))};return he.subscribe(new ae.Q(H,Ke,()=>{Ce=!0,we()})),()=>{}}(X,Ve,he,j)))}},4763:(et,ve,k)=>{"use strict";k.d(ve,{Q:()=>se});var v=k(8395),V=k(9947),P=k(8889);function se(ae,ge=0){return(0,V.e)((oe,ie)=>{oe.subscribe(new P.Q(ie,he=>(0,v.f)(ie,ae,()=>ie.next(he),ge),()=>(0,v.f)(ie,ae,()=>ie.complete(),ge),he=>(0,v.f)(ie,ae,()=>ie.error(he),ge)))})}},3174:(et,ve,k)=>{"use strict";k.d(ve,{B:()=>ge});var v=k(5947),V=k(9468),P=k(273),se=k(3113),ae=k(9947);function ge(ie={}){const{connector:he=(()=>new P.x),resetOnError:H=!0,resetOnComplete:j=!0,resetOnRefCountZero:X=!0}=ie;return Ve=>{let Se=null,We=null,Be=null,de=0,Y=!1,ue=!1;const Ce=()=>{null==We||We.unsubscribe(),We=null},we=()=>{Ce(),Se=Be=null,Y=ue=!1},Ke=()=>{const Ne=Se;we(),null==Ne||Ne.unsubscribe()};return(0,ae.e)((Ne,Ze)=>{de++,!ue&&!Y&&Ce();const Je=Be=null!=Be?Be:he();Ze.add(()=>{de--,0===de&&!ue&&!Y&&(We=oe(Ke,X))}),Je.subscribe(Ze),Se||(Se=new se.Hp({next:at=>Je.next(at),error:at=>{ue=!0,Ce(),We=oe(we,H,at),Je.error(at)},complete:()=>{Y=!0,Ce(),We=oe(we,j),Je.complete()}}),(0,v.D)(Ne).subscribe(Se))})(Ve)}}function oe(ie,he,...H){return!0===he?(ie(),null):!1===he?null:he(...H).pipe((0,V.q)(1)).subscribe(()=>ie())}},5222:(et,ve,k)=>{"use strict";k.d(ve,{R:()=>V});var v=k(9947);function V(P,se=0){return(0,v.e)((ae,ge)=>{ge.add(P.schedule(()=>ae.subscribe(ge),se))})}},9468:(et,ve,k)=>{"use strict";k.d(ve,{q:()=>se});var v=k(5583),V=k(9947),P=k(8889);function se(ae){return ae<=0?()=>v.E:(0,V.e)((ge,oe)=>{let ie=0;ge.subscribe(new P.Q(oe,he=>{++ie<=ae&&(oe.next(he),ae<=ie&&oe.complete())}))})}},7384:(et,ve,k)=>{"use strict";k.d(ve,{b:()=>ae});var v=k(5044),V=k(9947),P=k(8889),se=k(4623);function ae(ge,oe,ie){const he=(0,v.m)(ge)||oe||ie?{next:ge,error:oe,complete:ie}:ge;return he?(0,V.e)((H,j)=>{var X;null===(X=he.subscribe)||void 0===X||X.call(he);let Ve=!0;H.subscribe(new P.Q(j,Se=>{var We;null===(We=he.next)||void 0===We||We.call(he,Se),j.next(Se)},()=>{var Se;Ve=!1,null===(Se=he.complete)||void 0===Se||Se.call(he),j.complete()},Se=>{var We;Ve=!1,null===(We=he.error)||void 0===We||We.call(he,Se),j.error(Se)},()=>{var Se,We;Ve&&(null===(Se=he.unsubscribe)||void 0===Se||Se.call(he)),null===(We=he.finalize)||void 0===We||We.call(he)}))}):se.y}},2869:(et,ve,k)=>{"use strict";k.d(ve,{o:()=>ae});var v=k(7908);class V extends v.w0{constructor(oe,ie){super()}schedule(oe,ie=0){return this}}const P={setInterval(...ge){const{delegate:oe}=P;return((null==oe?void 0:oe.setInterval)||setInterval)(...ge)},clearInterval(ge){const{delegate:oe}=P;return((null==oe?void 0:oe.clearInterval)||clearInterval)(ge)},delegate:void 0};var se=k(3980);class ae extends V{constructor(oe,ie){super(oe,ie),this.scheduler=oe,this.work=ie,this.pending=!1}schedule(oe,ie=0){if(this.closed)return this;this.state=oe;const he=this.id,H=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(H,he,ie)),this.pending=!0,this.delay=ie,this.id=this.id||this.requestAsyncId(H,this.id,ie),this}requestAsyncId(oe,ie,he=0){return P.setInterval(oe.flush.bind(oe,this),he)}recycleAsyncId(oe,ie,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return ie;P.clearInterval(ie)}execute(oe,ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(oe,ie);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,ie){let H,he=!1;try{this.work(oe)}catch(j){he=!0,H=j||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:oe,scheduler:ie}=this,{actions:he}=ie;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(he,this),null!=oe&&(this.id=this.recycleAsyncId(ie,oe,null)),this.delay=null,super.unsubscribe()}}}},8843:(et,ve,k)=>{"use strict";k.d(ve,{v:()=>P});var v=k(1733);class V{constructor(ae,ge=V.now){this.schedulerActionCtor=ae,this.now=ge}schedule(ae,ge=0,oe){return new this.schedulerActionCtor(this,ae).schedule(oe,ge)}}V.now=v.l.now;class P extends V{constructor(ae,ge=V.now){super(ae,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ae){const{actions:ge}=this;if(this._active)return void ge.push(ae);let oe;this._active=!0;do{if(oe=ae.execute(ae.state,ae.delay))break}while(ae=ge.shift());if(this._active=!1,oe){for(;ae=ge.shift();)ae.unsubscribe();throw oe}}}},2210:(et,ve,k)=>{"use strict";k.d(ve,{z:()=>P});var v=k(2869);const P=new(k(8843).v)(v.o)},1733:(et,ve,k)=>{"use strict";k.d(ve,{l:()=>v});const v={now:()=>(v.delegate||Date).now(),delegate:void 0}},2496:(et,ve,k)=>{"use strict";k.d(ve,{z:()=>v});const v={setTimeout(...V){const{delegate:P}=v;return((null==P?void 0:P.setTimeout)||setTimeout)(...V)},clearTimeout(V){const{delegate:P}=v;return((null==P?void 0:P.clearTimeout)||clearTimeout)(V)},delegate:void 0}},5497:(et,ve,k)=>{"use strict";k.d(ve,{h:()=>V});const V="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},4816:(et,ve,k)=>{"use strict";k.d(ve,{L:()=>v});const v="function"==typeof Symbol&&Symbol.observable||"@@observable"},8830:(et,ve,k)=>{"use strict";k.d(ve,{_6:()=>ge,jO:()=>se,yG:()=>ae});var v=k(5044);function P(oe){return oe[oe.length-1]}function se(oe){return(0,v.m)(P(oe))?oe.pop():void 0}function ae(oe){return function(oe){return oe&&(0,v.m)(oe.schedule)}(P(oe))?oe.pop():void 0}function ge(oe,ie){return"number"==typeof P(oe)?oe.pop():ie}},3980:(et,ve,k)=>{"use strict";function v(V,P){if(V){const se=V.indexOf(P);0<=se&&V.splice(se,1)}}k.d(ve,{P:()=>v})},4893:(et,ve,k)=>{"use strict";function v(V){const se=V(ae=>{Error.call(ae),ae.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}k.d(ve,{d:()=>v})},8706:(et,ve,k)=>{"use strict";k.d(ve,{x:()=>P,O:()=>se});var v=k(5367);let V=null;function P(ae){if(v.v.useDeprecatedSynchronousErrorHandling){const ge=!V;if(ge&&(V={errorThrown:!1,error:null}),ae(),ge){const{errorThrown:oe,error:ie}=V;if(V=null,oe)throw ie}}else ae()}function se(ae){v.v.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=ae)}},8395:(et,ve,k)=>{"use strict";function v(V,P,se,ae=0,ge=!1){const oe=P.schedule(function(){se(),ge?V.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(V.add(oe),!ge)return oe}k.d(ve,{f:()=>v})},4623:(et,ve,k)=>{"use strict";function v(V){return V}k.d(ve,{y:()=>v})},1537:(et,ve,k)=>{"use strict";k.d(ve,{z:()=>v});const v=V=>V&&"number"==typeof V.length&&"function"!=typeof V},9908:(et,ve,k)=>{"use strict";k.d(ve,{D:()=>V});var v=k(5044);function V(P){return Symbol.asyncIterator&&(0,v.m)(null==P?void 0:P[Symbol.asyncIterator])}},5044:(et,ve,k)=>{"use strict";function v(V){return"function"==typeof V}k.d(ve,{m:()=>v})},1073:(et,ve,k)=>{"use strict";k.d(ve,{c:()=>P});var v=k(4816),V=k(5044);function P(se){return(0,V.m)(se[v.L])}},2317:(et,ve,k)=>{"use strict";k.d(ve,{T:()=>P});var v=k(5497),V=k(5044);function P(se){return(0,V.m)(null==se?void 0:se[v.h])}},2442:(et,ve,k)=>{"use strict";k.d(ve,{t:()=>V});var v=k(5044);function V(P){return(0,v.m)(null==P?void 0:P.then)}},7751:(et,ve,k)=>{"use strict";k.d(ve,{Q:()=>P,L:()=>se});var v=k(9162),V=k(5044);function P(ae){return(0,v.FC)(this,arguments,function*(){const oe=ae.getReader();try{for(;;){const{value:ie,done:he}=yield(0,v.qq)(oe.read());if(he)return yield(0,v.qq)(void 0);yield yield(0,v.qq)(ie)}}finally{oe.releaseLock()}})}function se(ae){return(0,V.m)(null==ae?void 0:ae.getReader)}},9947:(et,ve,k)=>{"use strict";k.d(ve,{A:()=>V,e:()=>P});var v=k(5044);function V(se){return(0,v.m)(null==se?void 0:se.lift)}function P(se){return ae=>{if(V(ae))return ae.lift(function(ge){try{return se(ge,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5160:(et,ve,k)=>{"use strict";k.d(ve,{h:()=>P});var v=k(5367),V=k(2496);function P(se){V.z.setTimeout(()=>{const{onUnhandledError:ae}=v.v;if(!ae)throw se;ae(se)})}},3754:(et,ve,k)=>{"use strict";function v(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(ve,{z:()=>v})},7155:(et,ve,k)=>{"use strict";var v=k(3668);let V=null;function P(){return V}const oe=new v.OlP("DocumentToken");let ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(){return(0,v.LFG)(j)},providedIn:"platform"}),n})();const H=new v.OlP("Location Initialized");let j=(()=>{class n extends ie{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const s=P().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",t,!1),()=>s.removeEventListener("popstate",t)}onHashChange(t){const s=P().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",t,!1),()=>s.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,s,u){X()?this._history.pushState(t,s,u):this.location.hash=u}replaceState(t,s,u){X()?this._history.replaceState(t,s,u):this.location.hash=u}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(oe))},n.\u0275prov=v.Yz7({token:n,factory:function(){return new j((0,v.LFG)(oe))},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function We(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(){return function(n){const e=(0,v.LFG)(oe).location;return new Ce((0,v.LFG)(ie),e&&e.origin||"")}()},providedIn:"root"}),n})();const ue=new v.OlP("appBaseHref");let Ce=(()=>{class n extends de{constructor(t,s){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const s=this._platformLocation.pathname+Be(this._platformLocation.search),u=this._platformLocation.hash;return u&&t?`${s}${u}`:s}pushState(t,s,u,l){const f=this.prepareExternalUrl(u+Be(l));this._platformLocation.pushState(t,s,f)}replaceState(t,s,u,l){const f=this.prepareExternalUrl(u+Be(l));this._platformLocation.replaceState(t,s,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var s,u;null==(u=(s=this._platformLocation).historyGo)||u.call(s,t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ie),v.LFG(ue,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),we=(()=>{class n extends de{constructor(t,s){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(t){const s=Se(this._baseHref,t);return s.length>0?"#"+s:s}pushState(t,s,u,l){let f=this.prepareExternalUrl(u+Be(l));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.pushState(t,s,f)}replaceState(t,s,u,l){let f=this.prepareExternalUrl(u+Be(l));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.replaceState(t,s,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var s,u;null==(u=(s=this._platformLocation).historyGo)||u.call(s,t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(ie),v.LFG(ue,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),Ke=(()=>{class n{constructor(t,s){this._subject=new v.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const u=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=We(Je(u)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,s=""){return this.path()==this.normalize(t+Be(s))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,s="",u=null){this._platformStrategy.pushState(u,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(s)),u)}replaceState(t,s="",u=null){this._platformStrategy.replaceState(u,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(s)),u)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var s,u;null==(u=(s=this._platformStrategy).historyGo)||u.call(s,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(t="",s){this._urlChangeListeners.forEach(u=>u(t,s))}subscribe(t,s,u){return this._subject.subscribe({next:t,error:s,complete:u})}}return n.normalizeQueryParams=Be,n.joinWithSlash=Se,n.stripTrailingSlash=We,n.\u0275fac=function(t){return new(t||n)(v.LFG(de),v.LFG(ie))},n.\u0275prov=v.Yz7({token:n,factory:function(){return new Ke((0,v.LFG)(de),(0,v.LFG)(ie))},providedIn:"root"}),n})();function Je(n){return n.replace(/\/index.html$/,"")}var fe=(()=>((fe=fe||{})[fe.Zero=0]="Zero",fe[fe.One=1]="One",fe[fe.Two=2]="Two",fe[fe.Few=3]="Few",fe[fe.Many=4]="Many",fe[fe.Other=5]="Other",fe))();const Oe=v.kL8;class wi{}let dn=(()=>{class n extends wi{constructor(t){super(),this.locale=t}getPluralCategory(t,s){switch(Oe(s||this.locale)(t)){case fe.Zero:return"zero";case fe.One:return"one";case fe.Two:return"two";case fe.Few:return"few";case fe.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(v.soG))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),Hh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[{provide:wi,useClass:dn}]}),n})();function ri(n){return"server"===n}let bc=(()=>{class n{}return n.\u0275prov=(0,v.Yz7)({token:n,providedIn:"root",factory:()=>new ys((0,v.LFG)(oe),window)}),n})();class ys{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const s=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let u=s.currentNode;for(;u;){const l=u.shadowRoot;if(l){const f=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(f)return f}u=s.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),s=t.left+this.window.pageXOffset,u=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(s-l[0],u-l[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Wh(this.window.history)||Wh(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Wh(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ii extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new ii,V||(V=n)}onAndCancel(e,t,s){return e.addEventListener(t,s,!1),()=>{e.removeEventListener(t,s,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(ji=ji||document.querySelector("base"),ji?ji.getAttribute("href"):null);return null==t?null:function(n){kr=kr||document.createElement("a"),kr.setAttribute("href",n);const e=kr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ji=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const s=t.indexOf("="),[u,l]=-1==s?[t,""]:[t.slice(0,s),t.slice(s+1)];if(u.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let kr,ji=null;const zo=new v.OlP("TRANSITION_ID"),Gt=[{provide:v.ip1,useFactory:function(n,e,t){return()=>{t.get(v.CZH).donePromise.then(()=>{const s=P(),u=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<u.length;l++)s.remove(u[l])})}},deps:[zo,oe,v.zs3],multi:!0}];class _u{static init(){(0,v.VLi)(new _u)}addToWindow(e){v.dqk.getAngularTestability=(s,u=!0)=>{const l=e.findTestabilityInTree(s,u);if(null==l)throw new Error("Could not find testability for element.");return l},v.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),v.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(s=>{const u=v.dqk.getAllAngularTestabilities();let l=u.length,f=!1;const y=function(I){f=f||I,l--,0==l&&s(f)};u.forEach(function(I){I.whenStable(y)})})}findTestabilityInTree(e,t,s){if(null==t)return null;const u=e.getTestability(t);return null!=u?u:s?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Vs=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const Xi=new v.OlP("EventManagerPlugins");let In=(()=>{class n{constructor(t,s){this._zone=s,this._eventNameToPlugin=new Map,t.forEach(u=>u.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,s,u){return this._findPluginFor(s).addEventListener(t,s,u)}addGlobalEventListener(t,s,u){return this._findPluginFor(s).addGlobalEventListener(t,s,u)}getZone(){return this._zone}_findPluginFor(t){const s=this._eventNameToPlugin.get(t);if(s)return s;const u=this._plugins;for(let l=0;l<u.length;l++){const f=u[l];if(f.supports(t))return this._eventNameToPlugin.set(t,f),f}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Xi),v.LFG(v.R0b))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class co{constructor(e){this._doc=e}addGlobalEventListener(e,t,s){const u=P().getGlobalEventTarget(this._doc,e);if(!u)throw new Error(`Unsupported event target ${u} for event ${t}`);return this.addEventListener(u,t,s)}}let Us=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const s=new Set;t.forEach(u=>{this._stylesSet.has(u)||(this._stylesSet.add(u),s.add(u))}),this.onStylesAdded(s)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),pr=(()=>{class n extends Us{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,s,u){t.forEach(l=>{const f=this._doc.createElement("style");f.textContent=l,u.push(s.appendChild(f))})}addHost(t){const s=[];this._addStylesToHost(this._stylesSet,t,s),this._hostNodes.set(t,s)}removeHost(t){const s=this._hostNodes.get(t);s&&s.forEach(Ko),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((s,u)=>{this._addStylesToHost(t,u,s)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ko))}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(oe))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function Ko(n){P().remove(n)}const _s={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},wu=/%COMP%/g;function Es(n,e,t){for(let s=0;s<e.length;s++){let u=e[s];Array.isArray(u)?Es(n,u,t):(u=u.replace(wu,n),t.push(u))}return t}function si(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Yo=(()=>{class n{constructor(t,s,u){this.eventManager=t,this.sharedStylesHost=s,this.appId=u,this.rendererByCompId=new Map,this.defaultRenderer=new Bs(t)}createRenderer(t,s){if(!t||!s)return this.defaultRenderer;switch(s.encapsulation){case v.ifc.Emulated:{let u=this.rendererByCompId.get(s.id);return u||(u=new Iu(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,u)),u.applyToHost(t),u}case 1:case v.ifc.ShadowDom:return new Qo(this.eventManager,this.sharedStylesHost,t,s);default:if(!this.rendererByCompId.has(s.id)){const u=Es(s.id,s.styles,[]);this.sharedStylesHost.addStyles(u),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(In),v.LFG(pr),v.LFG(v.AFp))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class Bs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(_s[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,s){e&&e.insertBefore(t,s)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let s="string"==typeof e?document.querySelector(e):e;if(!s)throw new Error(`The selector "${e}" did not match any elements`);return t||(s.textContent=""),s}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,s,u){if(u){t=u+":"+t;const l=_s[u];l?e.setAttributeNS(l,t,s):e.setAttribute(t,s)}else e.setAttribute(t,s)}removeAttribute(e,t,s){if(s){const u=_s[s];u?e.removeAttributeNS(u,t):e.removeAttribute(`${s}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,s,u){u&(v.JOm.DashCase|v.JOm.Important)?e.style.setProperty(t,s,u&v.JOm.Important?"important":""):e.style[t]=s}removeStyle(e,t,s){s&v.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,s){e[t]=s}setValue(e,t){e.nodeValue=t}listen(e,t,s){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,si(s)):this.eventManager.addEventListener(e,t,si(s))}}class Iu extends Bs{constructor(e,t,s,u){super(e),this.component=s;const l=Es(u+"-"+s.id,s.styles,[]);t.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(wu,u+"-"+s.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(wu,n)}(u+"-"+s.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const s=super.createElement(e,t);return super.setAttribute(s,this.contentAttr,""),s}}class Qo extends Bs{constructor(e,t,s,u){super(e),this.sharedStylesHost=t,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Es(u.id,u.styles,[]);for(let f=0;f<l.length;f++){const y=document.createElement("style");y.textContent=l[f],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,s){return super.insertBefore(this.nodeOrShadowRoot(e),t,s)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let xc=(()=>{class n extends co{constructor(t){super(t)}supports(t){return!0}addEventListener(t,s,u){return t.addEventListener(s,u,!1),()=>this.removeEventListener(t,s,u)}removeEventListener(t,s,u){return t.removeEventListener(s,u)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(oe))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const $a=["alt","control","meta","shift"],$s={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Kh={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let td=(()=>{class n extends co{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,s,u){const l=n.parseEventName(s),f=n.eventCallback(l.fullKey,u,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,l.domEventName,f))}static parseEventName(t){const s=t.toLowerCase().split("."),u=s.shift();if(0===s.length||"keydown"!==u&&"keyup"!==u)return null;const l=n._normalizeKey(s.pop());let f="";if($a.forEach(I=>{const S=s.indexOf(I);S>-1&&(s.splice(S,1),f+=I+".")}),f+=l,0!=s.length||0===l.length)return null;const y={};return y.domEventName=u,y.fullKey=f,y}static getEventFullKey(t){let s="",u=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&mn.hasOwnProperty(e)&&(e=mn[e]))}return $s[e]||e}(t);return u=u.toLowerCase()," "===u?u="space":"."===u&&(u="dot"),$a.forEach(l=>{l!=u&&Kh[l](t)&&(s+=l+".")}),s+=u,s}static eventCallback(t,s,u){return l=>{n.getEventFullKey(l)===t&&u.runGuarded(()=>s(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(oe))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const Xo=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:"browser"},{provide:v.g9A,useValue:function(){ii.makeCurrent(),_u.init()},multi:!0},{provide:oe,useFactory:function(){return(0,v.RDi)(document),document},deps:[]}]),nd=[[],{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function(){return new v.qLn},deps:[]},{provide:Xi,useClass:xc,multi:!0,deps:[oe,v.R0b,v.Lbi]},{provide:Xi,useClass:td,multi:!0,deps:[oe]},[],{provide:Yo,useClass:Yo,deps:[In,pr,v.AFp]},{provide:v.FYo,useExisting:Yo},{provide:Us,useExisting:pr},{provide:pr,useClass:pr,deps:[oe]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b]},{provide:In,useClass:In,deps:[Xi,v.R0b]},{provide:class{},useClass:Vs,deps:[]},[]];let Oc=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:v.AFp,useValue:t.appId},{provide:zo,useExisting:v.AFp},Gt]}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(n,12))},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:nd,imports:[Hh,v.hGG]}),n})();"undefined"!=typeof window&&window;var Un=k(5947),Hi=k(8830);function pt(...n){const e=(0,Hi.yG)(n);return(0,Un.D)(n,e)}var Di=k(273);class mr extends Di.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:s}=this;if(e)throw t;return this._throwIfClosed(),s}next(e){super.next(this._value=e)}}var yr=k(8305);const{isArray:Qh}=Array,{getPrototypeOf:ts,prototype:Fc,keys:od}=Object;var Hs=k(4623),wt=k(4753);const{isArray:yo}=Array;var lr=k(8889),Wa=k(8395);function Lc(...n){const e=(0,Hi.yG)(n),t=(0,Hi.jO)(n),{args:s,keys:u}=function(n){if(1===n.length){const e=n[0];if(Qh(e))return{args:e,keys:null};if(function(n){return n&&"object"==typeof n&&ts(n)===Fc}(e)){const t=od(e);return{args:t.map(s=>e[s]),keys:t}}}return{args:n,keys:null}}(n);if(0===s.length)return(0,Un.D)([],e);const l=new yr.y(function(n,e,t=Hs.y){return s=>{vo(e,()=>{const{length:u}=n,l=new Array(u);let f=u,y=u;for(let I=0;I<u;I++)vo(e,()=>{const S=(0,Un.D)(n[I],e);let M=!1;S.subscribe(new lr.Q(s,F=>{l[I]=F,M||(M=!0,y--),y||s.next(t(l.slice()))},()=>{--f||s.complete()}))},s)},s)}}(s,e,u?f=>function(n,e){return n.reduce((t,s,u)=>(t[s]=e[u],t),{})}(u,f):Hs.y));return t?l.pipe(function(n){return(0,wt.U)(e=>function(n,e){return yo(e)?n(...e):n(e)}(n,e))}(t)):l}function vo(n,e,t){n?(0,Wa.f)(t,n,e):e()}const ns=(0,k(4893).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var rs=k(5373);function bi(...n){return(0,rs.J)(1)((0,Un.D)(n,(0,Hi.yG)(n)))}var za=k(9985);function Mu(n){return new yr.y(e=>{(0,za.Xf)(n()).subscribe(e)})}var na=k(5583),qa=k(7908),oi=k(9947);function xn(){return(0,oi.e)((n,e)=>{let t=null;n._refCount++;const s=new lr.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const u=n._connection,l=t;t=null,u&&(!l||u===l)&&u.unsubscribe(),e.unsubscribe()});n.subscribe(s),s.closed||(t=n.connect())})}class ig extends yr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,oi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new qa.w0;const t=this.getSubject();e.add(this.source.subscribe(new lr.Q(t,void 0,()=>{this._teardown(),t.complete()},s=>{this._teardown(),t.error(s)},()=>this._teardown()))),e.closed&&(this._connection=null,e=qa.w0.EMPTY)}return e}refCount(){return xn()(this)}}function Lr(n,e){return(0,oi.e)((t,s)=>{let u=null,l=0,f=!1;const y=()=>f&&!u&&s.complete();t.subscribe(new lr.Q(s,I=>{null==u||u.unsubscribe();let S=0;const M=l++;(0,za.Xf)(n(I,M)).subscribe(u=new lr.Q(s,F=>s.next(e?e(I,F,M,S++):F),()=>{u=null,y()}))},()=>{f=!0,y()}))})}var Vc=k(9468);function Ou(...n){const e=(0,Hi.yG)(n);return(0,oi.e)((t,s)=>{(e?bi(n,t,e):bi(n,t)).subscribe(s)})}function Xh(n,e,t,s,u){return(l,f)=>{let y=t,I=e,S=0;l.subscribe(new lr.Q(f,M=>{const F=S++;I=y?n(I,M,F):(y=!0,M),s&&f.next(I)},u&&(()=>{y&&f.next(I),f.complete()})))}}function Uc(n,e){return(0,oi.e)(Xh(n,e,arguments.length>=2,!0))}function Is(n,e){return(0,oi.e)((t,s)=>{let u=0;t.subscribe(new lr.Q(s,l=>n.call(e,l,u++)&&s.next(l)))})}function Ci(n){return(0,oi.e)((e,t)=>{let l,s=null,u=!1;s=e.subscribe(new lr.Q(t,void 0,void 0,f=>{l=(0,za.Xf)(n(f,Ci(n)(e))),s?(s.unsubscribe(),s=null,l.subscribe(t)):u=!0})),u&&(s.unsubscribe(),s=null,l.subscribe(t))})}var Vr=k(5724),Zn=k(5044);function Ds(n,e){return(0,Zn.m)(e)?(0,Vr.z)(n,e,1):(0,Vr.z)(n,1)}function ra(n){return n<=0?()=>na.E:(0,oi.e)((e,t)=>{let s=[];e.subscribe(new lr.Q(t,u=>{s.push(u),n<s.length&&s.shift()},()=>{for(const u of s)t.next(u);t.complete()},void 0,()=>{s=null}))})}function ud(n=cd){return(0,oi.e)((e,t)=>{let s=!1;e.subscribe(new lr.Q(t,u=>{s=!0,t.next(u)},()=>s?t.complete():t.error(n())))})}function cd(){return new ns}function ai(n){return(0,oi.e)((e,t)=>{let s=!1;e.subscribe(new lr.Q(t,u=>{s=!0,t.next(u)},()=>{s||t.next(n),t.complete()}))})}function ui(n,e){const t=arguments.length>=2;return s=>s.pipe(n?Is((u,l)=>n(u,l,s)):Hs.y,(0,Vc.q)(1),t?ai(e):ud(()=>new ns))}var Yn=k(7384);class Gi{constructor(e,t){this.id=e,this.url=t}}class Eo extends Gi{constructor(e,t,s="imperative",u=null){super(e,t),this.navigationTrigger=s,this.restoredState=u}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ia extends Gi{constructor(e,t,s){super(e,t),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Bc extends Gi{constructor(e,t,s){super(e,t),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ld extends Gi{constructor(e,t,s){super(e,t),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ef extends Gi{constructor(e,t,s,u){super(e,t),this.urlAfterRedirects=s,this.state=u}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ti extends Gi{constructor(e,t,s,u){super(e,t),this.urlAfterRedirects=s,this.state=u}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jc extends Gi{constructor(e,t,s,u,l){super(e,t),this.urlAfterRedirects=s,this.state=u,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sa extends Gi{constructor(e,t,s,u){super(e,t),this.urlAfterRedirects=s,this.state=u}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sg extends Gi{constructor(e,t,s,u){super(e,t),this.urlAfterRedirects=s,this.state=u}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ws{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ka{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class tf{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $c{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wo{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hc{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ai{constructor(e,t,s){this.routerEvent=e,this.position=t,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Nt="primary";class oa{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function zs(n){return new oa(n)}const aa="ngNavigationCancelingError";function Io(n){const e=Error("NavigationCancelingError: "+n);return e[aa]=!0,e}function D(n,e,t){const s=t.path.split("/");if(s.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||s.length<n.length))return null;const u={};for(let l=0;l<s.length;l++){const f=s[l],y=n[l];if(f.startsWith(":"))u[f.substring(1)]=y;else if(f!==y.path)return null}return{consumed:n.slice(0,s.length),posParams:u}}function x(n,e){const t=n?Object.keys(n):void 0,s=e?Object.keys(e):void 0;if(!t||!s||t.length!=s.length)return!1;let u;for(let l=0;l<t.length;l++)if(u=t[l],!L(n[u],e[u]))return!1;return!0}function L(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),s=[...e].sort();return t.every((u,l)=>s[l]===u)}return n===e}function Q(n){return Array.prototype.concat.apply([],n)}function ce(n){return n.length>0?n[n.length-1]:null}function Ge(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ke(n){return(0,v.CqO)(n)?n:(0,v.QGY)(n)?(0,Un.D)(Promise.resolve(n)):pt(n)}const Dn={exact:function qs(n,e,t){if(!bs(n.segments,e.segments)||!Si(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const s in e.children)if(!n.children[s]||!qs(n.children[s],e.children[s],t))return!1;return!0},subset:qr},Ln={exact:function(n,e){return x(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>L(n[t],e[t]))},ignored:()=>!0};function _r(n,e,t){return Dn[t.paths](n.root,e.root,t.matrixParams)&&Ln[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function qr(n,e,t){return xr(n,e,e.segments,t)}function xr(n,e,t,s){if(n.segments.length>t.length){const u=n.segments.slice(0,t.length);return!(!bs(u,t)||e.hasChildren()||!Si(u,t,s))}if(n.segments.length===t.length){if(!bs(n.segments,t)||!Si(n.segments,t,s))return!1;for(const u in e.children)if(!n.children[u]||!qr(n.children[u],e.children[u],s))return!1;return!0}{const u=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(bs(n.segments,u)&&Si(n.segments,u,s)&&n.children[Nt])&&xr(n.children[Nt],e,l,s)}}function Si(n,e,t){return e.every((s,u)=>Ln[t](n[u].parameters,s.parameters))}class vr{constructor(e,t,s){this.root=e,this.queryParams=t,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zs(this.queryParams)),this._queryParamMap}toString(){return ca.serialize(this)}}class Bt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ge(t,(s,u)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return la(this)}}class ua{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=zs(this.parameters)),this._parameterMap}toString(){return pd(this)}}function bs(n,e){return n.length===e.length&&n.every((t,s)=>t.path===e[s].path)}class og{}class ag{parse(e){const t=new af(e);return new vr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gc(e.root,!0)}`,s=function(n){const e=Object.keys(n).map(t=>{const s=n[t];return Array.isArray(s)?s.map(u=>`${Wc(t)}=${Wc(u)}`).join("&"):`${Wc(t)}=${Wc(s)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${s}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const ca=new ag;function la(n){return n.segments.map(e=>pd(e)).join("/")}function Gc(n,e){if(!n.hasChildren())return la(n);if(e){const t=n.children[Nt]?Gc(n.children[Nt],!1):"",s=[];return Ge(n.children,(u,l)=>{l!==Nt&&s.push(`${l}:${Gc(u,!1)}`)}),s.length>0?`${t}(${s.join("//")})`:t}{const t=function(n,e){let t=[];return Ge(n.children,(s,u)=>{u===Nt&&(t=t.concat(e(s,u)))}),Ge(n.children,(s,u)=>{u!==Nt&&(t=t.concat(e(s,u)))}),t}(n,(s,u)=>u===Nt?[Gc(n.children[Nt],!1)]:[`${u}:${Gc(s,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Nt]?`${la(n)}/${t[0]}`:`${la(n)}/(${t.join("//")})`}}function sf(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wc(n){return sf(n).replace(/%3B/gi,";")}function dd(n){return sf(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hd(n){return decodeURIComponent(n)}function fd(n){return hd(n.replace(/\+/g,"%20"))}function pd(n){return`${dd(n.path)}${function(n){return Object.keys(n).map(e=>`;${dd(e)}=${dd(n[e])}`).join("")}(n.parameters)}`}const da=/^[^\/()?;=#]+/;function md(n){const e=n.match(da);return e?e[0]:""}const ug=/^[^=?&#]+/,zc=/^[^&#]+/;class af{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bt([],{}):new Bt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(s[Nt]=new Bt(e,t)),s}parseSegment(){const e=md(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ua(hd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=md(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const u=md(this.remaining);u&&(s=u,this.capture(s))}e[hd(t)]=hd(s)}parseQueryParam(e){const t=function(n){const e=n.match(ug);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const f=function(n){const e=n.match(zc);return e?e[0]:""}(this.remaining);f&&(s=f,this.capture(s))}const u=fd(t),l=fd(s);if(e.hasOwnProperty(u)){let f=e[u];Array.isArray(f)||(f=[f],e[u]=f),f.push(l)}else e[u]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=md(this.remaining),u=this.remaining[s.length];if("/"!==u&&")"!==u&&";"!==u)throw new Error(`Cannot parse url '${this.url}'`);let l;s.indexOf(":")>-1?(l=s.substr(0,s.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=Nt);const f=this.parseChildren();t[l]=1===Object.keys(f).length?f[Nt]:new Bt([],f),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class qc{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=yd(e,this._root);return t?t.children.map(s=>s.value):[]}firstChild(e){const t=yd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Do(e,this._root);return t.length<2?[]:t[t.length-2].children.map(u=>u.value).filter(u=>u!==e)}pathFromRoot(e){return Do(e,this._root).map(t=>t.value)}}function yd(n,e){if(n===e.value)return e;for(const t of e.children){const s=yd(n,t);if(s)return s}return null}function Do(n,e){if(n===e.value)return[e];for(const t of e.children){const s=Do(n,t);if(s.length)return s.unshift(e),s}return[]}class bo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ha(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class cg extends qc{constructor(e,t){super(e),this.snapshot=t,uf(this,e)}toString(){return this.snapshot.toString()}}function lg(n,e){const t=function(n,e){const f=new _d([],{},{},"",{},Nt,e,null,n.root,-1,{});return new fg("",new bo(f,[]))}(n,e),s=new mr([new ua("",{})]),u=new mr({}),l=new mr({}),f=new mr({}),y=new mr(""),I=new Ri(s,u,f,y,l,Nt,e,t.root);return I.snapshot=t.root,new cg(new bo(I,[]),t)}class Ri{constructor(e,t,s,u,l,f,y,I){this.url=e,this.params=t,this.queryParams=s,this.fragment=u,this.data=l,this.outlet=f,this.component=y,this._futureSnapshot=I}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>zs(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>zs(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ks(n,e="emptyOnly"){const t=n.pathFromRoot;let s=0;if("always"!==e)for(s=t.length-1;s>=1;){const u=t[s],l=t[s-1];if(u.routeConfig&&""===u.routeConfig.path)s--;else{if(l.component)break;s--}}return function(n){return n.reduce((e,t)=>({params:Tt(Tt({},e.params),t.params),data:Tt(Tt({},e.data),t.data),resolve:Tt(Tt({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(s))}class _d{constructor(e,t,s,u,l,f,y,I,S,M,F){this.url=e,this.params=t,this.queryParams=s,this.fragment=u,this.data=l,this.outlet=f,this.component=y,this.routeConfig=I,this._urlSegment=S,this._lastPathIndex=M,this._resolve=F}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fg extends qc{constructor(e,t){super(t),this.url=e,uf(this,t)}toString(){return pg(this._root)}}function uf(n,e){e.value._routerState=n,e.children.forEach(t=>uf(n,t))}function pg(n){const e=n.children.length>0?` { ${n.children.map(pg).join(", ")} } `:"";return`${n.value}${e}`}function cf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,x(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),x(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!x(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),x(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function vd(n,e){const t=x(n.params,e.params)&&function(n,e){return bs(n,e)&&n.every((t,s)=>x(t.parameters,e[s].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||vd(n.parent,e.parent))}function Ya(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const s=t.value;s._futureSnapshot=e.value;const u=function(n,e,t){return e.children.map(s=>{for(const u of t.children)if(n.shouldReuseRoute(s.value,u.value.snapshot))return Ya(n,s,u);return Ya(n,s)})}(n,e,t);return new bo(s,u)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const f=l.route;return f.value._futureSnapshot=e.value,f.children=e.children.map(y=>Ya(n,y)),f}}const s=function(n){return new Ri(new mr(n.url),new mr(n.params),new mr(n.queryParams),new mr(n.fragment),new mr(n.data),n.outlet,n.component,n)}(e.value),u=e.children.map(l=>Ya(n,l));return new bo(s,u)}}function Ed(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Co(n){return"object"==typeof n&&null!=n&&n.outlets}function Kc(n,e,t,s,u){let l={};return s&&Ge(s,(f,y)=>{l[y]=Array.isArray(f)?f.map(I=>`${I}`):`${f}`}),new vr(t.root===n?e:Cs(t.root,n,e),l,u)}function Cs(n,e,t){const s={};return Ge(n.children,(u,l)=>{s[l]=u===e?t:Cs(u,e,t)}),new Bt(n.segments,s)}class Lu{constructor(e,t,s){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=s,e&&s.length>0&&Ed(s[0]))throw new Error("Root segment cannot have matrix parameters");const u=s.find(Co);if(u&&u!==ce(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wd{constructor(e,t,s){this.segmentGroup=e,this.processChildren=t,this.index=s}}function Xy(n,e,t){if(n||(n=new Bt([],{})),0===n.segments.length&&n.hasChildren())return Qa(n,e,t);const s=function(n,e,t){let s=0,u=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;u<n.segments.length;){if(s>=t.length)return l;const f=n.segments[u],y=t[s];if(Co(y))break;const I=`${y}`,S=s<t.length-1?t[s+1]:null;if(u>0&&void 0===I)break;if(I&&S&&"object"==typeof S&&void 0===S.outlets){if(!Dd(I,S,f))return l;s+=2}else{if(!Dd(I,{},f))return l;s++}u++}return{match:!0,pathIndex:u,commandIndex:s}}(n,e,t),u=t.slice(s.commandIndex);if(s.match&&s.pathIndex<n.segments.length){const l=new Bt(n.segments.slice(0,s.pathIndex),{});return l.children[Nt]=new Bt(n.segments.slice(s.pathIndex),n.children),Qa(l,0,u)}return s.match&&0===u.length?new Bt(n.segments,{}):s.match&&!n.hasChildren()?Ja(n,e,t):s.match?Qa(n,0,u):Ja(n,e,t)}function Qa(n,e,t){if(0===t.length)return new Bt(n.segments,{});{const s=function(n){return Co(n[0])?n[0].outlets:{[Nt]:n}}(t),u={};return Ge(s,(l,f)=>{"string"==typeof l&&(l=[l]),null!==l&&(u[f]=Xy(n.children[f],e,l))}),Ge(n.children,(l,f)=>{void 0===s[f]&&(u[f]=l)}),new Bt(n.segments,u)}}function Ja(n,e,t){const s=n.segments.slice(0,e);let u=0;for(;u<t.length;){const l=t[u];if(Co(l)){const I=V0(l.outlets);return new Bt(s,I)}if(0===u&&Ed(t[0])){s.push(new ua(n.segments[e].path,yg(t[0]))),u++;continue}const f=Co(l)?l.outlets[Nt]:`${l}`,y=u<t.length-1?t[u+1]:null;f&&y&&Ed(y)?(s.push(new ua(f,yg(y))),u+=2):(s.push(new ua(f,{})),u++)}return new Bt(s,{})}function V0(n){const e={};return Ge(n,(t,s)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[s]=Ja(new Bt([],{}),0,t))}),e}function yg(n){const e={};return Ge(n,(t,s)=>e[s]=`${t}`),e}function Dd(n,e,t){return n==t.path&&x(e,t.parameters)}class t_{constructor(e,t,s,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=s,this.forwardEvent=u}activate(e){const t=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,s,e),cf(this.futureState.root),this.activateChildRoutes(t,s,e)}deactivateChildRoutes(e,t,s){const u=ha(t);e.children.forEach(l=>{const f=l.value.outlet;this.deactivateRoutes(l,u[f],s),delete u[f]}),Ge(u,(l,f)=>{this.deactivateRouteAndItsChildren(l,s)})}deactivateRoutes(e,t,s){const u=e.value,l=t?t.value:null;if(u===l)if(u.component){const f=s.getContext(u.outlet);f&&this.deactivateChildRoutes(e,t,f.children)}else this.deactivateChildRoutes(e,t,s);else l&&this.deactivateRouteAndItsChildren(t,s)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const s=t.getContext(e.value.outlet),u=s&&e.value.component?s.children:t,l=ha(e);for(const f of Object.keys(l))this.deactivateRouteAndItsChildren(l[f],u);if(s&&s.outlet){const f=s.outlet.detach(),y=s.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:f,route:e,contexts:y})}}deactivateRouteAndOutlet(e,t){const s=t.getContext(e.value.outlet),u=s&&e.value.component?s.children:t,l=ha(e);for(const f of Object.keys(l))this.deactivateRouteAndItsChildren(l[f],u);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(e,t,s){const u=ha(t);e.children.forEach(l=>{this.activateRoutes(l,u[l.value.outlet],s),this.forwardEvent(new Hc(l.value.snapshot))}),e.children.length&&this.forwardEvent(new $c(e.value.snapshot))}activateRoutes(e,t,s){const u=e.value,l=t?t.value:null;if(cf(u),u===l)if(u.component){const f=s.getOrCreateContext(u.outlet);this.activateChildRoutes(e,t,f.children)}else this.activateChildRoutes(e,t,s);else if(u.component){const f=s.getOrCreateContext(u.outlet);if(this.routeReuseStrategy.shouldAttach(u.snapshot)){const y=this.routeReuseStrategy.retrieve(u.snapshot);this.routeReuseStrategy.store(u.snapshot,null),f.children.onOutletReAttached(y.contexts),f.attachRef=y.componentRef,f.route=y.route.value,f.outlet&&f.outlet.attach(y.componentRef,y.route.value),cf(y.route.value),this.activateChildRoutes(e,null,f.children)}else{const y=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(u.snapshot),I=y?y.module.componentFactoryResolver:null;f.attachRef=null,f.route=u,f.resolver=I,f.outlet&&f.outlet.activateWith(u,I),this.activateChildRoutes(e,null,f.children)}}else this.activateChildRoutes(e,null,s)}}class _g{constructor(e,t){this.routes=e,this.module=t}}function _(n){return"function"==typeof n}function g(n){return n instanceof vr}const ye=Symbol("INITIAL_VALUE");function qe(){return Lr(n=>Lc(n.map(e=>e.pipe((0,Vc.q)(1),Ou(ye)))).pipe(Uc((e,t)=>{let s=!1;return t.reduce((u,l,f)=>u!==ye?u:(l===ye&&(s=!0),s||!1!==l&&f!==t.length-1&&!g(l)?u:l),e)},ye),Is(e=>e!==ye),(0,wt.U)(e=>g(e)?e:!0===e),(0,Vc.q)(1)))}class Ue{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new dt,this.attachRef=null}}class dt{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const s=this.getOrCreateContext(e);s.outlet=t,this.contexts.set(e,s)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ue,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Jt=(()=>{class n{constructor(t,s,u,l,f){this.parentContexts=t,this.location=s,this.resolver=u,this.changeDetector=f,this.activated=null,this._activatedRoute=null,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.attachEvents=new v.vpe,this.detachEvents=new v.vpe,this.name=l||Nt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,s){this.activated=t,this._activatedRoute=s,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const f=(s=s||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),y=this.parentContexts.getOrCreateContext(this.name).children,I=new bn(t,y,this.location.injector);this.activated=this.location.createComponent(f,this.location.length,I),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(dt),v.Y36(v.s_b),v.Y36(v._Vd),v.$8M("name"),v.Y36(v.sBO))},n.\u0275dir=v.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class bn{constructor(e,t,s){this.route=e,this.childContexts=t,this.parent=s}get(e,t){return e===Ri?this.route:e===dt?this.childContexts:this.parent.get(e,t)}}let Kr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=v.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,s){1&t&&v._UZ(0,"router-outlet")},directives:[Jt],encapsulation:2}),n})();function To(n,e=""){for(let t=0;t<n.length;t++){const s=n[t];df(s,vg(e,s))}}function df(n,e){n.children&&To(n.children,e)}function vg(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function fa(n){const e=n.children&&n.children.map(fa),t=e?ro(Tt({},n),{children:e}):Tt({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Nt&&(t.component=Kr),t}function Cn(n){return n.outlet||Nt}function Vu(n,e){const t=n.filter(s=>Cn(s)===e);return t.push(...n.filter(s=>Cn(s)!==e)),t}const bd={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Uu(n,e,t){var y;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Tt({},bd):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const u=(e.matcher||D)(t,n,e);if(!u)return Tt({},bd);const l={};Ge(u.posParams,(I,S)=>{l[S]=I.path});const f=u.consumed.length>0?Tt(Tt({},l),u.consumed[u.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:f,positionalParamSegments:null!=(y=u.posParams)?y:{}}}function nr(n,e,t,s,u="corrected"){if(t.length>0&&function(n,e,t){return t.some(s=>pf(n,e,s)&&Cn(s)!==Nt)}(n,t,s)){const f=new Bt(e,function(n,e,t,s){const u={};u[Nt]=s,s._sourceSegment=n,s._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Cn(l)!==Nt){const f=new Bt([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,u[Cn(l)]=f}return u}(n,e,s,new Bt(t,n.children)));return f._sourceSegment=n,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(s=>pf(n,e,s))}(n,t,s)){const f=new Bt(n.segments,function(n,e,t,s,u,l){const f={};for(const y of s)if(pf(n,t,y)&&!u[Cn(y)]){const I=new Bt([],{});I._sourceSegment=n,I._segmentIndexShift="legacy"===l?n.segments.length:e.length,f[Cn(y)]=I}return Tt(Tt({},u),f)}(n,e,t,s,n.children,u));return f._sourceSegment=n,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:t}}const l=new Bt(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function pf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function U0(n,e,t,s){return!!(Cn(n)===s||s!==Nt&&pf(e,t,n))&&("**"===n.path||Uu(e,n,t).matched)}function i_(n,e,t){return 0===e.length&&!n.children[t]}class gf{constructor(e){this.segmentGroup=e||null}}class s_{constructor(e){this.urlTree=e}}function Eg(n){return new yr.y(e=>e.error(new gf(n)))}function B0(n){return new yr.y(e=>e.error(new s_(n)))}function rC(n){return new yr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class $0{constructor(e,t,s,u,l){this.configLoader=t,this.urlSerializer=s,this.urlTree=u,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(v.h0i)}apply(){const e=nr(this.urlTree.root,[],[],this.config).segmentGroup,t=new Bt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Nt).pipe((0,wt.U)(l=>this.createUrlTree(H0(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ci(l=>{if(l instanceof s_)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof gf?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Nt).pipe((0,wt.U)(u=>this.createUrlTree(H0(u),e.queryParams,e.fragment))).pipe(Ci(u=>{throw u instanceof gf?this.noMatchError(u):u}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,s){const u=e.segments.length>0?new Bt([],{[Nt]:e}):e;return new vr(u,t,s)}expandSegmentGroup(e,t,s,u){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(e,t,s).pipe((0,wt.U)(l=>new Bt([],l))):this.expandSegment(e,s,t,s.segments,u,!0)}expandChildren(e,t,s){const u=[];for(const l of Object.keys(s.children))"primary"===l?u.unshift(l):u.push(l);return(0,Un.D)(u).pipe(Ds(l=>{const f=s.children[l],y=Vu(t,l);return this.expandSegmentGroup(e,y,f,l).pipe((0,wt.U)(I=>({segment:I,outlet:l})))}),Uc((l,f)=>(l[f.outlet]=f.segment,l),{}),function(n,e){const t=arguments.length>=2;return s=>s.pipe(n?Is((u,l)=>n(u,l,s)):Hs.y,ra(1),t?ai(e):ud(()=>new ns))}())}expandSegment(e,t,s,u,l,f){return(0,Un.D)(s).pipe(Ds(y=>this.expandSegmentAgainstRoute(e,t,s,y,u,l,f).pipe(Ci(S=>{if(S instanceof gf)return pt(null);throw S}))),ui(y=>!!y),Ci((y,I)=>{if(y instanceof ns||"EmptyError"===y.name){if(i_(t,u,l))return pt(new Bt([],{}));throw new gf(t)}throw y}))}expandSegmentAgainstRoute(e,t,s,u,l,f,y){return U0(u,t,l,f)?void 0===u.redirectTo?this.matchSegmentAgainstRoute(e,t,u,l,f):y&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,s,u,l,f):Eg(t):Eg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,s,u,l,f){return"**"===u.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,s,u,f):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,u,l,f)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,s,u){const l=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?B0(l):this.lineralizeSegments(s,l).pipe((0,Vr.z)(f=>{const y=new Bt(f,{});return this.expandSegment(e,y,t,f,u,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,u,l,f){const{matched:y,consumedSegments:I,lastChild:S,positionalParamSegments:M}=Uu(t,u,l);if(!y)return Eg(t);const F=this.applyRedirectCommands(I,u.redirectTo,M);return u.redirectTo.startsWith("/")?B0(F):this.lineralizeSegments(u,F).pipe((0,Vr.z)(Z=>this.expandSegment(e,t,s,Z.concat(l.slice(S)),f,!1)))}matchSegmentAgainstRoute(e,t,s,u,l){if("**"===s.path)return s.loadChildren?(s._loadedConfig?pt(s._loadedConfig):this.configLoader.load(e.injector,s)).pipe((0,wt.U)(Z=>(s._loadedConfig=Z,new Bt(u,{})))):pt(new Bt(u,{}));const{matched:f,consumedSegments:y,lastChild:I}=Uu(t,s,u);if(!f)return Eg(t);const S=u.slice(I);return this.getChildConfig(e,s,u).pipe((0,Vr.z)(F=>{const Z=F.module,J=F.routes,{segmentGroup:Ae,slicedSegments:Ye}=nr(t,y,S,J),nt=new Bt(Ae.segments,Ae.children);if(0===Ye.length&&nt.hasChildren())return this.expandChildren(Z,J,nt).pipe((0,wt.U)(zt=>new Bt(y,zt)));if(0===J.length&&0===Ye.length)return pt(new Bt(y,{}));const Wt=Cn(s)===l;return this.expandSegment(Z,nt,J,Ye,Wt?Nt:l,!0).pipe((0,wt.U)(ur=>new Bt(y.concat(ur.segments),ur.children)))}))}getChildConfig(e,t,s){return t.children?pt(new _g(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?pt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,s).pipe((0,Vr.z)(u=>{return u?this.configLoader.load(e.injector,t).pipe((0,wt.U)(l=>(t._loadedConfig=l,l))):(n=t,new yr.y(e=>e.error(Io(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):pt(new _g([],e))}runCanLoadGuards(e,t,s){const u=t.canLoad;return u&&0!==u.length?pt(u.map(f=>{const y=e.get(f);let I;if((n=y)&&_(n.canLoad))I=y.canLoad(t,s);else{if(!_(y))throw new Error("Invalid CanLoad guard");I=y(t,s)}var n;return ke(I)})).pipe(qe(),(0,Yn.b)(f=>{if(!g(f))return;const y=Io(`Redirecting to "${this.urlSerializer.serialize(f)}"`);throw y.url=f,y}),(0,wt.U)(f=>!0===f)):pt(!0)}lineralizeSegments(e,t){let s=[],u=t.root;for(;;){if(s=s.concat(u.segments),0===u.numberOfChildren)return pt(s);if(u.numberOfChildren>1||!u.children[Nt])return rC(e.redirectTo);u=u.children[Nt]}}applyRedirectCommands(e,t,s){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,s)}applyRedirectCreatreUrlTree(e,t,s,u){const l=this.createSegmentGroup(e,t.root,s,u);return new vr(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const s={};return Ge(e,(u,l)=>{if("string"==typeof u&&u.startsWith(":")){const y=u.substring(1);s[l]=t[y]}else s[l]=u}),s}createSegmentGroup(e,t,s,u){const l=this.createSegments(e,t.segments,s,u);let f={};return Ge(t.children,(y,I)=>{f[I]=this.createSegmentGroup(e,y,s,u)}),new Bt(l,f)}createSegments(e,t,s,u){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,u):this.findOrReturn(l,s))}findPosParam(e,t,s){const u=s[t.path.substring(1)];if(!u)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return u}findOrReturn(e,t){let s=0;for(const u of t){if(u.path===e.path)return t.splice(s),u;s++}return e}}function H0(n){const e={};for(const s of Object.keys(n.children)){const l=H0(n.children[s]);(l.segments.length>0||l.hasChildren())&&(e[s]=l)}return function(n){if(1===n.numberOfChildren&&n.children[Nt]){const e=n.children[Nt];return new Bt(n.segments.concat(e.segments),e.children)}return n}(new Bt(n.segments,e))}class mf{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class wg{constructor(e,t){this.component=e,this.route=t}}function sC(n,e,t){const s=n._root;return yf(s,e?e._root:null,t,[s.value])}function Ig(n,e,t){const s=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(s?s.module.injector:t).get(n)}function yf(n,e,t,s,u={canDeactivateChecks:[],canActivateChecks:[]}){const l=ha(e);return n.children.forEach(f=>{(function(n,e,t,s,u={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,f=e?e.value:null,y=t?t.getContext(n.value.outlet):null;if(f&&l.routeConfig===f.routeConfig){const I=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!bs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!bs(n.url,e.url)||!x(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vd(n,e)||!x(n.queryParams,e.queryParams);default:return!vd(n,e)}}(f,l,l.routeConfig.runGuardsAndResolvers);I?u.canActivateChecks.push(new mf(s)):(l.data=f.data,l._resolvedData=f._resolvedData),yf(n,e,l.component?y?y.children:null:t,s,u),I&&y&&y.outlet&&y.outlet.isActivated&&u.canDeactivateChecks.push(new wg(y.outlet.component,f))}else f&&ju(e,y,u),u.canActivateChecks.push(new mf(s)),yf(n,null,l.component?y?y.children:null:t,s,u)})(f,l[f.value.outlet],t,s.concat([f.value]),u),delete l[f.value.outlet]}),Ge(l,(f,y)=>ju(f,t.getContext(y),u)),u}function ju(n,e,t){const s=ha(n),u=n.value;Ge(s,(l,f)=>{ju(l,u.component?e?e.children.getContext(f):null:e,t)}),t.canDeactivateChecks.push(new wg(u.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,u))}class Td{}function Ao(n){return new yr.y(e=>e.error(n))}class zS{constructor(e,t,s,u,l,f){this.rootComponentType=e,this.config=t,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=f}recognize(){const e=nr(this.urlTree.root,[],[],this.config.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Nt);if(null===t)return null;const s=new _d([],Object.freeze({}),Object.freeze(Tt({},this.urlTree.queryParams)),this.urlTree.fragment,{},Nt,this.rootComponentType,null,this.urlTree.root,-1,{}),u=new bo(s,t),l=new fg(this.url,u);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,s=Ks(t,this.paramsInheritanceStrategy);t.params=Object.freeze(s.params),t.data=Object.freeze(s.data),e.children.forEach(u=>this.inheritParamsAndData(u))}processSegmentGroup(e,t,s){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,s)}processChildren(e,t){const s=[];for(const l of Object.keys(t.children)){const f=t.children[l],y=Vu(e,l),I=this.processSegmentGroup(y,f,l);if(null===I)return null;s.push(...I)}const u=Dg(s);return u.sort((e,t)=>e.value.outlet===Nt?-1:t.value.outlet===Nt?1:e.value.outlet.localeCompare(t.value.outlet)),u}processSegment(e,t,s,u){for(const l of e){const f=this.processSegmentAgainstRoute(l,t,s,u);if(null!==f)return f}return i_(t,s,u)?[]:null}processSegmentAgainstRoute(e,t,s,u){if(e.redirectTo||!U0(e,t,s,u))return null;let l,f=[],y=[];if("**"===e.path){const J=s.length>0?ce(s).parameters:{};l=new _d(s,J,Object.freeze(Tt({},this.urlTree.queryParams)),this.urlTree.fragment,Ad(e),Cn(e),e.component,e,Y0(t),a_(t)+s.length,u_(e))}else{const J=Uu(t,e,s);if(!J.matched)return null;f=J.consumedSegments,y=s.slice(J.lastChild),l=new _d(f,J.parameters,Object.freeze(Tt({},this.urlTree.queryParams)),this.urlTree.fragment,Ad(e),Cn(e),e.component,e,Y0(t),a_(t)+f.length,u_(e))}const I=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:S,slicedSegments:M}=nr(t,f,y,I.filter(J=>void 0===J.redirectTo),this.relativeLinkResolution);var n;if(0===M.length&&S.hasChildren()){const J=this.processChildren(I,S);return null===J?null:[new bo(l,J)]}if(0===I.length&&0===M.length)return[new bo(l,[])];const F=Cn(e)===u,Z=this.processSegment(I,S,M,F?Nt:u);return null===Z?null:[new bo(l,Z)]}}function pa(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Dg(n){const e=[],t=new Set;for(const s of n){if(!pa(s)){e.push(s);continue}const u=e.find(l=>s.value.routeConfig===l.value.routeConfig);void 0!==u?(u.children.push(...s.children),t.add(u)):e.push(s)}for(const s of t){const u=Dg(s.children);e.push(new bo(s.value,u))}return e.filter(s=>!t.has(s))}function Y0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function a_(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Ad(n){return n.data||{}}function u_(n){return n.resolve||{}}function $u(n){return Lr(e=>{const t=n(e);return t?(0,Un.D)(t).pipe((0,wt.U)(()=>e)):pt(e)})}class pC extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const _f=new v.OlP("ROUTES");class ew{constructor(e,t,s,u){this.injector=e,this.compiler=t,this.onLoadStartListener=s,this.onLoadEndListener=u}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const u=this.loadModuleFactory(t.loadChildren).pipe((0,wt.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const f=l.create(e);return new _g(Q(f.injector.get(_f,void 0,v.XFs.Self|v.XFs.Optional)).map(fa),f)}),Ci(l=>{throw t._loader$=void 0,l}));return t._loader$=new ig(u,()=>new Di.x).pipe(xn()),t._loader$}loadModuleFactory(e){return ke(e()).pipe((0,Vr.z)(t=>t instanceof v.YKP?pt(t):(0,Un.D)(this.compiler.compileModuleAsync(t))))}}class mC{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function yC(n){throw n}function _C(n,e,t){return e.parse("/")}function tw(n,e){return pt(null)}const nw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},h_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let os=(()=>{class n{constructor(t,s,u,l,f,y,I){this.rootComponentType=t,this.urlSerializer=s,this.rootContexts=u,this.location=l,this.config=I,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Di.x,this.errorHandler=yC,this.malformedUriErrorHandler=_C,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:tw,afterPreactivation:tw},this.urlHandlingStrategy=new mC,this.routeReuseStrategy=new pC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=f.get(v.h0i),this.console=f.get(v.c2e);const F=f.get(v.R0b);this.isNgZoneEnabled=F instanceof v.R0b&&v.R0b.isInAngularZone(),this.resetConfig(I),this.currentUrlTree=new vr(new Bt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ew(f,y,Z=>this.triggerEvent(new Ws(Z)),Z=>this.triggerEvent(new Ka(Z))),this.routerState=lg(this.currentUrlTree,this.rootComponentType),this.transitions=new mr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const s=this.events;return t.pipe(Is(u=>0!==u.id),(0,wt.U)(u=>ro(Tt({},u),{extractedUrl:this.urlHandlingStrategy.extract(u.rawUrl)})),Lr(u=>{let l=!1,f=!1;return pt(u).pipe((0,Yn.b)(y=>{this.currentNavigation={id:y.id,initialUrl:y.currentRawUrl,extractedUrl:y.extractedUrl,trigger:y.source,extras:y.extras,previousNavigation:this.lastSuccessfulNavigation?ro(Tt({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Lr(y=>{const I=this.browserUrlTree.toString(),S=!this.navigated||y.extractedUrl.toString()!==I||I!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||S)&&this.urlHandlingStrategy.shouldProcessUrl(y.rawUrl))return bg(y.source)&&(this.browserUrlTree=y.extractedUrl),pt(y).pipe(Lr(F=>{const Z=this.transitions.getValue();return s.next(new Eo(F.id,this.serializeUrl(F.extractedUrl),F.source,F.restoredState)),Z!==this.transitions.getValue()?na.E:Promise.resolve(F)}),function(n,e,t,s){return Lr(u=>function(n,e,t,s,u){return new $0(n,e,t,s,u).apply()}(n,e,t,u.extractedUrl,s).pipe((0,wt.U)(l=>ro(Tt({},u),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Yn.b)(F=>{this.currentNavigation=ro(Tt({},this.currentNavigation),{finalUrl:F.urlAfterRedirects})}),function(n,e,t,s,u){return(0,Vr.z)(l=>function(n,e,t,s,u="emptyOnly",l="legacy"){try{const f=new zS(n,e,t,s,u,l).recognize();return null===f?Ao(new Td):pt(f)}catch(f){return Ao(f)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),s,u).pipe((0,wt.U)(f=>ro(Tt({},l),{targetSnapshot:f}))))}(this.rootComponentType,this.config,F=>this.serializeUrl(F),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Yn.b)(F=>{if("eager"===this.urlUpdateStrategy){if(!F.extras.skipLocationChange){const J=this.urlHandlingStrategy.merge(F.urlAfterRedirects,F.rawUrl);this.setBrowserUrl(J,F)}this.browserUrlTree=F.urlAfterRedirects}const Z=new ef(F.id,this.serializeUrl(F.extractedUrl),this.serializeUrl(F.urlAfterRedirects),F.targetSnapshot);s.next(Z)}));if(S&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Z,extractedUrl:J,source:Ae,restoredState:Ye,extras:nt}=y,Wt=new Eo(Z,this.serializeUrl(J),Ae,Ye);s.next(Wt);const kn=lg(J,this.rootComponentType).snapshot;return pt(ro(Tt({},y),{targetSnapshot:kn,urlAfterRedirects:J,extras:ro(Tt({},nt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=y.rawUrl,y.resolve(null),na.E}),$u(y=>{const{targetSnapshot:I,id:S,extractedUrl:M,rawUrl:F,extras:{skipLocationChange:Z,replaceUrl:J}}=y;return this.hooks.beforePreactivation(I,{navigationId:S,appliedUrlTree:M,rawUrlTree:F,skipLocationChange:!!Z,replaceUrl:!!J})}),(0,Yn.b)(y=>{const I=new Ti(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(I)}),(0,wt.U)(y=>ro(Tt({},y),{guards:sC(y.targetSnapshot,y.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Vr.z)(t=>{const{targetSnapshot:s,currentSnapshot:u,guards:{canActivateChecks:l,canDeactivateChecks:f}}=t;return 0===f.length&&0===l.length?pt(ro(Tt({},t),{guardsResult:!0})):function(n,e,t,s){return(0,Un.D)(n).pipe((0,Vr.z)(u=>function(n,e,t,s,u){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?pt(l.map(y=>{const I=Ig(y,e,u);let S;if(function(n){return n&&_(n.canDeactivate)}(I))S=ke(I.canDeactivate(n,e,t,s));else{if(!_(I))throw new Error("Invalid CanDeactivate guard");S=ke(I(n,e,t,s))}return S.pipe(ui())})).pipe(qe()):pt(!0)}(u.component,u.route,t,e,s)),ui(u=>!0!==u,!0))}(f,s,u,n).pipe((0,Vr.z)(y=>y&&function(n){return"boolean"==typeof n}(y)?function(n,e,t,s){return(0,Un.D)(e).pipe(Ds(u=>bi(function(n,e){return null!==n&&e&&e(new tf(n)),pt(!0)}(u.route.parent,s),function(n,e){return null!==n&&e&&e(new wo(n)),pt(!0)}(u.route,s),function(n,e,t){const s=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(f=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(f)).filter(f=>null!==f).map(f=>Mu(()=>pt(f.guards.map(I=>{const S=Ig(I,f.node,t);let M;if(function(n){return n&&_(n.canActivateChild)}(S))M=ke(S.canActivateChild(s,n));else{if(!_(S))throw new Error("Invalid CanActivateChild guard");M=ke(S(s,n))}return M.pipe(ui())})).pipe(qe())));return pt(l).pipe(qe())}(n,u.path,t),function(n,e,t){const s=e.routeConfig?e.routeConfig.canActivate:null;if(!s||0===s.length)return pt(!0);const u=s.map(l=>Mu(()=>{const f=Ig(l,e,t);let y;if(function(n){return n&&_(n.canActivate)}(f))y=ke(f.canActivate(e,n));else{if(!_(f))throw new Error("Invalid CanActivate guard");y=ke(f(e,n))}return y.pipe(ui())}));return pt(u).pipe(qe())}(n,u.route,t))),ui(u=>!0!==u,!0))}(s,l,n,e):pt(y)),(0,wt.U)(y=>ro(Tt({},t),{guardsResult:y})))})}(this.ngModule.injector,y=>this.triggerEvent(y)),(0,Yn.b)(y=>{if(g(y.guardsResult)){const S=Io(`Redirecting to "${this.serializeUrl(y.guardsResult)}"`);throw S.url=y.guardsResult,S}const I=new jc(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot,!!y.guardsResult);this.triggerEvent(I)}),Is(y=>!!y.guardsResult||(this.restoreHistory(y),this.cancelNavigationTransition(y,""),!1)),$u(y=>{if(y.guards.canActivateChecks.length)return pt(y).pipe((0,Yn.b)(I=>{const S=new sa(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);this.triggerEvent(S)}),Lr(I=>{let S=!1;return pt(I).pipe(function(n,e){return(0,Vr.z)(t=>{const{targetSnapshot:s,guards:{canActivateChecks:u}}=t;if(!u.length)return pt(t);let l=0;return(0,Un.D)(u).pipe(Ds(f=>function(n,e,t,s){return function(n,e,t,s){const u=Object.keys(n);if(0===u.length)return pt({});const l={};return(0,Un.D)(u).pipe((0,Vr.z)(f=>function(n,e,t,s){const u=Ig(n,e,s);return ke(u.resolve?u.resolve(e,t):u(e,t))}(n[f],e,t,s).pipe((0,Yn.b)(y=>{l[f]=y}))),ra(1),(0,Vr.z)(()=>Object.keys(l).length===u.length?pt(l):na.E))}(n._resolve,n,e,s).pipe((0,wt.U)(l=>(n._resolvedData=l,n.data=Tt(Tt({},n.data),Ks(n,t).resolve),null)))}(f.route,s,n,e)),(0,Yn.b)(()=>l++),ra(1),(0,Vr.z)(f=>l===u.length?pt(t):na.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Yn.b)({next:()=>S=!0,complete:()=>{S||(this.restoreHistory(I),this.cancelNavigationTransition(I,"At least one route resolver didn't emit any value."))}}))}),(0,Yn.b)(I=>{const S=new sg(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);this.triggerEvent(S)}))}),$u(y=>{const{targetSnapshot:I,id:S,extractedUrl:M,rawUrl:F,extras:{skipLocationChange:Z,replaceUrl:J}}=y;return this.hooks.afterPreactivation(I,{navigationId:S,appliedUrlTree:M,rawUrlTree:F,skipLocationChange:!!Z,replaceUrl:!!J})}),(0,wt.U)(y=>{const I=function(n,e,t){const s=Ya(n,e._root,t?t._root:void 0);return new cg(s,e)}(this.routeReuseStrategy,y.targetSnapshot,y.currentRouterState);return ro(Tt({},y),{targetRouterState:I})}),(0,Yn.b)(y=>{this.currentUrlTree=y.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(y.urlAfterRedirects,y.rawUrl),this.routerState=y.targetRouterState,"deferred"===this.urlUpdateStrategy&&(y.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,y),this.browserUrlTree=y.urlAfterRedirects)}),((n,e,t)=>(0,wt.U)(s=>(new t_(e,s.targetRouterState,s.currentRouterState,t).activate(n),s)))(this.rootContexts,this.routeReuseStrategy,y=>this.triggerEvent(y)),(0,Yn.b)({next(){l=!0},complete(){l=!0}}),function(n){return(0,oi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var y;l||f||this.cancelNavigationTransition(u,`Navigation ID ${u.id} is not equal to the current navigation id ${this.navigationId}`),(null==(y=this.currentNavigation)?void 0:y.id)===u.id&&(this.currentNavigation=null)}),Ci(y=>{if(f=!0,function(n){return n&&n[aa]}(y)){const I=g(y.url);I||(this.navigated=!0,this.restoreHistory(u,!0));const S=new Bc(u.id,this.serializeUrl(u.extractedUrl),y.message);s.next(S),I?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(y.url,this.rawUrlTree),F={skipLocationChange:u.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||bg(u.source)};this.scheduleNavigation(M,"imperative",null,F,{resolve:u.resolve,reject:u.reject,promise:u.promise})},0):u.resolve(!1)}else{this.restoreHistory(u,!0);const I=new ld(u.id,this.serializeUrl(u.extractedUrl),y);s.next(I);try{u.resolve(this.errorHandler(y))}catch(S){u.reject(S)}}return na.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Tt(Tt({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const s="popstate"===t.type?"popstate":"hashchange";"popstate"===s&&setTimeout(()=>{var y;const u={replaceUrl:!0},l=(null==(y=t.state)?void 0:y.navigationId)?t.state:null;if(l){const I=Tt({},l);delete I.navigationId,delete I.\u0275routerPageId,0!==Object.keys(I).length&&(u.state=I)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,s,l,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){To(t),this.config=t.map(fa),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,s={}){const{relativeTo:u,queryParams:l,fragment:f,queryParamsHandling:y,preserveFragment:I}=s,S=u||this.routerState.root,M=I?this.currentUrlTree.fragment:f;let F=null;switch(y){case"merge":F=Tt(Tt({},this.currentUrlTree.queryParams),l);break;case"preserve":F=this.currentUrlTree.queryParams;break;default:F=l||null}return null!==F&&(F=this.removeEmptyProps(F)),function(n,e,t,s,u){if(0===t.length)return Kc(e.root,e.root,e,s,u);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Lu(!0,0,n);let e=0,t=!1;const s=n.reduce((u,l,f)=>{if("object"==typeof l&&null!=l){if(l.outlets){const y={};return Ge(l.outlets,(I,S)=>{y[S]="string"==typeof I?I.split("/"):I}),[...u,{outlets:y}]}if(l.segmentPath)return[...u,l.segmentPath]}return"string"!=typeof l?[...u,l]:0===f?(l.split("/").forEach((y,I)=>{0==I&&"."===y||(0==I&&""===y?t=!0:".."===y?e++:""!=y&&u.push(y))}),u):[...u,l]},[]);return new Lu(t,e,s)}(t);if(l.toRoot())return Kc(e.root,new Bt([],{}),e,s,u);const f=function(n,e,t){if(n.isAbsolute)return new wd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new wd(l,l===e.root,0)}const s=Ed(n.commands[0])?0:1;return function(n,e,t){let s=n,u=e,l=t;for(;l>u;){if(l-=u,s=s.parent,!s)throw new Error("Invalid number of '../'");u=s.segments.length}return new wd(s,!1,u-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+s,n.numberOfDoubleDots)}(l,e,n),y=f.processChildren?Qa(f.segmentGroup,f.index,l.commands):Xy(f.segmentGroup,f.index,l.commands);return Kc(f.segmentGroup,y,e,s,u)}(S,this.currentUrlTree,t,F,null!=M?M:null)}navigateByUrl(t,s={skipLocationChange:!1}){const u=g(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(u,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,s)}navigate(t,s={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,s),s)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let s;try{s=this.urlSerializer.parse(t)}catch(u){s=this.malformedUriErrorHandler(u,this.urlSerializer,t)}return s}isActive(t,s){let u;if(u=!0===s?Tt({},nw):!1===s?Tt({},h_):s,g(t))return _r(this.currentUrlTree,t,u);const l=this.parseUrl(t);return _r(this.currentUrlTree,l,u)}removeEmptyProps(t){return Object.keys(t).reduce((s,u)=>{const l=t[u];return null!=l&&(s[u]=l),s},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ia(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,s,u,l,f){var Wt,kn,ur;if(this.disposed)return Promise.resolve(!1);const y=this.transitions.value,I=bg(s)&&y&&!bg(y.source),S=y.rawUrl.toString()===t.toString(),M=y.id===(null==(Wt=this.currentNavigation)?void 0:Wt.id);if(I&&S&&M)return Promise.resolve(!0);let Z,J,Ae;f?(Z=f.resolve,J=f.reject,Ae=f.promise):Ae=new Promise((zt,Xn)=>{Z=zt,J=Xn});const Ye=++this.navigationId;let nt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(u=this.location.getState()),nt=u&&u.\u0275routerPageId?u.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!=(kn=this.browserPageId)?kn:0:(null!=(ur=this.browserPageId)?ur:0)+1):nt=0,this.setTransition({id:Ye,targetPageId:nt,source:s,restoredState:u,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:Z,reject:J,promise:Ae,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ae.catch(zt=>Promise.reject(zt))}setBrowserUrl(t,s){const u=this.urlSerializer.serialize(t),l=Tt(Tt({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(u)||s.extras.replaceUrl?this.location.replaceState(u,"",l):this.location.go(u,"",l)}restoreHistory(t,s=!1){var u,l;if("computed"===this.canceledNavigationResolution){const f=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(u=this.currentNavigation)?void 0:u.finalUrl)||0===f?this.currentUrlTree===(null==(l=this.currentNavigation)?void 0:l.finalUrl)&&0===f&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(f)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,s){const u=new Bc(t.id,this.serializeUrl(t.extractedUrl),s);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,s){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:s}:{navigationId:t}}}return n.\u0275fac=function(t){v.$Z()},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function bg(n){return"imperative"!==n}class g_{}class vf{preload(e,t){return pt(null)}}let iw=(()=>{class n{constructor(t,s,u,l){this.router=t,this.injector=u,this.preloadingStrategy=l,this.loader=new ew(u,s,I=>t.triggerEvent(new Ws(I)),I=>t.triggerEvent(new Ka(I)))}setUpPreloading(){this.subscription=this.router.events.pipe(Is(t=>t instanceof ia),Ds(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(v.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,s){const u=[];for(const l of s)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const f=l._loadedConfig;u.push(this.processRoutes(f.module,f.routes))}else l.loadChildren&&!l.canLoad?u.push(this.preloadConfig(t,l)):l.children&&u.push(this.processRoutes(t,l.children));return(0,Un.D)(u).pipe((0,rs.J)(),(0,wt.U)(l=>{}))}preloadConfig(t,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?pt(s._loadedConfig):this.loader.load(t.injector,s)).pipe((0,Vr.z)(l=>(s._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(os),v.LFG(v.Sil),v.LFG(v.zs3),v.LFG(g_))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),Tg=(()=>{class n{constructor(t,s,u={}){this.router=t,this.viewportScroller=s,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Eo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ia&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ai&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,s){this.router.triggerEvent(new Ai(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){v.$Z()},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const Hu=new v.OlP("ROUTER_CONFIGURATION"),Ag=new v.OlP("ROUTER_FORROOT_GUARD"),sw=[Ke,{provide:og,useClass:ag},{provide:os,useFactory:function(n,e,t,s,u,l,f={},y,I){const S=new os(null,n,e,t,s,u,Q(l));return y&&(S.urlHandlingStrategy=y),I&&(S.routeReuseStrategy=I),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(f,S),f.enableTracing&&S.events.subscribe(M=>{var F,Z;null==(F=console.group)||F.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null==(Z=console.groupEnd)||Z.call(console)}),S},deps:[og,dt,Ke,v.zs3,v.Sil,_f,Hu,[class{},new v.FiY],[class{},new v.FiY]]},dt,{provide:Ri,useFactory:function(n){return n.routerState.root},deps:[os]},iw,vf,class{preload(e,t){return t().pipe(Ci(()=>pt(null)))}},{provide:Hu,useValue:{enableTracing:!1}}];function Sg(){return new v.PXZ("Router",os)}let Ef=(()=>{class n{constructor(t,s){}static forRoot(t,s){return{ngModule:n,providers:[sw,Rg(t),{provide:Ag,useFactory:aw,deps:[[os,new v.FiY,new v.tp0]]},{provide:Hu,useValue:s||{}},{provide:de,useFactory:m_,deps:[ie,[new v.tBr(ue),new v.FiY],Hu]},{provide:Tg,useFactory:ow,deps:[os,bc,Hu]},{provide:g_,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:vf},{provide:v.PXZ,multi:!0,useFactory:Sg},[y_,{provide:v.ip1,multi:!0,useFactory:IC,deps:[y_]},{provide:xg,useFactory:cw,deps:[y_]},{provide:v.tb,multi:!0,useExisting:xg}]]}}static forChild(t){return{ngModule:n,providers:[Rg(t)]}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Ag,8),v.LFG(os,8))},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({}),n})();function ow(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Tg(n,e,t)}function m_(n,e,t={}){return t.useHash?new we(n,e):new Ce(n,e)}function aw(n){return"guarded"}function Rg(n){return[{provide:v.deG,multi:!0,useValue:n},{provide:_f,multi:!0,useValue:n}]}let y_=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Di.x}appInitializer(){return this.injector.get(H,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const u=new Promise(y=>s=y),l=this.injector.get(os),f=this.injector.get(Hu);return"disabled"===f.initialNavigation?(l.setUpLocationChangeListener(),s(!0)):"enabled"===f.initialNavigation||"enabledBlocking"===f.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?pt(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),l.initialNavigation()):s(!0),u})}bootstrapListener(t){const s=this.injector.get(Hu),u=this.injector.get(iw),l=this.injector.get(Tg),f=this.injector.get(os),y=this.injector.get(v.z2F);t===y.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&f.initialNavigation(),u.setUpPreloading(),l.init(),f.resetRootComponentType(y.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(v.zs3))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function IC(n){return n.appInitializer.bind(n)}function cw(n){return n.bootstrapListener.bind(n)}const xg=new v.OlP("Router Initializer"),dw=[];let DC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({imports:[[Ef.forRoot(dw)],Ef]}),n})();var rt,hw=k(1347),qt=k(4213),Qc=k(1572),Zr=k(3855),Ng=k(1177),Ee=k(8239),bC="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Xa={},__=__||{},Rt=bC||self;function Pg(){}function v_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function If(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var E_="closure_uid_"+(1e9*Math.random()>>>0),fw=0;function pw(n,e,t){return n.call.apply(n.bind,arguments)}function Mg(n,e,t){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,s),n.apply(e,u)}}return function(){return n.apply(e,arguments)}}function Mn(n,e,t){return(Mn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pw:Mg).apply(null,arguments)}function Df(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),n.apply(this,s)}}function ci(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(s,u,l){for(var f=Array(arguments.length-2),y=2;y<arguments.length;y++)f[y-2]=arguments[y];return e.prototype[u].apply(s,f)}}function ga(){this.s=this.s,this.o=this.o}var w_={};ga.prototype.s=!1,ga.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,E_)&&n[E_]||(n[E_]=++fw)}(this);delete w_[n]}},ga.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const I_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Og=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const s=n.length,u="string"==typeof n?n.split(""):n;for(let l=0;l<s;l++)l in u&&e.call(t,u[l],l,n)};function D_(n){return Array.prototype.concat.apply([],arguments)}function gw(n){const e=n.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=n[s];return t}return[]}function Jc(n){return/^[\s\xa0]*$/.test(n)}var di,bf=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function li(n,e){return-1!=n.indexOf(e)}function Cf(n,e){return n<e?-1:n>e?1:0}e:{var CC=Rt.navigator;if(CC){var mw=CC.userAgent;if(mw){di=mw;break e}}di=""}function b_(n,e,t){for(const s in n)e.call(t,n[s],s,n)}function yw(n){const e={};for(const t in n)e[t]=n[t];return e}var _w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C_(n,e){let t,s;for(let u=1;u<arguments.length;u++){for(t in s=arguments[u],s)n[t]=s[t];for(let l=0;l<_w.length;l++)t=_w[l],Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}}function vw(n){return vw[" "](n),n}vw[" "]=Pg;var S_,n,YS=li(di,"Opera"),Xc=li(di,"Trident")||li(di,"MSIE"),T_=li(di,"Edge"),A_=T_||Xc,kg=li(di,"Gecko")&&!(li(di.toLowerCase(),"webkit")&&!li(di,"Edge"))&&!(li(di,"Trident")||li(di,"MSIE"))&&!li(di,"Edge"),QS=li(di.toLowerCase(),"webkit")&&!li(di,"Edge");function AC(){var n=Rt.document;return n?n.documentMode:void 0}e:{var Ew="",ww=(n=di,kg?/rv:([^\);]+)(\)|;)/.exec(n):T_?/Edge\/([\d\.]+)/.exec(n):Xc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):QS?/WebKit\/(\S+)/.exec(n):YS?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ww&&(Ew=ww?ww[1]:""),Xc){var Iw=AC();if(null!=Iw&&Iw>parseFloat(Ew)){S_=String(Iw);break e}}S_=Ew}var JS={};function XS(){return e=JS,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=bf(String(S_)).split("."),t=bf("9").split("."),s=Math.max(e.length,t.length);for(let f=0;0==n&&f<s;f++){var u=e[f]||"",l=t[f]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==u[0].length&&0==l[0].length)break;n=Cf(0==u[1].length?0:parseInt(u[1],10),0==l[1].length?0:parseInt(l[1],10))||Cf(0==u[2].length,0==l[2].length)||Cf(u[2],l[2]),u=u[3],l=l[3]}while(0==n)}return 0<=n}();var e}var Gu=Rt.document&&Xc&&(AC()||parseInt(S_,10))||void 0,R_=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",Pg,e),Rt.removeEventListener("test",Pg,e)}catch(t){}return n}();function xi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Sd(n,e){if(xi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(kg){e:{try{vw(e.nodeName);var u=!0;break e}catch(l){}u=!1}u||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:x_[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Sd.Z.h.call(this)}}xi.prototype.h=function(){this.defaultPrevented=!0},ci(Sd,xi);var x_={2:"touch",3:"pen",4:"mouse"};Sd.prototype.h=function(){Sd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Rd="closure_listenable_"+(1e6*Math.random()|0),N_=0;function RC(n,e,t,s,u){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=u,this.key=++N_,this.ca=this.fa=!1}function So(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Tf(n){this.src=n,this.g={},this.h=0}function P_(n,e){var t=e.type;if(t in n.g){var l,s=n.g[t],u=I_(s,e);(l=0<=u)&&Array.prototype.splice.call(s,u,1),l&&(So(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Af(n,e,t,s){for(var u=0;u<n.length;++u){var l=n[u];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==s)return u}return-1}Tf.prototype.add=function(n,e,t,s,u){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var f=Af(n,e,s,u);return-1<f?(e=n[f],t||(e.fa=!1)):((e=new RC(e,this.src,l,!!s,u)).fa=t,n.push(e)),e};var M_="closure_lm_"+(1e6*Math.random()|0),Fg={};function bw(n,e,t,s,u){if(s&&s.once)return el(n,e,t,s,u);if(Array.isArray(e)){for(var l=0;l<e.length;l++)bw(n,e[l],t,s,u);return null}return t=Ug(t),n&&n[Rd]?n.N(e,t,If(s)?!!s.capture:!!s,u):Cw(n,e,t,!1,s,u)}function Cw(n,e,t,s,u,l){if(!e)throw Error("Invalid event type");var f=If(u)?!!u.capture:!!u,y=O_(n);if(y||(n[M_]=y=new Tf(n)),(t=y.add(e,t,s,f,l)).proxy)return t;if(s=function(){var e=Nd;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=s,s.src=n,s.listener=t,n.addEventListener)R_||(u=f),void 0===u&&(u=!1),n.addEventListener(e.toString(),s,u);else if(n.attachEvent)n.attachEvent(xd(e.toString()),s);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(s)}return t}function el(n,e,t,s,u){if(Array.isArray(e)){for(var l=0;l<e.length;l++)el(n,e[l],t,s,u);return null}return t=Ug(t),n&&n[Rd]?n.O(e,t,If(s)?!!s.capture:!!s,u):Cw(n,e,t,!0,s,u)}function Lg(n,e,t,s,u){if(Array.isArray(e))for(var l=0;l<e.length;l++)Lg(n,e[l],t,s,u);else s=If(s)?!!s.capture:!!s,t=Ug(t),n&&n[Rd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Af(l=n.g[e],t,s,u))&&(So(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=O_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Af(e,t,s,u)),(t=-1<n?e[n]:null)&&Wu(t))}function Wu(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Rd])P_(e.i,n);else{var t=n.type,s=n.proxy;e.removeEventListener?e.removeEventListener(t,s,n.capture):e.detachEvent?e.detachEvent(xd(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=O_(e))?(P_(t,n),0==t.h&&(t.src=null,e[M_]=null)):So(n)}}}function xd(n){return n in Fg?Fg[n]:Fg[n]="on"+n}function Nd(n,e){if(n.ca)n=!0;else{e=new Sd(e,this);var t=n.listener,s=n.ia||n.src;n.fa&&Wu(n),n=t.call(s,e)}return n}function O_(n){return(n=n[M_])instanceof Tf?n:null}var Vg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ug(n){return"function"==typeof n?n:(n[Vg]||(n[Vg]=function(e){return n.handleEvent(e)}),n[Vg])}function Nr(){ga.call(this),this.i=new Tf(this),this.P=this,this.I=null}function Ur(n,e){var t,s=n.I;if(s)for(t=[];s;s=s.I)t.push(s);if(n=n.P,s=e.type||e,"string"==typeof e)e=new xi(e,n);else if(e instanceof xi)e.target=e.target||n;else{var u=e;C_(e=new xi(s,n),u)}if(u=!0,t)for(var l=t.length-1;0<=l;l--){var f=e.g=t[l];u=Rf(f,s,!0,e)&&u}if(u=Rf(f=e.g=n,s,!0,e)&&u,u=Rf(f,s,!1,e)&&u,t)for(l=0;l<t.length;l++)u=Rf(f=e.g=t[l],s,!1,e)&&u}function Rf(n,e,t,s){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,l=0;l<e.length;++l){var f=e[l];if(f&&!f.ca&&f.capture==t){var y=f.listener,I=f.ia||f.src;f.fa&&P_(n.i,f),u=!1!==y.call(I,s)&&u}}return u&&!s.defaultPrevented}ci(Nr,ga),Nr.prototype[Rd]=!0,Nr.prototype.removeEventListener=function(n,e,t,s){Lg(this,n,e,t,s)},Nr.prototype.M=function(){if(Nr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],s=0;s<t.length;s++)So(t[s]);delete n.g[e],n.h--}}this.I=null},Nr.prototype.N=function(n,e,t,s){return this.i.add(String(n),e,!1,t,s)},Nr.prototype.O=function(n,e,t,s){return this.i.add(String(n),e,!0,t,s)};var Pd=Rt.JSON.stringify;function xC(){var n=as;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Bg,NC=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Aw,n=>n.reset());class Aw{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Sw(n){Rt.setTimeout(()=>{throw n},0)}function k_(n,e){Bg||function(){var n=Rt.Promise.resolve(void 0);Bg=function(){n.then(MC)}}(),F_||(Bg(),F_=!0),as.add(n,e)}var F_=!1,as=new class{constructor(){this.h=this.g=null}add(e,t){const s=NC.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function MC(){for(var n;n=xC();){try{n.h.call(n.g)}catch(t){Sw(t)}var e=NC;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}F_=!1}function jg(n,e){Nr.call(this),this.h=n||1,this.g=e||Rt,this.j=Mn(this.kb,this),this.l=Date.now()}function Rw(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function xw(n,e,t){if("function"==typeof n)t&&(n=Mn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Mn(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function L_(n){n.g=xw(()=>{n.g=null,n.i&&(n.i=!1,L_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ci(jg,Nr),(rt=jg.prototype).da=!1,rt.S=null,rt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ur(this,"tick"),this.da&&(Rw(this),this.start()))}},rt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){jg.Z.M.call(this),Rw(this),delete this.g};class eR extends ga{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:L_(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xf(n){ga.call(this),this.h=n,this.g={}}ci(xf,ga);var $g=[];function V_(n,e,t,s){Array.isArray(t)||(t&&($g[0]=t.toString()),t=$g);for(var u=0;u<t.length;u++){var l=bw(e,t[u],s||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function Nw(n){b_(n.g,function(e,t){this.g.hasOwnProperty(t)&&Wu(e)},n),n.g={}}function Hg(){this.g=!0}function Md(n,e,t,s){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var s=t[n];if(!(2>s.length)){var u=s[1];if(Array.isArray(u)&&!(1>u.length)){var l=u[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var f=1;f<u.length;f++)u[f]=""}}}return Pd(t)}catch(y){return e}}(n,t)+(s?" "+s:"")})}xf.prototype.M=function(){xf.Z.M.call(this),Nw(this)},xf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hg.prototype.Aa=function(){this.g=!1},Hg.prototype.info=function(){};var tl={},U_=null;function Nf(){return U_=U_||new Nr}function Ow(n){xi.call(this,tl.Ma,n)}function us(n){const e=Nf();Ur(e,new Ow(e,n))}function Gg(n,e){xi.call(this,tl.STAT_EVENT,n),this.stat=e}function Wi(n){const e=Nf();Ur(e,new Gg(e,n))}function kw(n,e){xi.call(this,tl.Na,n),this.size=e}function Wg(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}tl.Ma="serverreachability",ci(Ow,xi),tl.STAT_EVENT="statevent",ci(Gg,xi),tl.Na="timingevent",ci(kw,xi);var Pf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Fw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function B_(){}function zg(){}B_.prototype.h=null;var Of,Mf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function j_(){xi.call(this,"d")}function Od(){xi.call(this,"c")}function qg(){}function nl(n,e,t,s){this.l=n,this.j=e,this.m=t,this.X=s||1,this.V=new xf(this),this.P=Vw,this.W=new jg(n=A_?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Kg}function Kg(){this.i=null,this.g="",this.h=!1}ci(j_,xi),ci(Od,xi),ci(qg,B_),qg.prototype.g=function(){return new XMLHttpRequest},qg.prototype.i=function(){return{}},Of=new qg;var Vw=45e3,$_={},Zg={};function kf(n,e,t){n.K=1,n.v=em(_a(e)),n.s=t,n.U=!0,FC(n,null)}function FC(n,e){n.F=Date.now(),kd(n),n.A=_a(n.v);var t=n.A,s=n.X;Array.isArray(s)||(s=[String(s)]),nm(t.h,"t",s),n.C=0,t=n.l.H,n.h=new Kg,n.g=Wd(n.l,t?e:null,!n.s),0<n.O&&(n.L=new eR(Mn(n.Ia,n,n.g),n.O)),V_(n.V,n.g,"readystatechange",n.gb),e=n.H?yw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),us(1),function(n,e,t,s,u,l){n.info(function(){if(n.g)if(l)for(var f="",y=l.split("&"),I=0;I<y.length;I++){var S=y[I].split("=");if(1<S.length){var M=S[0];S=S[1];var F=M.split("_");f=2<=F.length&&"type"==F[1]?f+(M+"=")+S+"&":f+(M+"=redacted&")}}else f=null;else f=l;return"XMLHTTP REQ ("+s+") [attempt "+u+"]: "+e+"\n"+t+"\n"+f})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Uw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function H_(n,e,t){let u,s=!0;for(;!n.I&&n.C<t.length;){if(u=Bw(n,t),u==Zg){4==e&&(n.o=4,Wi(14),s=!1),Md(n.j,n.m,null,"[Incomplete Response]");break}if(u==$_){n.o=4,Wi(15),Md(n.j,n.m,t,"[Invalid Chunk]"),s=!1;break}Md(n.j,n.m,u,null),W_(n,u)}Uw(n)&&u!=Zg&&u!=$_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Wi(16),s=!1),n.i=n.i&&s,s?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Hd(e),e.L=!0,Wi(11))):(Md(n.j,n.m,t,"[Invalid Chunked Response]"),ma(n),Ts(n))}function Bw(n,e){var t=n.C,s=e.indexOf("\n",t);return-1==s?Zg:(t=Number(e.substring(t,s)),isNaN(t)?$_:(s+=1)+t>e.length?Zg:(e=e.substr(s,t),n.C=s+t,e))}function kd(n){n.Y=Date.now()+n.P,G_(n,n.P)}function G_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Wg(Mn(n.eb,n),e)}function Ff(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function Ts(n){0==n.l.G||n.I||Gd(n.l,n)}function ma(n){Ff(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Rw(n.W),Nw(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function W_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||rm(t.i,n)))if(t.I=n.N,!n.J&&rm(t.i,n)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(S){s=null}if(Array.isArray(s)&&3==s.length){var u=s;if(0==u[0])e:if(t.u)t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=Wg(Mn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Hf(t),jf(t)}sv(t),Wi(18)}if(1>=Y_(t.i)&&t.ka){try{t.ka()}catch(S){}t.ka=void 0}}else ol(t,11)}else if((n.J||t.g==n)&&Hf(t),!Jc(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let S=u[e];if(t.U=S[0],S=S[1],2==t.G)if("c"==S[0]){t.J=S[1],t.la=S[2];const M=S[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const F=S[4];null!=F&&(t.za=F,t.h.info("SVER="+t.za));const Z=S[5];null!=Z&&"number"==typeof Z&&0<Z&&(t.K=s=1.5*Z,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;const J=n.g;if(J){const Ae=J.g?J.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ae){var l=s.i;!l.g&&(li(Ae,"spdy")||li(Ae,"quic")||li(Ae,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(im(l,l.h),l.h=null))}if(s.D){const Ye=J.g?J.g.getResponseHeader("X-HTTP-Session-Id"):null;Ye&&(s.sa=Ye,Qn(s.F,s.D,Ye))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var f=n;if((s=t).oa=xo(s,s.H?s.la:null,s.W),f.J){Gw(s.i,f);var y=f,I=s.K;I&&y.setTimeout(I),y.B&&(Ff(y),kd(y)),s.g=f}else nI(s);0<t.l.length&&$d(t)}else"stop"!=S[0]&&"close"!=S[0]||ol(t,7);else 3==t.G&&("stop"==S[0]||"close"==S[0]?"stop"==S[0]?ol(t,7):Xw(t):"noop"!=S[0]&&t.j&&t.j.wa(S),t.A=0)}us(4)}catch(S){}}function jw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(v_(n)||"string"==typeof n)Og(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(v_(n)||"string"==typeof n){t=[];for(var s=n.length,u=0;u<s;u++)t.push(u)}else for(u in t=[],s=0,n)t[s++]=u;s=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(v_(n)){for(var e=[],t=n.length,s=0;s<t;s++)e.push(n[s]);return e}for(s in e=[],t=0,n)e[t++]=n[s];return e}(n),u=s.length;for(var l=0;l<u;l++)e.call(void 0,s[l],t&&t[l],n)}}function ya(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(n)if(n instanceof ya)for(t=n.T(),s=0;s<t.length;s++)this.set(t[s],n.get(t[s]));else for(s in n)this.set(s,n[s])}function Yg(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var s=n.g[e];Ro(n.h,s)&&(n.g[t++]=s),e++}n.g.length=t}if(n.i!=n.g.length){var u={};for(t=e=0;e<n.g.length;)Ro(u,s=n.g[e])||(n.g[t++]=s,u[s]=1),e++;n.g.length=t}}function Ro(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(rt=nl.prototype).setTimeout=function(n){this.P=n},rt.gb=function(n){n=n.target;const e=this.L;e&&3==qu(n)?e.l():this.Ia(n)},rt.Ia=function(n){try{if(n==this.g)e:{const M=qu(this.g);var e=this.g.Da();const F=this.g.ba();if(!(3>M)&&(3!=M||A_||this.g&&(this.h.h||this.g.ga()||zC(this.g)))){this.I||4!=M||7==e||us(8==e||0>=F?3:2),Ff(this);var t=this.g.ba();this.N=t;t:if(Uw(this)){var s=zC(this.g);n="";var u=s.length,l=4==qu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ma(this),Ts(this);var f="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,n+=this.h.i.decode(s[e],{stream:l&&e==u-1});s.splice(0,u),this.h.g+=n,this.C=0,f=this.h.g}else f=this.g.ga();if(this.i=200==t,function(n,e,t,s,u,l,f){n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+l+" "+f})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var y,I=this.g;if((y=I.g?I.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jc(y)){var S=y;break t}}S=null}if(!(t=S)){this.i=!1,this.o=3,Wi(12),ma(this),Ts(this);break e}Md(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,W_(this,t)}this.U?(H_(this,M,f),A_&&this.i&&3==M&&(V_(this.V,this.W,"tick",this.fb),this.W.start())):(Md(this.j,this.m,f,null),W_(this,f)),4==M&&ma(this),this.i&&!this.I&&(4==M?Gd(this.l,this):(this.i=!1,kd(this)))}else 400==t&&0<f.indexOf("Unknown SID")?(this.o=3,Wi(12)):(this.o=0,Wi(13)),ma(this),Ts(this)}}}catch(M){}},rt.fb=function(){if(this.g){var n=qu(this.g),e=this.g.ga();this.C<e.length&&(Ff(this),H_(this,n,e),this.i&&4!=n&&kd(this))}},rt.cancel=function(){this.I=!0,ma(this)},rt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(us(3),Wi(17)),ma(this),this.o=2,Ts(this)):G_(this,this.Y-n)},(rt=ya.prototype).R=function(){Yg(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},rt.T=function(){return Yg(this),this.g.concat()},rt.get=function(n,e){return Ro(this.h,n)?this.h[n]:e},rt.set=function(n,e){Ro(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},rt.forEach=function(n,e){for(var t=this.T(),s=0;s<t.length;s++){var u=t[s],l=this.get(u);n.call(e,l,u,this)}};var Fd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof tu){this.g=void 0!==e?e:n.g,Qg(this,n.j),this.s=n.s,Lf(this,n.i),Jg(this,n.m),this.l=n.l,e=n.h;var t=new tm;t.i=e.i,e.g&&(t.g=new ya(e.g),t.h=e.h),Xg(this,t),this.o=n.o}else n&&(t=String(n).match(Fd))?(this.g=!!e,Qg(this,t[1]||"",!0),this.s=Vd(t[2]||""),Lf(this,t[3]||"",!0),Jg(this,t[4]),this.l=Vd(t[5]||"",!0),Xg(this,t[6]||"",!0),this.o=Vd(t[7]||"")):(this.g=!!e,this.h=new tm(null,this.g))}function _a(n){return new tu(n)}function Qg(n,e,t){n.j=t?Vd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Lf(n,e,t){n.i=t?Vd(e,!0):e}function Jg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Xg(n,e,t){e instanceof tm?(n.h=e,function(n,e){e&&!n.j&&(zu(n),n.i=null,n.g.forEach(function(t,s){var u=s.toLowerCase();s!=u&&(z_(this,s),nm(this,u,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Vf(e,$C)),n.h=new tm(e,n.g))}function Qn(n,e,t){n.h.set(e,t)}function em(n){return Qn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Vd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Vf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,UC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function UC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}tu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Vf(e,rl,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Vf(e,rl,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Vf(t,"/"==t.charAt(0)?jC:BC,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Vf(t,HC)),n.join("")};var rl=/[#\/\?@]/g,BC=/[#\?:]/g,jC=/[#\?]/g,$C=/[#\?@]/g,HC=/#/g;function tm(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function zu(n){n.g||(n.g=new ya,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var s=n[t].indexOf("="),u=null;if(0<=s){var l=n[t].substring(0,s);u=n[t].substring(s+1)}else l=n[t];e(l,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function z_(n,e){zu(n),e=cs(n,e),Ro(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ro((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Yg(n)))}function Bn(n,e){return zu(n),e=cs(n,e),Ro(n.g.h,e)}function nm(n,e,t){z_(n,e),0<t.length&&(n.i=null,n.g.set(cs(n,e),gw(t)),n.h+=t.length)}function cs(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Hw(n){this.l=n||GC,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ea&&Rt.g.Ea()&&Rt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=tm.prototype).add=function(n,e){zu(this),this.i=null,n=cs(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){zu(this),this.g.forEach(function(t,s){Og(t,function(u){n.call(e,u,s,this)},this)},this)},rt.T=function(){zu(this);for(var n=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var u=n[s],l=0;l<u.length;l++)t.push(e[s]);return t},rt.R=function(n){zu(this);var e=[];if("string"==typeof n)Bn(this,n)&&(e=D_(e,this.g.get(cs(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=D_(e,n[t])}return e},rt.set=function(n,e){return zu(this),this.i=null,Bn(this,n=cs(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],u=encodeURIComponent(String(s));s=this.R(s);for(var l=0;l<s.length;l++){var f=u;""!==s[l]&&(f+="="+encodeURIComponent(String(s[l]))),n.push(f)}}return this.i=n.join("&")};var GC=10;function Z_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Y_(n){return n.h?1:n.g?n.g.size:0}function rm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function im(n,e){n.g?n.g.add(e):n.h=e}function Gw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Ww(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return gw(n.i)}function il(){}function Q_(){this.g=new il}function zw(n,e,t){const s=t||"";try{jw(n,function(u,l){let f=u;If(u)&&(f=Pd(u)),e.push(s+l+"="+encodeURIComponent(f))})}catch(u){throw e.push(s+"type="+encodeURIComponent("_badmap")),u}}function Uf(n,e,t,s,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(s)}catch(l){}}function Ud(n){this.l=n.$b||null,this.j=n.ib||!1}function sm(n,e){Nr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=J_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Hw.prototype.cancel=function(){if(this.i=Ww(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},il.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},il.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},ci(Ud,B_),Ud.prototype.g=function(){return new sm(this.l,this.j)},Ud.prototype.i=function(n){return function(){return n}}({}),ci(sm,Nr);var J_=0;function Kw(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Bf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Bd(n)}function Bd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=sm.prototype).open=function(n,e){if(this.readyState!=J_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Bd(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bf(this)),this.readyState=J_},rt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Bd(this)),this.g&&(this.readyState=3,Bd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Rt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Kw(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},rt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Bf(this):Bd(this),3==this.readyState&&Kw(this)}},rt.Ua=function(n){this.g&&(this.response=this.responseText=n,Bf(this))},rt.Ta=function(n){this.g&&(this.response=n,Bf(this))},rt.ha=function(){this.g&&Bf(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(sm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var tR=Rt.JSON.parse;function Er(n){Nr.call(this),this.headers=new ya,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Zw,this.K=this.L=!1}ci(Er,Nr);var Zw="",WC=/^https?$/i,nR=["POST","PUT"];function X_(n){return"content-type"==n.toLowerCase()}function Yw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ev(n),nv(n)}function ev(n){n.D||(n.D=!0,Ur(n,"complete"),Ur(n,"error"))}function tv(n){if(n.h&&void 0!==__&&(!n.C[1]||4!=qu(n)||2!=n.ba()))if(n.v&&4==qu(n))xw(n.Fa,0,n);else if(Ur(n,"readystatechange"),4==qu(n)){n.h=!1;try{const y=n.ba();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===y){var u=String(n.H).match(Fd)[1]||null;if(!u&&Rt.self&&Rt.self.location){var l=Rt.self.location.protocol;u=l.substr(0,l.length-1)}s=!WC.test(u?u.toLowerCase():"")}t=s}if(t)Ur(n,"complete"),Ur(n,"success");else{n.m=6;try{var f=2<qu(n)?n.g.statusText:""}catch(I){f=""}n.j=f+" ["+n.ba()+"]",ev(n)}}finally{nv(n)}}}function nv(n,e){if(n.g){Zs(n);const t=n.g,s=n.C[0]?Pg:null;n.g=null,n.C=null,e||Ur(n,"ready");try{t.onreadystatechange=s}catch(u){}}}function Zs(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function qu(n){return n.g?n.g.readyState:0}function zC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Zw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function om(n,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function(n){let e="";return b_(n,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Qn(n,e,t))}function jd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Jw(n){this.za=0,this.l=[],this.h=new Hg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=jd("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=jd("baseRetryDelayMs",5e3,n),this.$a=jd("retryDelaySeedMs",1e4,n),this.Ya=jd("forwardChannelMaxRetries",2,n),this.ra=jd("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Hw(n&&n.concurrentRequestLimit),this.Ca=new Q_,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Xw(n){if(rv(n),3==n.G){var e=n.V++,t=_a(n.F);Qn(t,"SID",n.J),Qn(t,"RID",e),Qn(t,"TYPE","terminate"),$f(n,t),(e=new nl(n,n.h,e,void 0)).K=2,e.v=em(_a(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Wd(e.l,null),e.g.ea(e.v)),e.F=Date.now(),kd(e)}am(n)}function jf(n){n.g&&(Hd(n),n.g.cancel(),n.g=null)}function rv(n){jf(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),Hf(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function iv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&$d(n)}function $d(n){Z_(n.i)||n.m||(n.m=!0,k_(n.Ha,n),n.C=0)}function eI(n,e){var t;t=e?e.m:n.V++;const s=_a(n.F);Qn(s,"SID",n.J),Qn(s,"RID",t),Qn(s,"AID",n.U),$f(n,s),n.o&&n.s&&om(s,n.o,n.s),t=new nl(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=tI(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),im(n.i,t),kf(t,s,e)}function $f(n,e){n.j&&jw({},function(t,s){Qn(e,s,t)})}function tI(n,e,t){t=Math.min(n.l.length,t);var s=n.j?Mn(n.j.Oa,n.j,n):null;e:{var u=n.l;let l=-1;for(;;){const f=["count="+t];-1==l?0<t?(l=u[0].h,f.push("ofs="+l)):l=0:f.push("ofs="+l);let y=!0;for(let I=0;I<t;I++){let S=u[I].h;const M=u[I].g;if(S-=l,0>S)l=Math.max(0,u[I].h-100),y=!1;else try{zw(M,f,"req"+S+"_")}catch(F){s&&s(M)}}if(y){s=f.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,s}function nI(n){n.g||n.u||(n.Y=1,k_(n.Ga,n),n.A=0)}function sv(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Wg(Mn(n.Ga,n),rI(n,n.A)),n.A++,0))}function Hd(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function sl(n){n.g=new nl(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=_a(n.oa);Qn(e,"RID","rpc"),Qn(e,"SID",n.J),Qn(e,"CI",n.N?"0":"1"),Qn(e,"AID",n.U),$f(n,e),Qn(e,"TYPE","xmlhttp"),n.o&&n.s&&om(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=em(_a(e)),t.s=null,t.U=!0,FC(t,n)}function Hf(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function Gd(n,e){var t=null;if(n.g==e){Hf(n),Hd(n),n.g=null;var s=2}else{if(!rm(n.i,e))return;t=e.D,Gw(n.i,e),s=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=n.C;Ur(s=Nf(),new kw(s,t,e,u)),$d(n)}else nI(n);else if(3==(u=e.o)||0==u&&0<n.I||!(1==s&&function(n,e){return!(Y_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Wg(Mn(n.Ha,n,e),rI(n,n.C)),n.C++,0)))}(n,e)||2==s&&sv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),u){case 1:ol(n,5);break;case 4:ol(n,10);break;case 3:ol(n,6);break;default:ol(n,2)}}function rI(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function ol(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var s=Mn(n.jb,n);t||(t=new tu("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||Qg(t,"https"),em(t)),function(n,e){const t=new Hg;if(Rt.Image){const s=new Image;s.onload=Df(Uf,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Df(Uf,t,s,"TestLoadImage: error",!1,e),s.onabort=Df(Uf,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Df(Uf,t,s,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=n}else e(!1)}(t.toString(),s)}else Wi(2);n.G=0,n.j&&n.j.va(e),am(n),rv(n)}function am(n){n.G=0,n.I=-1,n.j&&((0!=Ww(n.i).length||0!=n.l.length)&&(n.i.i.length=0,gw(n.l),n.l.length=0),n.j.ua())}function xo(n,e,t){let s=function(n){return n instanceof tu?_a(n):new tu(n,void 0)}(t);if(""!=s.i)e&&Lf(s,e+"."+s.i),Jg(s,s.m);else{const u=Rt.location;s=function(n,e,t,s){var u=new tu(null,void 0);return n&&Qg(u,n),e&&Lf(u,e),t&&Jg(u,t),s&&(u.l=s),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return n.aa&&b_(n.aa,function(u,l){Qn(s,l,u)}),t=n.sa,(e=n.D)&&t&&Qn(s,e,t),Qn(s,"VER",n.ma),$f(n,s),s}function Wd(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Er(t&&n.Ba&&!n.qa?new Ud({ib:!0}):n.qa)).L=n.H,e}function hi(){}function va(){if(Xc&&!(10<=Number(Gu)))throw Error("Environmental error: no available transport.")}function Ni(n,e){Nr.call(this),this.g=new Jw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Jc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jc(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new No(this)}function As(n){j_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function um(){Od.call(this),this.status=1}function No(n){this.g=n}(rt=Er.prototype).ea=function(n,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Of.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Of),this.g.onreadystatechange=Mn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void Yw(this,l)}n=t||"";const u=new ya(this.headers);s&&jw(s,function(l,f){u.set(f,l)}),s=function(n){e:{var e=X_;const t=n.length,s="string"==typeof n?n.split(""):n;for(let u=0;u<t;u++)if(u in s&&e.call(void 0,s[u],u,n)){e=u;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(u.T()),t=Rt.FormData&&n instanceof Rt.FormData,!(0<=I_(nR,e))||s||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(l,f){this.g.setRequestHeader(f,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Zs(this),0<this.B&&((this.K=function(n){return Xc&&XS()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mn(this.pa,this)):this.A=xw(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Yw(this,l)}},rt.pa=function(){void 0!==__&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ur(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ur(this,"complete"),Ur(this,"abort"),nv(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nv(this,!0)),Er.Z.M.call(this)},rt.Fa=function(){this.s||(this.F||this.v||this.l?tv(this):this.cb())},rt.cb=function(){tv(this)},rt.ba=function(){try{return 2<qu(this)?this.g.status:-1}catch(n){return-1}},rt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},rt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),tR(e)}},rt.Da=function(){return this.m},rt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=Jw.prototype).ma=8,rt.G=1,rt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},rt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const u=new nl(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=yw(l),C_(l,this.P)):l=this.P),null===this.o&&(u.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var s=this.l[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=tI(this,u,e),Qn(t=_a(this.F),"RID",n),Qn(t,"CVER",22),this.D&&Qn(t,"X-HTTP-Session-Id",this.D),$f(this,t),this.o&&l&&om(t,this.o,l),im(this.i,u),this.Ra&&Qn(t,"TYPE","init"),this.ja?(Qn(t,"$req",e),Qn(t,"SID","null"),u.$=!0,kf(u,t,null)):kf(u,t,e),this.G=2}}else 3==this.G&&(n?eI(this,n):0==this.l.length||Z_(this.i)||eI(this))},rt.Ga=function(){if(this.u=null,sl(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Wg(Mn(this.bb,this),n)}},rt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Wi(10),jf(this),sl(this))},rt.ab=function(){null!=this.v&&(this.v=null,jf(this),sv(this),Wi(19))},rt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Wi(2)):(this.h.info("Failed to ping google.com"),Wi(1))},(rt=hi.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Oa=function(){},va.prototype.g=function(n,e){return new Ni(n,e)},ci(Ni,Nr),Ni.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),k_(Mn(n.hb,n,e))),Wi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=xo(n,null,n.W),$d(n)},Ni.prototype.close=function(){Xw(this.g)},Ni.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,iv(this.g,e)}else this.v?((e={}).__data__=Pd(n),iv(this.g,e)):iv(this.g,n)},Ni.prototype.M=function(){this.g.j=null,delete this.j,Xw(this.g),delete this.g,Ni.Z.M.call(this)},ci(As,j_),ci(um,Od),ci(No,hi),No.prototype.xa=function(){Ur(this.g,"a")},No.prototype.wa=function(n){Ur(this.g,new As(n))},No.prototype.va=function(n){Ur(this.g,new um(n))},No.prototype.ua=function(){Ur(this.g,"b")},va.prototype.createWebChannel=va.prototype.g,Ni.prototype.send=Ni.prototype.u,Ni.prototype.open=Ni.prototype.m,Ni.prototype.close=Ni.prototype.close,Pf.NO_ERROR=0,Pf.TIMEOUT=8,Pf.HTTP_ERROR=6,Fw.COMPLETE="complete",zg.EventType=Mf,Mf.OPEN="a",Mf.CLOSE="b",Mf.ERROR="c",Mf.MESSAGE="d",Nr.prototype.listen=Nr.prototype.N,Er.prototype.listenOnce=Er.prototype.O,Er.prototype.getLastError=Er.prototype.La,Er.prototype.getLastErrorCode=Er.prototype.Da,Er.prototype.getStatus=Er.prototype.ba,Er.prototype.getResponseJson=Er.prototype.Qa,Er.prototype.getResponseText=Er.prototype.ga,Er.prototype.send=Er.prototype.ea;var zd=Xa.createWebChannelTransport=function(){return new va},qd=Xa.getStatEventTarget=function(){return Nf()},Ku=Xa.ErrorCode=Pf,Kd=Xa.EventType=Fw,Zd=Xa.Event=tl,al=Xa.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Yd=Xa.FetchXmlHttpFactory=Ud,nu=Xa.WebChannel=zg,iI=Xa.XhrIo=Er;const ov="@firebase/firestore";class Yr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yr.UNAUTHENTICATED=new Yr(null),Yr.GOOGLE_CREDENTIALS=new Yr("google-credentials-uid"),Yr.FIRST_PARTY=new Yr("first-party-uid"),Yr.MOCK_USER=new Yr("mock-user");let ul="9.5.0";const ru=new Zr.Yd("@firebase/firestore");function cm(){return ru.logLevel}function je(n,...e){if(ru.logLevel<=Zr.in.DEBUG){const t=e.map(av);ru.debug(`Firestore (${ul}): ${n}`,...t)}}function wr(n,...e){if(ru.logLevel<=Zr.in.ERROR){const t=e.map(av);ru.error(`Firestore (${ul}): ${n}`,...t)}}function Gf(n,...e){if(ru.logLevel<=Zr.in.WARN){const t=e.map(av);ru.warn(`Firestore (${ul}): ${n}`,...t)}}function av(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${ul}) INTERNAL ASSERTION FAILED: `+n;throw wr(e),new Error(e)}function It(n,e){n||ct()}function Qe(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class uv{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class KC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yr.UNAUTHENTICATED))}shutdown(){}}class ZC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class YC{constructor(e){this.t=e,this.currentUser=Yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let u=this.i;const l=S=>this.i!==u?(u=this.i,t(S)):Promise.resolve();let f=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Qr,e.enqueueRetryable(()=>l(this.currentUser))};const y=()=>{const S=f;e.enqueueRetryable((0,Ee.Z)(function*(){yield S.promise,yield l(s.currentUser)}))},I=S=>{je("FirebaseCredentialsProvider","Auth detected"),this.auth=S,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(S=>I(S)),setTimeout(()=>{if(!this.auth){const S=this.t.getImmediate({optional:!0});S?I(S):(je("FirebaseCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Qr)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(je("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(It("string"==typeof s.accessToken),new uv(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new Yr(e)}}class aI{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=Yr.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class iR{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new aI(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Yr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ys{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.g(s),this.p=s=>t.writeSequenceNumber(s))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function QC(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}Ys.T=-1;class JC{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const u=QC(40);for(let l=0;l<u.length;++l)s.length<20&&u[l]<t&&(s+=e.charAt(u[l]%e.length))}return s}}function Zt(n,e){return n<e?-1:n>e?1:0}function Qd(n,e,t){return n.length===e.length&&n.every((s,u)=>t(s,e[u]))}function lm(n){return n+"\0"}class Pr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pr.fromMillis(Date.now())}static fromDate(e){return Pr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Pr(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ft(e)}static min(){return new Ft(new Pr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function XC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Wf{constructor(e,t,s){void 0===t?t=0:t>e.length&&ct(),void 0===s?s=e.length-t:s>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Wf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wf?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let u=0;u<s;u++){const l=e.get(u),f=t.get(u);if(l<f)return-1;if(l>f)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fn extends Wf{construct(e,t,s){return new fn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Me(pe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(u=>u.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const sR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fi extends Wf{construct(e,t,s){return new fi(e,t,s)}static isValidIdentifier(e){return sR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fi(["__name__"])}static fromServerFormat(e){const t=[];let s="",u=0;const l=()=>{if(0===s.length)throw new Me(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let f=!1;for(;u<e.length;){const y=e[u];if("\\"===y){if(u+1===e.length)throw new Me(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const I=e[u+1];if("\\"!==I&&"."!==I&&"`"!==I)throw new Me(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=I,u+=2}else"`"===y?(f=!f,u++):"."!==y||f?(s+=y,u++):(l(),u++)}if(l(),f)throw new Me(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fi(t)}static emptyPath(){return new fi([])}}class Po{constructor(e){this.fields=e,e.sort(fi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qd(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Br(t)}static fromUint8Array(e){const t=function(s){let u="";for(let l=0;l<s.length;++l)u+=String.fromCharCode(s[l]);return u}(e);return new Br(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Br.EMPTY_BYTE_STRING=new Br("");const nT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function iu(n){if(It(!!n),"string"==typeof n){let e=0;const t=nT.exec(n);if(It(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:rr(n.seconds),nanos:rr(n.nanos)}}function rr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xd(n){return"string"==typeof n?Br.fromBase64String(n):Br.fromUint8Array(n)}function dm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function uI(n){const e=n.mapValue.fields.__previous_value__;return dm(e)?uI(e):e}function zf(n){const e=iu(n.mapValue.fields.__local_write_time__.timestampValue);return new Pr(e.seconds,e.nanos)}function cl(n){return null==n}function hm(n){return 0===n&&1/n==-1/0}function cI(n){return"number"==typeof n&&Number.isInteger(n)&&!hm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class st{constructor(e){this.path=e}static fromPath(e){return new st(fn.fromString(e))}static fromName(e){return new st(fn.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new st(new fn(e.slice()))}}function ll(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dm(n)?4:10:ct()}function Mo(n,e){const t=ll(n);if(t!==ll(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zf(n).isEqual(zf(e));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const l=iu(s.timestampValue),f=iu(u.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return u=e,Xd(n.bytesValue).isEqual(Xd(u.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,u){return rr(s.geoPointValue.latitude)===rr(u.geoPointValue.latitude)&&rr(s.geoPointValue.longitude)===rr(u.geoPointValue.longitude)}(n,e);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return rr(s.integerValue)===rr(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const l=rr(s.doubleValue),f=rr(u.doubleValue);return l===f?hm(l)===hm(f):isNaN(l)&&isNaN(f)}return!1}(n,e);case 9:return Qd(n.arrayValue.values||[],e.arrayValue.values||[],Mo);case 10:return function(s,u){const l=s.mapValue.fields||{},f=u.mapValue.fields||{};if(XC(l)!==XC(f))return!1;for(const y in l)if(l.hasOwnProperty(y)&&(void 0===f[y]||!Mo(l[y],f[y])))return!1;return!0}(n,e);default:return ct()}var u}function eh(n,e){return void 0!==(n.values||[]).find(t=>Mo(t,e))}function Zu(n,e){const t=ll(n),s=ll(e);if(t!==s)return Zt(t,s);switch(t){case 0:return 0;case 1:return Zt(n.booleanValue,e.booleanValue);case 2:return function(u,l){const f=rr(u.integerValue||u.doubleValue),y=rr(l.integerValue||l.doubleValue);return f<y?-1:f>y?1:f===y?0:isNaN(f)?isNaN(y)?0:-1:1}(n,e);case 3:return rT(n.timestampValue,e.timestampValue);case 4:return rT(zf(n),zf(e));case 5:return Zt(n.stringValue,e.stringValue);case 6:return function(u,l){const f=Xd(u),y=Xd(l);return f.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(u,l){const f=u.split("/"),y=l.split("/");for(let I=0;I<f.length&&I<y.length;I++){const S=Zt(f[I],y[I]);if(0!==S)return S}return Zt(f.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(u,l){const f=Zt(rr(u.latitude),rr(l.latitude));return 0!==f?f:Zt(rr(u.longitude),rr(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(u,l){const f=u.values||[],y=l.values||[];for(let I=0;I<f.length&&I<y.length;++I){const S=Zu(f[I],y[I]);if(S)return S}return Zt(f.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(u,l){const f=u.fields||{},y=Object.keys(f),I=l.fields||{},S=Object.keys(I);y.sort(),S.sort();for(let M=0;M<y.length&&M<S.length;++M){const F=Zt(y[M],S[M]);if(0!==F)return F;const Z=Zu(f[y[M]],I[S[M]]);if(0!==Z)return Z}return Zt(y.length,S.length)}(n.mapValue,e.mapValue);default:throw ct()}}function rT(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Zt(n,e);const t=iu(n),s=iu(e),u=Zt(t.seconds,s.seconds);return 0!==u?u:Zt(t.nanos,s.nanos)}function qf(n){return cv(n)}function cv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(s){const u=iu(s);return`time(${u.seconds},${u.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xd(n.bytesValue).toBase64():"referenceValue"in n?st.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(s){let u="[",l=!0;for(const f of s.values||[])l?l=!1:u+=",",u+=cv(f);return u+"]"}(n.arrayValue):"mapValue"in n?function(s){const u=Object.keys(s.fields||{}).sort();let l="{",f=!0;for(const y of u)f?f=!1:l+=",",l+=`${y}:${cv(s.fields[y])}`;return l+"}"}(n.mapValue):ct();var e}function lv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function dl(n){return!!n&&"integerValue"in n}function fm(n){return!!n&&"arrayValue"in n}function dv(n){return!!n&&"nullValue"in n}function pm(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gm(n){return!!n&&"mapValue"in n}function hl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Jd(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=hl(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hl(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Jr{constructor(e){this.value=e}static empty(){return new Jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!gm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hl(t)}setAll(e){let t=fi.emptyPath(),s={},u=[];e.forEach((f,y)=>{if(!t.isImmediateParentOf(y)){const I=this.getFieldsMap(t);this.applyChanges(I,s,u),s={},u=[],t=y.popLast()}f?s[y.lastSegment()]=hl(f):u.push(y.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,u)}delete(e){const t=this.field(e.popLast());gm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=t.mapValue.fields[e.get(s)];gm(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,s){Jd(t,(u,l)=>e[u]=l);for(const u of s)delete e[u]}clone(){return new Jr(hl(this.value))}}function hv(n){const e=[];return Jd(n.fields,(t,s)=>{const u=new fi([t]);if(gm(s)){const l=hv(s.mapValue).fields;if(0===l.length)e.push(u);else for(const f of l)e.push(u.child(f))}else e.push(u)}),new Po(e)}class ir{constructor(e,t,s,u,l){this.key=e,this.documentType=t,this.version=s,this.data=u,this.documentState=l}static newInvalidDocument(e){return new ir(e,0,Ft.min(),Jr.empty(),0)}static newFoundDocument(e,t,s){return new ir(e,1,t,s,0)}static newNoDocument(e,t){return new ir(e,2,t,Jr.empty(),0)}static newUnknownDocument(e,t){return new ir(e,3,t,Jr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new ir(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class iT{constructor(e,t=null,s=[],u=[],l=null,f=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=u,this.limit=l,this.startAt=f,this.endAt=y,this.A=null}}function fv(n,e=null,t=[],s=[],u=null,l=null,f=null){return new iT(n,e,t,s,u,l,f)}function th(n){const e=Qe(n);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>function(n){return n.field.canonicalString()+n.op.toString()+qf(n.value)}(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(u=s).field.canonicalString()+u.dir;var u}).join(","),cl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=ym(e.startAt)),e.endAt&&(t+="|ub:",t+=ym(e.endAt)),e.A=t}return e.A}function mm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<n.orderBy.length;u++)if(!_v(n.orderBy[u],e.orderBy[u]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let u=0;u<n.filters.length;u++)if((t=n.filters[u]).op!==(s=e.filters[u]).op||!t.field.isEqual(s.field)||!Mo(t.value,s.value))return!1;var t,s;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ev(n.startAt,e.startAt)&&Ev(n.endAt,e.endAt)}function nh(n){return st.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Pi extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,s):new gv(e,t,s):"array-contains"===t?new dI(e,s):"in"===t?new yv(e,s):"not-in"===t?new aT(e,s):"array-contains-any"===t?new uT(e,s):new Pi(e,t,s)}static R(e,t,s){return"in"===t?new lI(e,s):new oT(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(Zu(t,this.value)):null!==t&&ll(this.value)===ll(t)&&this.P(Zu(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class gv extends Pi{constructor(e,t,s){super(e,t,s),this.key=st.fromName(s.referenceValue)}matches(e){const t=st.comparator(e.key,this.key);return this.P(t)}}class lI extends Pi{constructor(e,t){super(e,"in",t),this.keys=mv(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oT extends Pi{constructor(e,t){super(e,"not-in",t),this.keys=mv(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mv(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>st.fromName(s.referenceValue))}class dI extends Pi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fm(t)&&eh(t.arrayValue,this.value)}}class yv extends Pi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&eh(this.value.arrayValue,t)}}class aT extends Pi{constructor(e,t){super(e,"not-in",t)}matches(e){if(eh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!eh(this.value.arrayValue,t)}}class uT extends Pi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>eh(this.value.arrayValue,s))}}class Kf{constructor(e,t){this.position=e,this.before=t}}function ym(n){return`${n.before?"b":"a"}:${n.position.map(e=>qf(e)).join(",")}`}class fl{constructor(e,t="asc"){this.field=e,this.dir=t}}function _v(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function vv(n,e,t){let s=0;for(let u=0;u<n.position.length;u++){const l=e[u],f=n.position[u];if(s=l.field.isKeyField()?st.comparator(st.fromName(f.referenceValue),t.key):Zu(f,t.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return n.before?s<=0:s<0}function Ev(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mo(n.position[t],e.position[t]))return!1;return!0}class Ea{constructor(e,t=null,s=[],u=[],l=null,f="F",y=null,I=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=u,this.limit=l,this.limitType=f,this.startAt=y,this.endAt=I,this.V=null,this.S=null}}function wv(n,e,t,s,u,l,f,y){return new Ea(n,e,t,s,u,l,f,y)}function pl(n){return new Ea(n)}function Zf(n){return!cl(n.limit)&&"F"===n.limitType}function Yf(n){return!cl(n.limit)&&"L"===n.limitType}function _m(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function hI(n){for(const e of n.filters)if(e.v())return e.field;return null}function Iv(n){return null!==n.collectionGroup}function rh(n){const e=Qe(n);if(null===e.V){e.V=[];const t=hI(e),s=_m(e);if(null!==t&&null===s)t.isKeyField()||e.V.push(new fl(t)),e.V.push(new fl(fi.keyField(),"asc"));else{let u=!1;for(const l of e.explicitOrderBy)e.V.push(l),l.field.isKeyField()&&(u=!0);if(!u){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new fl(fi.keyField(),l))}}}return e.V}function Ss(n){const e=Qe(n);if(!e.S)if("F"===e.limitType)e.S=fv(e.path,e.collectionGroup,rh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of rh(e))t.push(new fl(l.field,"desc"===l.dir?"asc":"desc"));const s=e.endAt?new Kf(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Kf(e.startAt.position,!e.startAt.before):null;e.S=fv(e.path,e.collectionGroup,t,e.filters,e.limit,s,u)}return e.S}function fI(n,e,t){return new Ea(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sr(n,e){return mm(Ss(n),Ss(e))&&n.limitType===e.limitType}function Dv(n){return`${th(Ss(n))}|lt:${n.limitType}`}function bv(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${qf(s.value)}`;var s}).join(", ")}]`),cl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(e+=", startAt: "+ym(n.startAt)),n.endAt&&(e+=", endAt: "+ym(n.endAt)),`Target(${e})`}(Ss(n))}; limitType=${n.limitType})`}function Qf(n,e){return e.isFoundDocument()&&function(t,s){const u=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):st.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(n,e)&&function(t,s){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(n,e)&&function(t,s){for(const u of t.filters)if(!u.matches(s))return!1;return!0}(n,e)&&(s=e,!((t=n).startAt&&!vv(t.startAt,rh(t),s)||t.endAt&&vv(t.endAt,rh(t),s)));var t,s}function Cv(n){return(e,t)=>{let s=!1;for(const u of rh(n)){const l=cT(u,e,t);if(0!==l)return l;s=s||u.field.isKeyField()}return 0}}function cT(n,e,t){const s=n.field.isKeyField()?st.comparator(e.key,t.key):function(u,l,f){const y=l.data.field(u),I=f.data.field(u);return null!==y&&null!==I?Zu(y,I):ct()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return ct()}}function Tv(n,e){if(n.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hm(e)?"-0":e}}function Av(n){return{integerValue:""+n}}function gl(n,e){return cI(e)?Av(e):Tv(n,e)}class vm{constructor(){this._=void 0}}function lT(n,e,t){return n instanceof ml?function(s,u){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&(l.fields.__previous_value__=u),{mapValue:l}}(t,e):n instanceof ih?Sv(n,e):n instanceof Yu?Oo(n,e):function(s,u){const l=gI(s,u),f=mI(l)+mI(s.C);return dl(l)&&dl(s.C)?Av(f):Tv(s.N,f)}(n,e)}function pI(n,e,t){return n instanceof ih?Sv(n,e):n instanceof Yu?Oo(n,e):t}function gI(n,e){return n instanceof sh?dl(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class ml extends vm{}class ih extends vm{constructor(e){super(),this.elements=e}}function Sv(n,e){const t=ko(e);for(const s of n.elements)t.some(u=>Mo(u,s))||t.push(s);return{arrayValue:{values:t}}}class Yu extends vm{constructor(e){super(),this.elements=e}}function Oo(n,e){let t=ko(e);for(const s of n.elements)t=t.filter(u=>!Mo(u,s));return{arrayValue:{values:t}}}class sh extends vm{constructor(e,t){super(),this.N=e,this.C=t}}function mI(n){return rr(n.integerValue||n.doubleValue)}function ko(n){return fm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zi{constructor(e,t){this.field=e,this.transform=t}}class yI{constructor(e,t){this.version=e,this.transformResults=t}}class Ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ir}static exists(e){return new Ir(void 0,e)}static updateTime(e){return new Ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Em(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class wm{}function dT(n,e,t){n instanceof ah?function(s,u,l){const f=s.value.clone(),y=Pv(s.fieldTransforms,u,l.transformResults);f.setAll(y),u.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Qu?function(s,u,l){if(!Em(s.precondition,u))return void u.convertToUnknownDocument(l.version);const f=Pv(s.fieldTransforms,u,l.transformResults),y=u.data;y.setAll(Nv(s)),y.setAll(f),u.convertToFoundDocument(l.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Rv(n,e,t){var u;n instanceof ah?function(s,u,l){if(!Em(s.precondition,u))return;const f=s.value.clone(),y=Jf(s.fieldTransforms,l,u);f.setAll(y),u.convertToFoundDocument(_I(u),f).setHasLocalMutations()}(n,e,t):n instanceof Qu?function(s,u,l){if(!Em(s.precondition,u))return;const f=Jf(s.fieldTransforms,l,u),y=u.data;y.setAll(Nv(s)),y.setAll(f),u.convertToFoundDocument(_I(u),y).setHasLocalMutations()}(n,e,t):Em(n.precondition,u=e)&&u.convertToNoDocument(Ft.min())}function xv(n,e){let t=null;for(const s of n.fieldTransforms){const u=e.data.field(s.field),l=gI(s.transform,u||null);null!=l&&(null==t&&(t=Jr.empty()),t.set(s.field,l))}return t||null}function oh(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===s||t&&s&&Qd(t,s,(u,l)=>function(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(t=n.transform)instanceof ih&&s instanceof ih||t instanceof Yu&&s instanceof Yu?Qd(t.elements,s.elements,Mo):t instanceof sh&&s instanceof sh?Mo(t.C,s.C):t instanceof ml&&s instanceof ml);var t,s}(u,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,s}function _I(n){return n.isFoundDocument()?n.version:Ft.min()}class ah extends wm{constructor(e,t,s,u=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=u,this.type=0}}class Qu extends wm{constructor(e,t,s,u,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=u,this.fieldTransforms=l,this.type=1}}function Nv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function Pv(n,e,t){const s=new Map;It(n.length===t.length);for(let u=0;u<t.length;u++){const l=n[u],f=l.transform,y=e.data.field(l.field);s.set(l.field,pI(f,y,t[u]))}return s}function Jf(n,e,t){const s=new Map;for(const u of n){const l=u.transform,f=t.data.field(u.field);s.set(u.field,lT(l,f,e))}return s}class Xf extends wm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Im extends wm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class vI{constructor(e){this.count=e}}var Dr,Yt;function Mv(n){switch(n){default:return ct();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function Ov(n){if(void 0===n)return wr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Dr.OK:return pe.OK;case Dr.CANCELLED:return pe.CANCELLED;case Dr.UNKNOWN:return pe.UNKNOWN;case Dr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Dr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Dr.INTERNAL:return pe.INTERNAL;case Dr.UNAVAILABLE:return pe.UNAVAILABLE;case Dr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Dr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Dr.NOT_FOUND:return pe.NOT_FOUND;case Dr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Dr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Dr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Dr.ABORTED:return pe.ABORTED;case Dr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Dr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Dr.DATA_LOSS:return pe.DATA_LOSS;default:return ct()}}(Yt=Dr||(Dr={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";class Mr{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new Mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new Mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return t+s.left.size;u<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ep(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ep(this.root,e,this.comparator,!1)}getReverseIterator(){return new ep(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ep(this.root,e,this.comparator,!0)}}class ep{constructor(e,t,s,u){this.isReverse=u,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,u&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,t,s,u,l){this.key=e,this.value=t,this.color=null!=s?s:Xr.RED,this.left=null!=u?u:Xr.EMPTY,this.right=null!=l?l:Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,u,l){return new Xr(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=u?u:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let u=this;const l=s(e,u.key);return u=l<0?u.copy(null,null,null,u.left.insert(e,t,s),null):0===l?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return Xr.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1,Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,s,u){return this}insert(n,e,t){return new Xr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class or{constructor(e){this.comparator=e,this.data=new Mr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kv(this.data.getIterator())}getIteratorFrom(e){return new kv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof or)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,l=s.getNext().key;if(0!==this.comparator(u,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new or(this.comparator);return t.data=e,t}}class kv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const EI=new Mr(st.comparator);function Qs(){return EI}const hT=new Mr(st.comparator);function Fv(){return hT}const fT=new Mr(st.comparator);function wI(){return fT}const pT=new or(st.comparator);function Tn(...n){let e=pT;for(const t of n)e=e.add(t);return e}const gT=new or(Zt);function Dm(){return gT}class tp{constructor(e,t,s,u,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const s=new Map;return s.set(e,np.createSynthesizedTargetChangeForCurrentChange(e,t)),new tp(Ft.min(),s,Dm(),Qs(),Tn())}}class np{constructor(e,t,s,u,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new np(Br.EMPTY_BYTE_STRING,t,Tn(),Tn(),Tn())}}class bm{constructor(e,t,s,u){this.k=e,this.removedTargetIds=t,this.key=s,this.$=u}}class II{constructor(e,t){this.targetId=e,this.O=t}}class DI{constructor(e,t,s=Br.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=u}}class bI{constructor(){this.F=0,this.M=TI(),this.L=Br.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=Tn(),t=Tn(),s=Tn();return this.M.forEach((u,l)=>{switch(l){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:s=s.add(u);break;default:ct()}}),new np(this.L,this.B,e,t,s)}G(){this.U=!1,this.M=TI()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class mT{constructor(e){this.tt=e,this.et=new Map,this.nt=Qs(),this.st=CI(),this.it=new or(Zt)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.ct(t,e.key,e.$);for(const t of e.removedTargetIds)this.ct(t,e.key,e.$)}at(e){this.forEachTarget(e,t=>{const s=this.ut(t);switch(e.state){case 0:this.ht(t)&&s.j(e.resumeToken);break;case 1:s.X(),s.q||s.G(),s.j(e.resumeToken);break;case 2:s.X(),s.q||this.removeTarget(t);break;case 3:this.ht(t)&&(s.Z(),s.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),s.j(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((s,u)=>{this.ht(u)&&t(u)})}ft(e){const t=e.targetId,s=e.O.count,u=this.dt(t);if(u){const l=u.target;if(nh(l))if(0===s){const f=new st(l.path);this.ct(t,f,ir.newNoDocument(f,Ft.min()))}else It(1===s);else this.wt(t)!==s&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((l,f)=>{const y=this.dt(f);if(y){if(l.current&&nh(y.target)){const I=new st(y.target.path);null!==this.nt.get(I)||this.gt(f,I)||this.ct(f,I,ir.newNoDocument(I,e))}l.K&&(t.set(f,l.W()),l.G())}});let s=Tn();this.st.forEach((l,f)=>{let y=!0;f.forEachWhile(I=>{const S=this.dt(I);return!S||2===S.purpose||(y=!1,!1)}),y&&(s=s.add(l))});const u=new tp(e,t,this.it,this.nt,s);return this.nt=Qs(),this.st=CI(),this.it=new or(Zt),u}ot(e,t){if(!this.ht(e))return;const s=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,s),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}ct(e,t,s){if(!this.ht(e))return;const u=this.ut(e);this.gt(e,t)?u.H(t,1):u.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),s&&(this.nt=this.nt.insert(t,s))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new bI,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new or(Zt),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new bI),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function CI(){return new Mr(st.comparator)}function TI(){return new Mr(st.comparator)}const AI={asc:"ASCENDING",desc:"DESCENDING"},SI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class RI{constructor(e,t){this.databaseId=e,this.D=t}}function uh(n,e){return n.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lv(n,e){return n.D?e.toBase64():e.toUint8Array()}function xI(n,e){return uh(n,e.toTimestamp())}function jr(n){return It(!!n),Ft.fromTimestamp(function(e){const t=iu(e);return new Pr(t.seconds,t.nanos)}(n))}function Cm(n,e){return(t=n,new fn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Vv(n){const e=fn.fromString(n);return It(Uv(e)),e}function ch(n,e){return Cm(n.databaseId,e.path)}function Lo(n,e){const t=Vv(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new st(yl(t))}function su(n,e){return Cm(n.databaseId,e)}function NI(n){const e=Vv(n);return 4===e.length?fn.emptyPath():yl(e)}function rp(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yl(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function yT(n,e,t){return{name:ch(n,e),fields:t.value.mapValue.fields}}function Tm(n,e,t){const s=Lo(n,e.name),u=jr(e.updateTime),l=new Jr({mapValue:{fields:e.fields}}),f=ir.newFoundDocument(s,u,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function ip(n,e){let t;if(e instanceof ah)t={update:yT(n,e.key,e.value)};else if(e instanceof Xf)t={delete:ch(n,e.key)};else if(e instanceof Qu)t={update:yT(n,e.key,e.data),updateMask:VI(e.fieldMask)};else{if(!(e instanceof Im))return ct();t={verify:ch(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,l){const f=l.transform;if(f instanceof ml)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ih)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Yu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof sh)return{fieldPath:l.field.canonicalString(),increment:f.C};throw ct()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:xI(n,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:ct()),t;var u}function _T(n,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?Ir.updateTime(jr(u.updateTime)):void 0!==u.exists?Ir.exists(u.exists):Ir.none():Ir.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(l,f){let y=null;"setToServerValue"in f?(It("REQUEST_TIME"===f.setToServerValue),y=new ml):"appendMissingElements"in f?y=new ih(f.appendMissingElements.values||[]):"removeAllFromArray"in f?y=new Yu(f.removeAllFromArray.values||[]):"increment"in f?y=new sh(l,f.increment):ct();const I=fi.fromServerFormat(f.fieldPath);return new zi(I,y)}(n,u)):[];var u;if(e.update){const u=Lo(n,e.update.name),l=new Jr({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new Po((e.updateMask.fieldPaths||[]).map(S=>fi.fromServerFormat(S)));return new Qu(u,l,f,t,s)}return new ah(u,l,t,s)}if(e.delete){const u=Lo(n,e.delete);return new Xf(u,t)}if(e.verify){const u=Lo(n,e.verify);return new Im(u,t)}return ct()}function MI(n,e){return{documents:[su(n,e.path)]}}function OI(n,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=su(n,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=su(n,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const u=function(y){if(0===y.length)return;const I=y.map(S=>function(M){if("=="===M.op){if(pm(M.value))return{unaryFilter:{field:_l(M.field),op:"IS_NAN"}};if(dv(M.value))return{unaryFilter:{field:_l(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(pm(M.value))return{unaryFilter:{field:_l(M.field),op:"IS_NOT_NAN"}};if(dv(M.value))return{unaryFilter:{field:_l(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(M.field),op:aR(M.op),value:M.value}}}(S));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);u&&(t.structuredQuery.where=u);const l=function(y){if(0!==y.length)return y.map(I=>{return{field:_l((S=I).field),direction:dr(S.dir)};var S})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const f=(I=e.limit,n.D||cl(I)?I:{value:I});var I;return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=sp(e.startAt)),e.endAt&&(t.structuredQuery.endAt=sp(e.endAt)),t}function kI(n){let e=NI(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let u=null;if(s>0){It(1===s);const M=t.from[0];M.allDescendants?u=M.collectionId:e=e.child(M.collectionId)}let l=[];t.where&&(l=FI(t.where));let f=[];t.orderBy&&(f=t.orderBy.map(M=>{return new fl(lh((F=M).field),function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction));var F}));let y=null;t.limit&&(y=function(M){let F;return F="object"==typeof M?M.value:M,cl(F)?null:F}(t.limit));let I=null;t.startAt&&(I=op(t.startAt));let S=null;return t.endAt&&(S=op(t.endAt)),wv(e,u,f,l,y,"F",I,S)}function FI(n){return n?void 0!==n.unaryFilter?[LI(n)]:void 0!==n.fieldFilter?[vT(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>FI(e)).reduce((e,t)=>e.concat(t)):ct():[]}function sp(n){return{before:n.before,values:n.position}}function op(n){return new Kf(n.values||[],!!n.before)}function dr(n){return AI[n]}function aR(n){return SI[n]}function _l(n){return{fieldPath:n.canonicalString()}}function lh(n){return fi.fromServerFormat(n.fieldPath)}function vT(n){return Pi.create(lh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(n.fieldFilter.op),n.fieldFilter.value)}function LI(n){switch(n.unaryFilter.op){case"IS_NAN":const e=lh(n.unaryFilter.field);return Pi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=lh(n.unaryFilter.field);return Pi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=lh(n.unaryFilter.field);return Pi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=lh(n.unaryFilter.field);return Pi.create(u,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}function VI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Uv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Js(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=UI(e)),e=ET(n.get(t),e);return UI(e)}function ET(n,e){let t=e;const s=n.length;for(let u=0;u<s;u++){const l=n.charAt(u);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function UI(n){return n+"\x01\x01"}function ou(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),fn.emptyPath();const t=e-2,s=[];let u="";for(let l=0;l<e;){const f=n.indexOf("\x01",l);switch((f<0||f>t)&&ct(),n.charAt(f+1)){case"\x01":const y=n.substring(l,f);let I;0===u.length?I=y:(u+=y,I=u,u=""),s.push(I);break;case"\x10":u+=n.substring(l,f),u+="\0";break;case"\x11":u+=n.substring(l,f+1);break;default:ct()}l=f+2}return new fn(s)}class ap{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Rs{constructor(e,t,s){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=s}}Rs.store="owner",Rs.key="owner";class Ju{constructor(e,t,s){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=s}}Ju.store="mutationQueues",Ju.keyPath="userId";class jn{constructor(e,t,s,u,l){this.userId=e,this.batchId=t,this.localWriteTimeMs=s,this.baseMutations=u,this.mutations=l}}jn.store="mutations",jn.keyPath="batchId",jn.userMutationsIndex="userMutationsIndex",jn.userMutationsKeyPath=["userId","batchId"];class $r{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Js(t)]}static key(e,t,s){return[e,Js(t),s]}}$r.store="documentMutations",$r.PLACEHOLDER=new $r;class BI{constructor(e,t){this.path=e,this.readTime=t}}class jI{constructor(e,t){this.path=e,this.version=t}}class ar{constructor(e,t,s,u,l,f){this.unknownDocument=e,this.noDocument=t,this.document=s,this.hasCommittedMutations=u,this.readTime=l,this.parentPath=f}}ar.store="remoteDocuments",ar.readTimeIndex="readTimeIndex",ar.readTimeIndexPath="readTime",ar.collectionReadTimeIndex="collectionReadTimeIndex",ar.collectionReadTimeIndexPath=["parentPath","readTime"];class wa{constructor(e){this.byteSize=e}}wa.store="remoteDocumentGlobal",wa.key="remoteDocumentGlobalKey";class ei{constructor(e,t,s,u,l,f,y){this.targetId=e,this.canonicalId=t,this.readTime=s,this.resumeToken=u,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=f,this.query=y}}ei.store="targets",ei.keyPath="targetId",ei.queryTargetsIndexName="queryTargetsIndex",ei.queryTargetsKeyPath=["canonicalId","targetId"];class br{constructor(e,t,s){this.targetId=e,this.path=t,this.sequenceNumber=s}}br.store="targetDocuments",br.keyPath=["targetId","path"],br.documentTargetsIndex="documentTargetsIndex",br.documentTargetsKeyPath=["path","targetId"];class xs{constructor(e,t,s,u){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=s,this.targetCount=u}}xs.key="targetGlobalKey",xs.store="targetGlobal";class vl{constructor(e,t){this.collectionId=e,this.parent=t}}vl.store="collectionParents",vl.keyPath=["collectionId","parent"];class au{constructor(e,t,s,u){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=s,this.inForeground=u}}au.store="clientMetadata",au.keyPath="clientId";class El{constructor(e,t,s){this.bundleId=e,this.createTime=t,this.version=s}}El.store="bundles",El.keyPath="bundleId";class wl{constructor(e,t,s){this.name=e,this.readTime=t,this.bundledQuery=s}}wl.store="namedQueries",wl.keyPath="name";const $I=[Ju.store,jn.store,$r.store,ar.store,ei.store,Rs.store,xs.store,br.store,au.store,wa.store,vl.store,El.store,wl.store],HI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Pe((s,u)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,u)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Pe?t:Pe.resolve(t)}catch(t){return Pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Pe.reject(t)}static resolve(e){return new Pe((t,s)=>{t(e)})}static reject(e){return new Pe((t,s)=>{s(e)})}static waitFor(e){return new Pe((t,s)=>{let u=0,l=0,f=!1;e.forEach(y=>{++u,y.next(()=>{++l,f&&l===u&&t()},I=>s(I))}),f=!0,l===u&&t()})}static or(e){let t=Pe.resolve(!1);for(const s of e)t=t.next(u=>u?Pe.resolve(u):s());return t}static forEach(e,t){const s=[];return e.forEach((u,l)=>{s.push(t.call(this,u,l))}),this.waitFor(s)}}class Sm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Et=new Qr,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{t.error?this.Et.reject(new Rm(e,t.error)):this.Et.resolve()},this.transaction.onerror=s=>{const u=jv(s.target.error);this.Et.reject(new Rm(e,u))}}static open(e,t,s,u){try{return new Sm(t,e.transaction(u,s))}catch(l){throw new Rm(t,l)}}get It(){return this.Et.promise}abort(e){e&&this.Et.reject(e),this.aborted||(je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new GI(t)}}class Ia{constructor(e,t,s){this.name=e,this.version=t,this.At=s,12.2===Ia.Rt((0,qt.z$)())&&wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return je("SimpleDb","Removing database:",e),Da(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,qt.hl)())return!1;if(Ia.Pt())return!0;const e=(0,qt.z$)(),t=Ia.Rt(e),s=0<t&&t<10,u=Ia.vt(e),l=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static vt(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}Dt(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,u)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=f=>{s(f.target.result)},l.onblocked=()=>{u(new Rm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=f=>{const y=f.target.error;u("VersionError"===y.name?new Me(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new Me(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new Rm(e,y))},l.onupgradeneeded=f=>{je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',f.oldVersion),t.At.Ct(f.target.result,l.transaction,f.oldVersion,t.version).next(()=>{je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=s=>t.Nt(s)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,u){var l=this;return(0,Ee.Z)(function*(){const f="readonly"===t;let y=0;for(;;){++y;try{l.db=yield l.Dt(e);const I=Sm.open(l.db,e,f?"readonly":"readwrite",s),S=u(I).catch(M=>(I.abort(M),Pe.reject(M))).toPromise();return S.catch(()=>{}),yield I.It,S}catch(I){const S="FirebaseError"!==I.name&&y<3;if(je("SimpleDb","Transaction failed with error:",I.message,"Retrying:",S),l.close(),!S)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class uR{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return Da(this.kt.delete())}}class Rm extends Me{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function dh(n){return"IndexedDbTransactionError"===n.name}class GI{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(je("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Da(s)}add(e){return je("SimpleDb","ADD",this.store.name,e,e),Da(this.store.add(e))}get(e){return Da(this.store.get(e)).next(t=>(void 0===t&&(t=null),je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return je("SimpleDb","DELETE",this.store.name,e),Da(this.store.delete(e))}count(){return je("SimpleDb","COUNT",this.store.name),Da(this.store.count())}Lt(e,t){const s=this.cursor(this.options(e,t)),u=[];return this.Bt(s,(l,f)=>{u.push(f)}).next(()=>u)}Ut(e,t){je("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.qt=!1;const u=this.cursor(s);return this.Bt(u,(l,f,y)=>y.delete())}Kt(e,t){let s;t?s=e:(s={},t=e);const u=this.cursor(s);return this.Bt(u,t)}jt(e){const t=this.cursor({});return new Pe((s,u)=>{t.onerror=l=>{const f=jv(l.target.error);u(f)},t.onsuccess=l=>{const f=l.target.result;f?e(f.primaryKey,f.value).next(y=>{y?f.continue():s()}):s()}})}Bt(e,t){const s=[];return new Pe((u,l)=>{e.onerror=f=>{l(f.target.error)},e.onsuccess=f=>{const y=f.target.result;if(!y)return void u();const I=new uR(y),S=t(y.primaryKey,y.value,I);if(S instanceof Pe){const M=S.catch(F=>(I.done(),Pe.reject(F)));s.push(M)}I.isDone?u():null===I.Ft?y.continue():y.continue(I.Ft)}}).next(()=>Pe.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.qt?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Da(n){return new Pe((e,t)=>{n.onsuccess=s=>{e(s.target.result)},n.onerror=s=>{const u=jv(s.target.error);t(u)}})}let WI=!1;function jv(n){const e=Ia.Rt((0,qt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return WI||(WI=!0,setTimeout(()=>{throw s},0)),s}}return n}class $v extends Bv{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function ti(n,e){const t=Qe(n);return Ia.St(t.Qt,e)}class Hv{constructor(e,t,s,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const l=this.mutations[u];l.key.isEqual(e.key)&&dT(l,e,s[u])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Rv(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Rv(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const s=e.get(t.key),u=s;this.applyToLocalView(u),s.isValidDocument()||u.convertToNoDocument(Ft.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Tn())}isEqual(e){return this.batchId===e.batchId&&Qd(this.mutations,e.mutations,(t,s)=>oh(t,s))&&Qd(this.baseMutations,e.baseMutations,(t,s)=>oh(t,s))}}class Gv{constructor(e,t,s,u){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=u}static from(e,t,s){It(e.mutations.length===s.length);let u=wI();const l=e.mutations;for(let f=0;f<l.length;f++)u=u.insert(l[f].key,s[f].version);return new Gv(e,t,s,u)}}class Xu{constructor(e,t,s,u,l=Ft.min(),f=Ft.min(),y=Br.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=y}withSequenceNumber(e){return new Xu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Xu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Xu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class zI{constructor(e){this.Wt=e}}function Wv(n,e){if(e.document)return Tm(n.Wt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=st.fromSegments(e.noDocument.path),s=hh(e.noDocument.readTime),u=ir.newNoDocument(t,s);return e.hasCommittedMutations?u.setHasCommittedMutations():u}if(e.unknownDocument){const t=st.fromSegments(e.unknownDocument.path),s=hh(e.unknownDocument.version);return ir.newUnknownDocument(t,s)}return ct()}function zv(n,e,t){const s=qv(t),u=e.key.path.popLast().toArray();if(e.isFoundDocument()){const l={name:ch(y=n.Wt,(I=e).key),fields:I.data.value.mapValue.fields,updateTime:uh(y,I.version.toTimestamp())};return new ar(null,null,l,e.hasCommittedMutations,s,u)}var y,I;if(e.isNoDocument()){const l=e.key.path.toArray(),f=Vo(e.version),y=e.hasCommittedMutations;return new ar(null,new BI(l,f),null,y,s,u)}if(e.isUnknownDocument()){const l=e.key.path.toArray(),f=Vo(e.version);return new ar(new jI(l,f),null,null,!0,s,u)}return ct()}function qv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function qI(n){const e=new Pr(n[0],n[1]);return Ft.fromTimestamp(e)}function Vo(n){const e=n.toTimestamp();return new ap(e.seconds,e.nanoseconds)}function hh(n){const e=new Pr(n.seconds,n.nanoseconds);return Ft.fromTimestamp(e)}function Il(n,e){const t=(e.baseMutations||[]).map(l=>_T(n.Wt,l));for(let l=0;l<e.mutations.length-1;++l){const f=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(f.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const s=e.mutations.map(l=>_T(n.Wt,l)),u=Pr.fromMillis(e.localWriteTimeMs);return new Hv(e.batchId,u,t,s)}function up(n){const e=hh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?hh(n.lastLimboFreeSnapshotVersion):Ft.min();let s;var u;return void 0!==n.query.documents?(It(1===(u=n.query).documents.length),s=Ss(pl(NI(u.documents[0])))):s=Ss(kI(n.query)),new Xu(s,n.targetId,0,n.lastListenSequenceNumber,e,t,Br.fromBase64String(n.resumeToken))}function Kv(n,e){const t=Vo(e.snapshotVersion),s=Vo(e.lastLimboFreeSnapshotVersion);let u;u=nh(e.target)?MI(n.Wt,e.target):OI(n.Wt,e.target);const l=e.resumeToken.toBase64();return new ei(e.targetId,th(e.target),t,l,e.sequenceNumber,s,u)}function Zv(n){const e=kI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?fI(e,e.limit,"L"):e}class KI{getBundleMetadata(e,t){return ZI(e).get(t).next(s=>{if(s)return{id:(u=s).bundleId,createTime:hh(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return ZI(e).put({bundleId:(s=t).id,createTime:Vo(jr(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return xm(e).get(t).next(s=>{if(s)return{name:(u=s).name,query:Zv(u.bundledQuery),readTime:hh(u.readTime)};var u})}saveNamedQuery(e,t){return xm(e).put({name:(s=t).name,readTime:Vo(jr(s.readTime)),bundledQuery:s.bundledQuery});var s}}function ZI(n){return ti(n,El.store)}function xm(n){return ti(n,wl.store)}class wT{constructor(){this.Gt=new Nm}addToCollectionParentIndex(e,t){return this.Gt.add(t),Pe.resolve()}getCollectionParents(e,t){return Pe.resolve(this.Gt.getEntries(t))}}class Nm{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t]||new or(fn.comparator),l=!u.has(s);return this.index[t]=u.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t];return u&&u.has(s)}getEntries(e){return(this.index[e]||new or(fn.comparator)).toArray()}}class YI{constructor(){this.zt=new Nm}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const s=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const l={collectionId:s,parent:Js(u)};return QI(e).put(l)}return Pe.resolve()}getCollectionParents(e,t){const s=[],u=IDBKeyRange.bound([t,""],[lm(t),""],!1,!0);return QI(e).Lt(u).next(l=>{for(const f of l){if(f.collectionId!==t)break;s.push(ou(f.parent))}return s})}}function QI(n){return ti(n,vl.store)}const JI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ls{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new ls(e,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Pm(n,e,t){const s=n.store(jn.store),u=n.store($r.store),l=[],f=IDBKeyRange.only(t.batchId);let y=0;const I=s.Kt({range:f},(M,F,Z)=>(y++,Z.delete()));l.push(I.next(()=>{It(1===y)}));const S=[];for(const M of t.mutations){const F=$r.key(e,M.key.path,t.batchId);l.push(u.delete(F)),S.push(M.key)}return Pe.waitFor(l).next(()=>S)}function Mm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}ls.DEFAULT_COLLECTION_PERCENTILE=10,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ls.DEFAULT=new ls(41943040,ls.DEFAULT_COLLECTION_PERCENTILE,ls.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ls.DISABLED=new ls(-1,0,0);class Om{constructor(e,t,s,u){this.userId=e,this.N=t,this.Ht=s,this.referenceDelegate=u,this.Jt={}}static Yt(e,t,s,u){It(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new Om(l,t,s,u)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ec(e).Kt({index:jn.userMutationsIndex,range:s},(u,l,f)=>{t=!1,f.done()}).next(()=>t)}addMutationBatch(e,t,s,u){const l=fh(e),f=ec(e);return f.add({}).next(y=>{It("number"==typeof y);const I=new Hv(y,t,s,u),S=function(Z,J,Ae){const Ye=Ae.baseMutations.map(Wt=>ip(Z.Wt,Wt)),nt=Ae.mutations.map(Wt=>ip(Z.Wt,Wt));return new jn(J,Ae.batchId,Ae.localWriteTime.toMillis(),Ye,nt)}(this.N,this.userId,I),M=[];let F=new or((Z,J)=>Zt(Z.canonicalString(),J.canonicalString()));for(const Z of u){const J=$r.key(this.userId,Z.key.path,y);F=F.add(Z.key.path.popLast()),M.push(f.put(S)),M.push(l.put(J,$r.PLACEHOLDER))}return F.forEach(Z=>{M.push(this.Ht.addToCollectionParentIndex(e,Z))}),e.addOnCommittedListener(()=>{this.Jt[y]=I.keys()}),Pe.waitFor(M).next(()=>I)})}lookupMutationBatch(e,t){return ec(e).get(t).next(s=>s?(It(s.userId===this.userId),Il(this.N,s)):null)}Xt(e,t){return this.Jt[t]?Pe.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const u=s.keys();return this.Jt[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,u=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return ec(e).Kt({index:jn.userMutationsIndex,range:u},(f,y,I)=>{y.userId===this.userId&&(It(y.batchId>=s),l=Il(this.N,y)),I.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return ec(e).Kt({index:jn.userMutationsIndex,range:t,reverse:!0},(u,l,f)=>{s=l.batchId,f.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ec(e).Lt(jn.userMutationsIndex,t).next(s=>s.map(u=>Il(this.N,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=$r.prefixForPath(this.userId,t.path),u=IDBKeyRange.lowerBound(s),l=[];return fh(e).Kt({range:u},(f,y,I)=>{const[S,M,F]=f,Z=ou(M);if(S===this.userId&&t.path.isEqual(Z))return ec(e).get(F).next(J=>{if(!J)throw ct();It(J.userId===this.userId),l.push(Il(this.N,J))});I.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new or(Zt);const u=[];return t.forEach(l=>{const f=$r.prefixForPath(this.userId,l.path),y=IDBKeyRange.lowerBound(f),I=fh(e).Kt({range:y},(S,M,F)=>{const[Z,J,Ae]=S,Ye=ou(J);Z===this.userId&&l.path.isEqual(Ye)?s=s.add(Ae):F.done()});u.push(I)}),Pe.waitFor(u).next(()=>this.Zt(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1,l=$r.prefixForPath(this.userId,s),f=IDBKeyRange.lowerBound(l);let y=new or(Zt);return fh(e).Kt({range:f},(I,S,M)=>{const[F,Z,J]=I,Ae=ou(Z);F===this.userId&&s.isPrefixOf(Ae)?Ae.length===u&&(y=y.add(J)):M.done()}).next(()=>this.Zt(e,y))}Zt(e,t){const s=[],u=[];return t.forEach(l=>{u.push(ec(e).get(l).next(f=>{if(null===f)throw ct();It(f.userId===this.userId),s.push(Il(this.N,f))}))}),Pe.waitFor(u).next(()=>s)}removeMutationBatch(e,t){return Pm(e.Qt,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),Pe.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Pe.resolve();const s=IDBKeyRange.lowerBound($r.prefixForUser(this.userId)),u=[];return fh(e).Kt({range:s},(l,f,y)=>{if(l[0]===this.userId){const I=ou(l[1]);u.push(I)}else y.done()}).next(()=>{It(0===u.length)})})}containsKey(e,t){return XI(e,this.userId,t)}ee(e){return eD(e).get(this.userId).next(t=>t||new Ju(this.userId,-1,""))}}function XI(n,e,t){const s=$r.prefixForPath(e,t.path),u=s[1],l=IDBKeyRange.lowerBound(s);let f=!1;return fh(n).Kt({range:l,qt:!0},(y,I,S)=>{const[M,F,Z]=y;M===e&&F===u&&(f=!0),S.done()}).next(()=>f)}function ec(n){return ti(n,jn.store)}function fh(n){return ti(n,$r.store)}function eD(n){return ti(n,Ju.store)}class Dl{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new Dl(0)}static ie(){return new Dl(-1)}}class IT{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const s=new Dl(t.highestTargetId);return t.highestTargetId=s.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(t=>Ft.fromTimestamp(new Pr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.re(e).next(u=>(u.highestListenSequenceNumber=t,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.oe(e,u)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.re(e).next(s=>(s.targetCount+=1,this.ae(t,s),this.oe(e,s))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ph(e).delete(t.targetId)).next(()=>this.re(e)).next(s=>(It(s.targetCount>0),s.targetCount-=1,this.oe(e,s)))}removeTargets(e,t,s){let u=0;const l=[];return ph(e).Kt((f,y)=>{const I=up(y);I.sequenceNumber<=t&&null===s.get(I.targetId)&&(u++,l.push(this.removeTargetData(e,I)))}).next(()=>Pe.waitFor(l)).next(()=>u)}forEachTarget(e,t){return ph(e).Kt((s,u)=>{const l=up(u);t(l)})}re(e){return tD(e).get(xs.key).next(t=>(It(null!==t),t))}oe(e,t){return tD(e).put(xs.key,t)}ce(e,t){return ph(e).put(Kv(this.N,t))}ae(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.re(e).next(t=>t.targetCount)}getTargetData(e,t){const s=th(t),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return ph(e).Kt({range:u,index:ei.queryTargetsIndexName},(f,y,I)=>{const S=up(y);mm(t,S.target)&&(l=S,I.done())}).next(()=>l)}addMatchingKeys(e,t,s){const u=[],l=uu(e);return t.forEach(f=>{const y=Js(f.path);u.push(l.put(new br(s,y))),u.push(this.referenceDelegate.addReference(e,s,f))}),Pe.waitFor(u)}removeMatchingKeys(e,t,s){const u=uu(e);return Pe.forEach(t,l=>{const f=Js(l.path);return Pe.waitFor([u.delete([s,f]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,t){const s=uu(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),u=uu(e);let l=Tn();return u.Kt({range:s,qt:!0},(f,y,I)=>{const S=ou(f[1]),M=new st(S);l=l.add(M)}).next(()=>l)}containsKey(e,t){const s=Js(t.path),u=IDBKeyRange.bound([s],[lm(s)],!1,!0);let l=0;return uu(e).Kt({index:br.documentTargetsIndex,qt:!0,range:u},([f,y],I,S)=>{0!==f&&(l++,S.done())}).next(()=>l>0)}Tt(e,t){return ph(e).get(t).next(s=>s?up(s):null)}}function ph(n){return ti(n,ei.store)}function tD(n){return ti(n,xs.store)}function uu(n){return ti(n,br.store)}function tc(n){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,Ee.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==HI)throw n;je("LocalStore","Unexpectedly lost primary lease")}),Yv.apply(this,arguments)}function nD([n,e],[t,s]){const u=Zt(n,t);return 0===u?Zt(e,s):u}class rD{constructor(e){this.ue=e,this.buffer=new or(nD),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();nD(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class DT{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const s=this.de?3e5:6e4;je("LruGarbageCollector",`Garbage collection scheduled in ${s}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,(0,Ee.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(u){dh(u)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield tc(u)}yield t._e(e)}))}}class bT{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Pe.resolve(Ys.T);const s=new rD(t);return this.me.forEachTarget(e,u=>s.fe(u.sequenceNumber)).next(()=>this.me.ye(e,u=>s.fe(u))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.me.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),Pe.resolve(JI)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JI):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let s,u,l,f,y,I,S;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(F=>(F>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${F}`),u=this.params.maximumSequenceNumbersToCollect):u=F,f=Date.now(),this.nthSequenceNumber(e,u))).next(F=>(s=F,y=Date.now(),this.removeTargets(e,s,t))).next(F=>(l=F,I=Date.now(),this.removeOrphanedDocuments(e,s))).next(F=>(S=Date.now(),cm()<=Zr.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-M}ms\n\tDetermined least recently used ${u} in `+(y-f)+`ms\n\tRemoved ${l} targets in `+(I-y)+`ms\n\tRemoved ${F} documents in `+(S-I)+`ms\nTotal Duration: ${S-M}ms`),Pe.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:l,documentsRemoved:F})))}}class CT{constructor(e,t){this.db=e,this.garbageCollector=new bT(this,t)}ge(e){const t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(u=>s+u))}Te(e){let t=0;return this.ye(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Ee(e,(s,u)=>t(u))}addReference(e,t,s){return gh(e,s)}removeReference(e,t,s){return gh(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return gh(e,t)}Ie(e,t){return function(s,u){let l=!1;return eD(s).jt(f=>XI(s,f,u).next(y=>(y&&(l=!0),Pe.resolve(!y)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let l=0;return this.Ee(e,(f,y)=>{if(y<=t){const I=this.Ie(e,f).next(S=>{if(!S)return l++,s.getEntry(e,f).next(()=>(s.removeEntry(f),uu(e).delete([0,Js(f.path)])))});u.push(I)}}).next(()=>Pe.waitFor(u)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return gh(e,t)}Ee(e,t){const s=uu(e);let u,l=Ys.T;return s.Kt({index:br.documentTargetsIndex},([f,y],{path:I,sequenceNumber:S})=>{0===f?(l!==Ys.T&&t(new st(ou(u)),l),l=S,u=I):l=Ys.T}).next(()=>{l!==Ys.T&&t(new st(ou(u)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gh(n,e){return uu(n).put((s=n.currentSequenceNumber,new br(0,Js(e.path),s)));var s}class nc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[u,l]of s)if(this.equalsFn(u,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0!==u){for(let l=0;l<u.length;l++)if(this.equalsFn(u[l][0],e))return void(u[l]=[e,t]);u.push([e,t])}else this.inner[s]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[t]:s.splice(u,1),!0;return!1}forEach(e){Jd(this.inner,(t,s)=>{for(const[u,l]of s)e(u,l)})}isEmpty(){return eT(this.inner)}}class Qv{constructor(){this.changes=new nc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Ft.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:ir.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Pe.resolve(s.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Jv{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,s){return ba(e).put(km(t),s)}removeEntry(e,t){const s=ba(e),u=km(t);return s.delete(u)}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Ae(e,s)))}getEntry(e,t){return ba(e).get(km(t)).next(s=>this.Re(t,s))}be(e,t){return ba(e).get(km(t)).next(s=>({document:this.Re(t,s),size:Mm(s)}))}getEntries(e,t){let s=Qs();return this.Pe(e,t,(u,l)=>{const f=this.Re(u,l);s=s.insert(u,f)}).next(()=>s)}ve(e,t){let s=Qs(),u=new Mr(st.comparator);return this.Pe(e,t,(l,f)=>{const y=this.Re(l,f);s=s.insert(l,y),u=u.insert(l,Mm(f))}).next(()=>({documents:s,Ve:u}))}Pe(e,t,s){if(t.isEmpty())return Pe.resolve();const u=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),l=t.getIterator();let f=l.getNext();return ba(e).Kt({range:u},(y,I,S)=>{const M=st.fromSegments(y);for(;f&&st.comparator(f,M)<0;)s(f,null),f=l.getNext();f&&f.isEqual(M)&&(s(f,I),f=l.hasNext()?l.getNext():null),f?S.Mt(f.path.toArray()):S.done()}).next(()=>{for(;f;)s(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,s){let u=Qs();const l=t.path.length+1,f={};if(s.isEqual(Ft.min())){const y=t.path.toArray();f.range=IDBKeyRange.lowerBound(y)}else{const y=t.path.toArray(),I=qv(s);f.range=IDBKeyRange.lowerBound([y,I],!0),f.index=ar.collectionReadTimeIndex}return ba(e).Kt(f,(y,I,S)=>{if(y.length!==l)return;const M=Wv(this.N,I);t.path.isPrefixOf(M.key.path)?Qf(t,M)&&(u=u.insert(M.key,M)):S.done()}).next(()=>u)}newChangeBuffer(e){return new TT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return iD(e).get(wa.key).next(t=>(It(!!t),t))}Ae(e,t){return iD(e).put(wa.key,t)}Re(e,t){if(t){const s=Wv(this.N,t);if(!s.isNoDocument()||!s.version.isEqual(Ft.min()))return s}return ir.newInvalidDocument(e)}}class TT extends Qv{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new nc(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const t=[];let s=0,u=new or((l,f)=>Zt(l.canonicalString(),f.canonicalString()));return this.changes.forEach((l,f)=>{const y=this.De.get(l);if(f.document.isValidDocument()){const I=zv(this.Se.N,f.document,this.getReadTime(l));u=u.add(l.path.popLast()),s+=Mm(I)-y,t.push(this.Se.addEntry(e,l,I))}else if(s-=y,this.trackRemovals){const I=zv(this.Se.N,ir.newNoDocument(l,Ft.min()),this.getReadTime(l));t.push(this.Se.addEntry(e,l,I))}else t.push(this.Se.removeEntry(e,l))}),u.forEach(l=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,l))}),t.push(this.Se.updateMetadata(e,s)),Pe.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(s=>(this.De.set(t,s.size),s.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:s,Ve:u})=>(u.forEach((l,f)=>{this.De.set(l,f)}),s))}}function iD(n){return ti(n,wa.store)}function ba(n){return ti(n,ar.store)}function km(n){return n.path.toArray()}class AT{constructor(e){this.N=e}Ct(e,t,s,u){It(s<u&&s>=0&&u<=11);const l=new Sm("createOrUpgrade",t);var y;s<1&&u>=1&&(e.createObjectStore(Rs.store),(y=e).createObjectStore(Ju.store,{keyPath:Ju.keyPath}),y.createObjectStore(jn.store,{keyPath:jn.keyPath,autoIncrement:!0}).createIndex(jn.userMutationsIndex,jn.userMutationsKeyPath,{unique:!0}),y.createObjectStore($r.store),sD(e),function(y){y.createObjectStore(ar.store)}(e));let f=Pe.resolve();return s<3&&u>=3&&(0!==s&&(function(y){y.deleteObjectStore(br.store),y.deleteObjectStore(ei.store),y.deleteObjectStore(xs.store)}(e),sD(e)),f=f.next(()=>function(y){const I=y.store(xs.store),S=new xs(0,0,Ft.min().toTimestamp(),0);return I.put(xs.key,S)}(l))),s<4&&u>=4&&(0!==s&&(f=f.next(()=>function(y,I){return I.store(jn.store).Lt().next(S=>{y.deleteObjectStore(jn.store),y.createObjectStore(jn.store,{keyPath:jn.keyPath,autoIncrement:!0}).createIndex(jn.userMutationsIndex,jn.userMutationsKeyPath,{unique:!0});const M=I.store(jn.store),F=S.map(Z=>M.put(Z));return Pe.waitFor(F)})}(e,l))),f=f.next(()=>{!function(y){y.createObjectStore(au.store,{keyPath:au.keyPath})}(e)})),s<5&&u>=5&&(f=f.next(()=>this.Ce(l))),s<6&&u>=6&&(f=f.next(()=>(function(y){y.createObjectStore(wa.store)}(e),this.Ne(l)))),s<7&&u>=7&&(f=f.next(()=>this.xe(l))),s<8&&u>=8&&(f=f.next(()=>this.ke(e,l))),s<9&&u>=9&&(f=f.next(()=>{(function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")})(e),function(y){const I=y.objectStore(ar.store);I.createIndex(ar.readTimeIndex,ar.readTimeIndexPath,{unique:!1}),I.createIndex(ar.collectionReadTimeIndex,ar.collectionReadTimeIndexPath,{unique:!1})}(t)})),s<10&&u>=10&&(f=f.next(()=>this.$e(l))),s<11&&u>=11&&(f=f.next(()=>{(function(y){y.createObjectStore(El.store,{keyPath:El.keyPath})})(e),function(y){y.createObjectStore(wl.store,{keyPath:wl.keyPath})}(e)})),f}Ne(e){let t=0;return e.store(ar.store).Kt((s,u)=>{t+=Mm(u)}).next(()=>{const s=new wa(t);return e.store(wa.store).put(wa.key,s)})}Ce(e){const t=e.store(Ju.store),s=e.store(jn.store);return t.Lt().next(u=>Pe.forEach(u,l=>{const f=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.Lt(jn.userMutationsIndex,f).next(y=>Pe.forEach(y,I=>{It(I.userId===l.userId);const S=Il(this.N,I);return Pm(e,l.userId,S).next(()=>{})}))}))}xe(e){const t=e.store(br.store),s=e.store(ar.store);return e.store(xs.store).get(xs.key).next(u=>{const l=[];return s.Kt((f,y)=>{const I=new fn(f),S=[0,Js(I)];l.push(t.get(S).next(M=>M?Pe.resolve():t.put(new br(0,Js(I),u.highestListenSequenceNumber))))}).next(()=>Pe.waitFor(l))})}ke(e,t){e.createObjectStore(vl.store,{keyPath:vl.keyPath});const s=t.store(vl.store),u=new Nm,l=f=>{if(u.add(f)){const y=f.lastSegment(),I=f.popLast();return s.put({collectionId:y,parent:Js(I)})}};return t.store(ar.store).Kt({qt:!0},(f,y)=>{const I=new fn(f);return l(I.popLast())}).next(()=>t.store($r.store).Kt({qt:!0},([f,y,I],S)=>{const M=ou(y);return l(M.popLast())}))}$e(e){const t=e.store(ei.store);return t.Kt((s,u)=>{const l=up(u),f=Kv(this.N,l);return t.put(f)})}}function sD(n){n.createObjectStore(br.store,{keyPath:br.keyPath}).createIndex(br.documentTargetsIndex,br.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(ei.store,{keyPath:ei.keyPath}).createIndex(ei.queryTargetsIndexName,ei.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(xs.store)}const Fm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Lm{constructor(e,t,s,u,l,f,y,I,S,M){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Oe=l,this.window=f,this.document=y,this.Fe=S,this.Me=M,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=F=>Promise.resolve(),!Lm.bt())throw new Me(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new CT(this,u),this.We=t+"main",this.N=new zI(I),this.Ge=new Ia(this.We,11,new AT(this.N)),this.ze=new IT(this.referenceDelegate,this.N),this.Ht=new YI,this.He=new Jv(this.N,this.Ht),this.Je=new KI,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===M&&wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(pe.FAILED_PRECONDITION,Fm);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new Ys(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var s=(0,Ee.Z)(function*(u){if(t.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,Ee.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Xv(e).put(new au(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(dh(e))return je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return mh(e).get(Rs.key).next(t=>Pe.resolve(this.an(t)))}un(e){return Xv(e).delete(this.clientId)}hn(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=ti(s,au.store);return u.Lt().next(l=>{const f=e.fn(l,18e5),y=l.filter(I=>-1===f.indexOf(I));return Pe.forEach(y,I=>u.delete(I.clientId)).next(()=>y)})}).catch(()=>[]);if(e.Ye)for(const s of t)e.Ye.removeItem(e.dn(s.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}an(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?Pe.resolve(!0):mh(e).get(Rs.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.an(t)&&this.networkEnabled)return!0;if(!this.an(t)){if(!t.allowTabSynchronization)throw new Me(pe.FAILED_PRECONDITION,Fm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xv(e).Lt().next(s=>void 0===this.fn(s,5e3).find(u=>{if(this.clientId!==u.clientId){const f=!this.inForeground&&u.inForeground,y=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||f&&y)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[Rs.store,au.store],t=>{const s=new $v(t,Ys.T);return e.on(s).next(()=>e.un(s))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(s=>this.ln(s.updateTimeMs,t)&&!this.wn(s.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>Xv(e).Lt().next(t=>this.fn(t,18e5).map(s=>s.clientId)))}get started(){return this.Be}getMutationQueue(e){return Om.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,s){let l;return je("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",$I,f=>(l=new $v(f,this.Le?this.Le.next():Ys.T),"readwrite-primary"===t?this.sn(l).next(y=>!!y||this.rn(l)).next(y=>{if(!y)throw wr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Me(pe.FAILED_PRECONDITION,HI);return s(l)}).next(y=>this.cn(l).next(()=>y)):this.Tn(l).next(()=>s(l)))).then(f=>(l.raiseOnCommittedEvent(),f))}Tn(e){return mh(e).get(Rs.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)&&!this.an(t)&&!(this.Me||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(pe.FAILED_PRECONDITION,Fm)})}cn(e){const t=new Rs(this.clientId,this.allowTabSynchronization,Date.now());return mh(e).put(Rs.key,t)}static bt(){return Ia.bt()}on(e){const t=mh(e);return t.get(Rs.key).next(s=>this.an(s)?(je("IndexedDbPersistence","Releasing primary lease."),t.delete(Rs.key)):Pe.resolve())}ln(e,t){const s=Date.now();return!(e<s-t||e>s&&(wr(`Detected an update time that is in the future: ${e} > ${s}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,qt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const s=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return je("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return wr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){wr("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mh(n){return ti(n,Rs.store)}function Xv(n){return ti(n,au.store)}function eE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class yh{constructor(e,t){this.progress=e,this.En=t}}class ST{constructor(e,t,s){this.He=e,this.In=t,this.Ht=s}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(s=>this.Rn(e,t,s))}Rn(e,t,s){return this.He.getEntry(e,t).next(u=>{for(const l of s)l.applyToLocalView(u);return u})}bn(e,t){e.forEach((s,u)=>{for(const l of t)l.applyToLocalView(u)})}Pn(e,t){return this.He.getEntries(e,t).next(s=>this.vn(e,s).next(()=>s))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>this.bn(t,s))}getDocumentsMatchingQuery(e,t,s){return st.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.Vn(e,t.path):Iv(t)?this.Sn(e,t,s):this.Dn(e,t,s);var u}Vn(e,t){return this.An(e,new st(t)).next(s=>{let u=Fv();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}Sn(e,t,s){const u=t.collectionGroup;let l=Fv();return this.Ht.getCollectionParents(e,u).next(f=>Pe.forEach(f,y=>{const I=(S=t,M=y.child(u),new Ea(M,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt));var S,M;return this.Dn(e,I,s).next(S=>{S.forEach((M,F)=>{l=l.insert(M,F)})})}).next(()=>l))}Dn(e,t,s){let u,l;return this.He.getDocumentsMatchingQuery(e,t,s).next(f=>(u=f,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(f=>(l=f,this.Cn(e,l,u).next(y=>{u=y;for(const I of l)for(const S of I.mutations){const M=S.key;let F=u.get(M);null==F&&(F=ir.newInvalidDocument(M),u=u.insert(M,F)),Rv(S,F,I.localWriteTime),F.isFoundDocument()||(u=u.remove(M))}}))).next(()=>(u.forEach((f,y)=>{Qf(t,y)||(u=u.remove(f))}),u))}Cn(e,t,s){let u=Tn();for(const f of t)for(const y of f.mutations)y instanceof Qu&&null===s.get(y.key)&&(u=u.add(y.key));let l=s;return this.He.getEntries(e,u).next(f=>(f.forEach((y,I)=>{I.isFoundDocument()&&(l=l.insert(y,I))}),l))}}class cp{constructor(e,t,s,u){this.targetId=e,this.fromCache=t,this.Nn=s,this.xn=u}static kn(e,t){let s=Tn(),u=Tn();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:u=u.add(l.doc.key)}return new cp(e,t.fromCache,s,u)}}class lp{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,s,u){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||s.isEqual(Ft.min())?this.Fn(e,t):this.On.Pn(e,u).next(l=>{const f=this.Mn(t,l);return(Zf(t)||Yf(t))&&this.Ln(t.limitType,f,u,s)?this.Fn(e,t):(cm()<=Zr.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),bv(t)),this.On.getDocumentsMatchingQuery(e,t,s).next(y=>(f.forEach(I=>{y=y.insert(I.key,I)}),y)))});var l}Mn(e,t){let s=new or(Cv(e));return t.forEach((u,l)=>{Qf(e,l)&&(s=s.add(l))}),s}Ln(e,t,s,u){if(s.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(u)>0)}Fn(e,t){return cm()<=Zr.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",bv(t)),this.On.getDocumentsMatchingQuery(e,t,Ft.min())}}class RT{constructor(e,t,s,u){this.persistence=e,this.Bn=t,this.N=u,this.Un=new Mr(Zt),this.qn=new nc(l=>th(l),mm),this.Kn=Ft.min(),this.In=e.getMutationQueue(s),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new ST(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function bl(n,e,t,s){return new RT(n,e,t,s)}function oD(n,e){return aD.apply(this,arguments)}function aD(){return aD=(0,Ee.Z)(function*(n,e){const t=Qe(n);let s=t.In,u=t.Qn;const l=yield t.persistence.runTransaction("Handle user change","readonly",f=>{let y;return t.In.getAllMutationBatches(f).next(I=>(y=I,s=t.persistence.getMutationQueue(e),u=new ST(t.jn,s,t.persistence.getIndexManager()),s.getAllMutationBatches(f))).next(I=>{const S=[],M=[];let F=Tn();for(const Z of y){S.push(Z.batchId);for(const J of Z.mutations)F=F.add(J.key)}for(const Z of I){M.push(Z.batchId);for(const J of Z.mutations)F=F.add(J.key)}return u.Pn(f,F).next(Z=>({Wn:Z,removedBatchIds:S,addedBatchIds:M}))})});return t.In=s,t.Qn=u,t.Bn.$n(t.Qn),l}),aD.apply(this,arguments)}function xT(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),l=t.jn.newChangeBuffer({trackRemovals:!0});return function(f,y,I,S){const M=I.batch,F=M.keys();let Z=Pe.resolve();return F.forEach(J=>{Z=Z.next(()=>S.getEntry(y,J)).next(Ae=>{const Ye=I.docVersions.get(J);It(null!==Ye),Ae.version.compareTo(Ye)<0&&(M.applyToRemoteDocument(Ae,I),Ae.isValidDocument()&&S.addEntry(Ae,I.commitVersion))})}),Z.next(()=>f.In.removeMutationBatch(y,M))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.In.performConsistencyCheck(s)).next(()=>t.Qn.Pn(s,u))})}function Uo(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ze.getLastRemoteSnapshotVersion(t))}function uD(n,e){const t=Qe(n),s=e.snapshotVersion;let u=t.Un;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const f=t.jn.newChangeBuffer({trackRemovals:!0});u=t.Un;const y=[];e.targetChanges.forEach((S,M)=>{const F=u.get(M);if(!F)return;y.push(t.ze.removeMatchingKeys(l,S.removedDocuments,M).next(()=>t.ze.addMatchingKeys(l,S.addedDocuments,M)));const Z=S.resumeToken;if(Z.approximateByteSize()>0){const J=F.withResumeToken(Z,s).withSequenceNumber(l.currentSequenceNumber);u=u.insert(M,J),Ae=F,nt=S,It((Ye=J).resumeToken.approximateByteSize()>0),(0===Ae.resumeToken.approximateByteSize()||Ye.snapshotVersion.toMicroseconds()-Ae.snapshotVersion.toMicroseconds()>=3e8||nt.addedDocuments.size+nt.modifiedDocuments.size+nt.removedDocuments.size>0)&&y.push(t.ze.updateTargetData(l,J))}var Ae,Ye,nt});let I=Qs();if(e.documentUpdates.forEach((S,M)=>{e.resolvedLimboDocuments.has(S)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(l,S))}),y.push(NT(l,f,e.documentUpdates,s,void 0).next(S=>{I=S})),!s.isEqual(Ft.min())){const S=t.ze.getLastRemoteSnapshotVersion(l).next(M=>t.ze.setTargetsMetadata(l,l.currentSequenceNumber,s));y.push(S)}return Pe.waitFor(y).next(()=>f.apply(l)).next(()=>t.Qn.vn(l,I)).next(()=>I)}).then(l=>(t.Un=u,l))}function NT(n,e,t,s,u){let l=Tn();return t.forEach(f=>l=l.add(f)),e.getEntries(n,l).next(f=>{let y=Qs();return t.forEach((I,S)=>{const M=f.get(I),F=(null==u?void 0:u.get(I))||s;S.isNoDocument()&&S.version.isEqual(Ft.min())?(e.removeEntry(I,F),y=y.insert(I,S)):!M.isValidDocument()||S.version.compareTo(M.version)>0||0===S.version.compareTo(M.version)&&M.hasPendingWrites?(e.addEntry(S,F),y=y.insert(I,S)):je("LocalStore","Ignoring outdated watch update for ",I,". Current version:",M.version," Watch version:",S.version)}),y})}function Vm(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.In.getNextMutationBatchAfterBatchId(s,e)))}function _h(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return t.ze.getTargetData(s,e).next(l=>l?(u=l,Pe.resolve(u)):t.ze.allocateTargetId(s).next(f=>(u=new Xu(e,f,0,s.currentSequenceNumber),t.ze.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=t.Un.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.Un=t.Un.insert(s.targetId,s),t.qn.set(e,s.targetId)),s})}function vh(n,e,t){return cD.apply(this,arguments)}function cD(){return cD=(0,Ee.Z)(function*(n,e,t){const s=Qe(n),u=s.Un.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",l,f=>s.persistence.referenceDelegate.removeTarget(f,u)))}catch(f){if(!dh(f))throw f;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}s.Un=s.Un.remove(e),s.qn.delete(u.target)}),cD.apply(this,arguments)}function Um(n,e,t){const s=Qe(n);let u=Ft.min(),l=Tn();return s.persistence.runTransaction("Execute query","readonly",f=>function(y,I,S){const M=Qe(y),F=M.qn.get(S);return void 0!==F?Pe.resolve(M.Un.get(F)):M.ze.getTargetData(I,S)}(s,f,Ss(e)).next(y=>{if(y)return u=y.lastLimboFreeSnapshotVersion,s.ze.getMatchingKeysForTargetId(f,y.targetId).next(I=>{l=I})}).next(()=>s.Bn.getDocumentsMatchingQuery(f,e,t?u:Ft.min(),t?l:Tn())).next(y=>({documents:y,Gn:l})))}function lD(n,e){const t=Qe(n),s=Qe(t.ze),u=t.Un.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",l=>s.Tt(l,e).next(f=>f?f.target:null))}function dD(n){const e=Qe(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(s,u,l){const f=Qe(s);let y=Qs(),I=qv(l);const S=ba(u),M=IDBKeyRange.lowerBound(I,!0);return S.Kt({index:ar.readTimeIndex,range:M},(F,Z)=>{const J=Wv(f.N,Z);y=y.insert(J.key,J),I=Z.readTime}).next(()=>({En:y,readTime:qI(I)}))}(e.jn,t,e.Kn)).then(({En:t,readTime:s})=>(e.Kn=s,t))}function Bm(){return Bm=(0,Ee.Z)(function*(n){const e=Qe(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(s){const u=ba(s);let l=Ft.min();return u.Kt({index:ar.readTimeIndex,reverse:!0},(f,y,I)=>{y.readTime&&(l=qI(y.readTime)),I.done()}).next(()=>l)}(t)).then(t=>{e.Kn=t})}),Bm.apply(this,arguments)}function rc(){return rc=(0,Ee.Z)(function*(n,e,t,s){const u=Qe(n);let l=Tn(),f=Qs(),y=wI();for(const M of t){const F=e.zn(M.metadata.name);M.document&&(l=l.add(F)),f=f.insert(F,e.Hn(M)),y=y.insert(F,e.Jn(M.metadata.readTime))}const I=u.jn.newChangeBuffer({trackRemovals:!0}),S=yield _h(u,(M=s,Ss(pl(fn.fromString(`__bundle__/docs/${M}`)))));var M;return u.persistence.runTransaction("Apply bundle documents","readwrite",M=>NT(M,I,f,Ft.min(),y).next(F=>(I.apply(M),F)).next(F=>u.ze.removeMatchingKeysForTargetId(M,S.targetId).next(()=>u.ze.addMatchingKeys(M,l,S.targetId)).next(()=>u.Qn.vn(M,F)).next(()=>F)))}),rc.apply(this,arguments)}function jm(n,e){return Cl.apply(this,arguments)}function Cl(){return Cl=(0,Ee.Z)(function*(n,e,t=Tn()){const s=yield _h(n,Ss(Zv(e.bundledQuery))),u=Qe(n);return u.persistence.runTransaction("Save named query","readwrite",l=>{const f=jr(e.readTime);if(s.snapshotVersion.compareTo(f)>=0)return u.Je.saveNamedQuery(l,e);const y=s.withResumeToken(Br.EMPTY_BYTE_STRING,f);return u.Un=u.Un.insert(y.targetId,y),u.ze.updateTargetData(l,y).next(()=>u.ze.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>u.ze.addMatchingKeys(l,t,s.targetId)).next(()=>u.Je.saveNamedQuery(l,e))})}),Cl.apply(this,arguments)}class PT{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return Pe.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var s;return this.Yn.set(t.id,{id:(s=t).id,version:s.version,createTime:jr(s.createTime)}),Pe.resolve()}getNamedQuery(e,t){return Pe.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(s=t).name,query:Zv(s.bundledQuery),readTime:jr(s.readTime)}),Pe.resolve();var s}}class $m{constructor(){this.Zn=new or(Hr.ts),this.es=new or(Hr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const s=new Hr(e,t);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.rs(new Hr(e,t))}os(e,t){e.forEach(s=>this.removeReference(s,t))}cs(e){const t=new st(new fn([])),s=new Hr(t,e),u=new Hr(t,e+1),l=[];return this.es.forEachInRange([s,u],f=>{this.rs(f),l.push(f.key)}),l}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new st(new fn([])),s=new Hr(t,e),u=new Hr(t,e+1);let l=Tn();return this.es.forEachInRange([s,u],f=>{l=l.add(f.key)}),l}containsKey(e){const t=new Hr(e,0),s=this.Zn.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Hr{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return st.comparator(e.key,t.key)||Zt(e.ls,t.ls)}static ns(e,t){return Zt(e.ls,t.ls)||st.comparator(e.key,t.key)}}class MT{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new or(Hr.ts)}checkEmpty(e){return Pe.resolve(0===this.In.length)}addMutationBatch(e,t,s,u){const l=this.fs;this.fs++;const f=new Hv(l,t,s,u);this.In.push(f);for(const y of u)this.ds=this.ds.add(new Hr(y.key,l)),this.Ht.addToCollectionParentIndex(e,y.key.path.popLast());return Pe.resolve(f)}lookupMutationBatch(e,t){return Pe.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const u=this._s(t+1),l=u<0?0:u;return Pe.resolve(this.In.length>l?this.In[l]:null)}getHighestUnacknowledgedBatchId(){return Pe.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return Pe.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Hr(t,0),u=new Hr(t,Number.POSITIVE_INFINITY),l=[];return this.ds.forEachInRange([s,u],f=>{const y=this.ws(f.ls);l.push(y)}),Pe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new or(Zt);return t.forEach(u=>{const l=new Hr(u,0),f=new Hr(u,Number.POSITIVE_INFINITY);this.ds.forEachInRange([l,f],y=>{s=s.add(y.ls)})}),Pe.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1;let l=s;st.isDocumentKey(l)||(l=l.child(""));const f=new Hr(new st(l),0);let y=new or(Zt);return this.ds.forEachWhile(I=>{const S=I.key.path;return!!s.isPrefixOf(S)&&(S.length===u&&(y=y.add(I.ls)),!0)},f),Pe.resolve(this.gs(y))}gs(e){const t=[];return e.forEach(s=>{const u=this.ws(s);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){It(0===this.ys(t.batchId,"removed")),this.In.shift();let s=this.ds;return Pe.forEach(t.mutations,u=>{const l=new Hr(u.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.ds=s})}te(e){}containsKey(e,t){const s=new Hr(t,0),u=this.ds.firstAfterOrEqual(s);return Pe.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return Pe.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class OT{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new Mr(st.comparator),this.size=0}addEntry(e,t,s){const u=t.key,l=this.docs.get(u),f=l?l.size:0,y=this.ps(t);return this.docs=this.docs.insert(u,{document:t.clone(),size:y,readTime:s}),this.size+=y-f,this.Ht.addToCollectionParentIndex(e,u.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Pe.resolve(s?s.document.clone():ir.newInvalidDocument(t))}getEntries(e,t){let s=Qs();return t.forEach(u=>{const l=this.docs.get(u);s=s.insert(u,l?l.document.clone():ir.newInvalidDocument(u))}),Pe.resolve(s)}getDocumentsMatchingQuery(e,t,s){let u=Qs();const l=new st(t.path.child("")),f=this.docs.getIteratorFrom(l);for(;f.hasNext();){const{key:y,value:{document:I,readTime:S}}=f.getNext();if(!t.path.isPrefixOf(y.path))break;S.compareTo(s)<=0||Qf(t,I)&&(u=u.insert(I.key,I.clone()))}return Pe.resolve(u)}Ts(e,t){return Pe.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new kT(this)}getSize(e){return Pe.resolve(this.size)}}class kT extends Qv{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((s,u)=>{u.document.isValidDocument()?t.push(this.Se.addEntry(e,u.document,this.getReadTime(s))):this.Se.removeEntry(s)}),Pe.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class rE{constructor(e){this.persistence=e,this.Es=new nc(t=>th(t),mm),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.Is=0,this.As=new $m,this.targetCount=0,this.Rs=Dl.se()}forEachTarget(e,t){return this.Es.forEach((s,u)=>t(u)),Pe.resolve()}getLastRemoteSnapshotVersion(e){return Pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Pe.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Is&&(this.Is=t),Pe.resolve()}ce(e){this.Es.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Dl(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,Pe.resolve()}updateTargetData(e,t){return this.ce(t),Pe.resolve()}removeTargetData(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,Pe.resolve()}removeTargets(e,t,s){let u=0;const l=[];return this.Es.forEach((f,y)=>{y.sequenceNumber<=t&&null===s.get(y.targetId)&&(this.Es.delete(f),l.push(this.removeMatchingKeysForTargetId(e,y.targetId)),u++)}),Pe.waitFor(l).next(()=>u)}getTargetCount(e){return Pe.resolve(this.targetCount)}getTargetData(e,t){const s=this.Es.get(t)||null;return Pe.resolve(s)}addMatchingKeys(e,t,s){return this.As.ss(t,s),Pe.resolve()}removeMatchingKeys(e,t,s){this.As.os(t,s);const u=this.persistence.referenceDelegate,l=[];return u&&t.forEach(f=>{l.push(u.markPotentiallyOrphaned(e,f))}),Pe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),Pe.resolve()}getMatchingKeysForTargetId(e,t){const s=this.As.hs(t);return Pe.resolve(s)}containsKey(e,t){return Pe.resolve(this.As.containsKey(t))}}class FT{constructor(e,t){this.bs={},this.Le=new Ys(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new rE(this),this.Ht=new wT,this.He=new OT(this.Ht,s=>this.referenceDelegate.Ps(s)),this.N=new zI(t),this.Je=new PT(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new MT(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,s){je("MemoryPersistence","Starting transaction:",e);const u=new cR(this.Le.next());return this.referenceDelegate.vs(),s(u).next(l=>this.referenceDelegate.Vs(u).next(()=>l)).toPromise().then(l=>(u.raiseOnCommittedEvent(),l))}Ss(e,t){return Pe.or(Object.values(this.bs).map(s=>()=>s.containsKey(e,t)))}}class cR extends Bv{constructor(e){super(),this.currentSequenceNumber=e}}class iE{constructor(e){this.persistence=e,this.Ds=new $m,this.Cs=null}static Ns(e){return new iE(e)}get xs(){if(this.Cs)return this.Cs;throw ct()}addReference(e,t,s){return this.Ds.addReference(s,t),this.xs.delete(s.toString()),Pe.resolve()}removeReference(e,t,s){return this.Ds.removeReference(s,t),this.xs.add(s.toString()),Pe.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Pe.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(u=>this.xs.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(l=>this.xs.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pe.forEach(this.xs,s=>{const u=st.fromPath(s);return this.ks(e,u).next(l=>{l||t.removeEntry(u)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(s=>{s?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return Pe.or([()=>Pe.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function hD(n,e){return`firestore_clients_${n}_${e}`}function ic(n,e,t){let s=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Hm(n,e){return`firestore_targets_${n}_${e}`}class cu{constructor(e,t,s,u){this.user=e,this.batchId=t,this.state=s,this.error=u}static $s(e,t,s){const u=JSON.parse(s);let l,f="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return f&&u.error&&(f="string"==typeof u.error.message&&"string"==typeof u.error.code,f&&(l=new Me(u.error.code,u.error.message))),f?new cu(e,t,u.state,l):(wr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gm{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static $s(e,t){const s=JSON.parse(t);let u,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Me(s.error.code,s.error.message))),l?new Gm(e,s.state,u):(wr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const s=JSON.parse(t);let u="object"==typeof s&&s.activeTargetIds instanceof Array,l=Dm();for(let f=0;u&&f<s.activeTargetIds.length;++f)u=cI(s.activeTargetIds[f]),l=l.add(s.activeTargetIds[f]);return u?new dp(e,l):(wr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class sE{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new sE(t.clientId,t.onlineState):(wr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class fD{constructor(){this.activeTargetIds=Dm()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hp{constructor(e,t,s,u,l){this.window=e,this.Oe=t,this.persistenceKey=s,this.Ls=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Mr(Zt),this.started=!1,this.Ks=[];const f=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.js=hD(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new fD),this.Ws=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(y){return`firestore_bundle_loaded_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.pn();for(const u of t){if(u===e.Ls)continue;const l=e.getItem(hD(e.persistenceKey,u));if(l){const f=dp.$s(u,l);f&&(e.qs=e.qs.insert(f.clientId,f))}}e.Ys();const s=e.storage.getItem(e.Hs);if(s){const u=e.Xs(s);u&&e.Zs(u)}for(const u of e.Ks)e.Us(u);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((s,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,s){this.ei(e,t,s),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Hm(this.persistenceKey,e));if(s){const u=Gm.$s(e,s);u&&(t=u.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Hm(this.persistenceKey,e))}updateQueryState(e,t,s){this.ii(e,t,s)}handleUserChange(e,t,s){t.forEach(u=>{this.ni(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return je("SharedClientState","READ",e,t),t}setItem(e,t){je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const s=e;if(s.storageArea===this.storage){if(je("SharedClientState","EVENT",s.key,s.newValue),s.key===this.js)return void wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==s.key)if(t.Ws.test(s.key)){if(null==s.newValue){const u=t.ci(s.key);return t.ai(u,null)}{const u=t.ui(s.key,s.newValue);if(u)return t.ai(u.clientId,u)}}else if(t.Gs.test(s.key)){if(null!==s.newValue){const u=t.hi(s.key,s.newValue);if(u)return t.li(u)}}else if(t.zs.test(s.key)){if(null!==s.newValue){const u=t.fi(s.key,s.newValue);if(u)return t.di(u)}}else if(s.key===t.Hs){if(null!==s.newValue){const u=t.Xs(s.newValue);if(u)return t.Zs(u)}}else if(s.key===t.Qs){const u=function(l){let f=Ys.T;if(null!=l)try{const y=JSON.parse(l);It("number"==typeof y),f=y}catch(y){wr("SharedClientState","Failed to read sequence number from WebStorage",y)}return f}(s.newValue);u!==Ys.T&&t.sequenceNumberHandler(u)}else if(s.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(s)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,s){const u=new cu(this.currentUser,e,t,s),l=ic(this.persistenceKey,this.currentUser,e);this.setItem(l,u.Os())}ni(e){const t=ic(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,s){const u=Hm(this.persistenceKey,e),l=new Gm(e,t,s);this.setItem(u,l.Os())}oi(){this.setItem(this.Js,"value-not-used")}ci(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const s=this.ci(e);return dp.$s(s,t)}hi(e,t){const s=this.Gs.exec(e),u=Number(s[1]);return cu.$s(new Yr(void 0!==s[2]?s[2]:null),u,t)}fi(e,t){const s=this.zs.exec(e),u=Number(s[1]);return Gm.$s(u,t)}Xs(e){return sE.$s(e)}li(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ai(e,t){const s=t?this.qs.insert(e,t):this.qs.remove(e),u=this.ti(this.qs),l=this.ti(s),f=[],y=[];return l.forEach(I=>{u.has(I)||f.push(I)}),u.forEach(I=>{l.has(I)||y.push(I)}),this.syncEngine.gi(f,y).then(()=>{this.qs=s})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=Dm();return e.forEach((s,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class LT{constructor(){this.yi=new fD,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,s){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new fD,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class lR{Ti(e){}shutdown(){}}class VT{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const pD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class oE{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class UT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,s,u){const l=this.Bi(e,t);je("RestConnection","Sending: ",l,s);const f={};return this.Ui(f,u),this.qi(e,l,f,s).then(y=>(je("RestConnection","Received: ",y),y),y=>{throw Gf("RestConnection",`${e} failed with error: `,y,"url: ",l,"request:",s),y})}Ki(e,t,s,u){return this.Li(e,t,s,u)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+ul,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const s in t.authHeaders)t.authHeaders.hasOwnProperty(s)&&(e[s]=t.authHeaders[s])}Bi(e,t){return`${this.Fi}/v1/${t}:${pD[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,s,u){return new Promise((l,f)=>{const y=new iI;y.listenOnce(Kd.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Ku.NO_ERROR:const S=y.getResponseJson();je("Connection","XHR received:",JSON.stringify(S)),l(S);break;case Ku.TIMEOUT:je("Connection",'RPC "'+e+'" timed out'),f(new Me(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Ku.HTTP_ERROR:const M=y.getStatus();if(je("Connection",'RPC "'+e+'" failed with status:',M,"response text:",y.getResponseText()),M>0){const F=y.getResponseJson().error;if(F&&F.status&&F.message){const Z=function(J){const Ae=J.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(Ae)>=0?Ae:pe.UNKNOWN}(F.status);f(new Me(Z,F.message))}else f(new Me(pe.UNKNOWN,"Server responded with status "+y.getStatus()))}else f(new Me(pe.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{je("Connection",'RPC "'+e+'" completed.')}});const I=JSON.stringify(u);y.send(t,"POST",I,s,15)})}ji(e,t){const s=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=zd(),l=qd(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new Yd({})),this.Ui(f.initMessageHeaders,t),(0,qt.uI)()||(0,qt.b$)()||(0,qt.d)()||(0,qt.w1)()||(0,qt.Mn)()||(0,qt.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const y=s.join("");je("Connection","Creating WebChannel: "+y,f);const I=u.createWebChannel(y,f);let S=!1,M=!1;const F=new oE({vi:J=>{M?je("Connection","Not sending because WebChannel is closed:",J):(S||(je("Connection","Opening WebChannel transport."),I.open(),S=!0),je("Connection","WebChannel sending:",J),I.send(J))},Vi:()=>I.close()}),Z=(J,Ae,Ye)=>{J.listen(Ae,nt=>{try{Ye(nt)}catch(Wt){setTimeout(()=>{throw Wt},0)}})};return Z(I,nu.EventType.OPEN,()=>{M||je("Connection","WebChannel transport opened.")}),Z(I,nu.EventType.CLOSE,()=>{M||(M=!0,je("Connection","WebChannel transport closed"),F.$i())}),Z(I,nu.EventType.ERROR,J=>{M||(M=!0,Gf("Connection","WebChannel transport errored:",J),F.$i(new Me(pe.UNAVAILABLE,"The operation could not be completed")))}),Z(I,nu.EventType.MESSAGE,J=>{var Ae;if(!M){const Ye=J.data[0];It(!!Ye);const nt=Ye,Wt=nt.error||(null===(Ae=nt[0])||void 0===Ae?void 0:Ae.error);if(Wt){je("Connection","WebChannel received error:",Wt);const kn=Wt.status;let ur=function(Xn){const no=Dr[Xn];if(void 0!==no)return Ov(no)}(kn),zt=Wt.message;void 0===ur&&(ur=pe.INTERNAL,zt="Unknown error status: "+kn+" with message "+Wt.message),M=!0,F.$i(new Me(ur,zt)),I.close()}else je("Connection","WebChannel received:",Ye),F.Oi(Ye)}}),Z(l,Zd.STAT_EVENT,J=>{J.stat===al.PROXY?je("Connection","Detected buffering proxy"):J.stat===al.NOPROXY&&je("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.ki()},0),F}}function gD(){return"undefined"!=typeof window?window:null}function Wm(){return"undefined"!=typeof document?document:null}function fp(n){return new RI(n,!0)}class aE{constructor(e,t,s=1e3,u=1.5,l=6e4){this.Oe=e,this.timerId=t,this.Qi=s,this.Wi=u,this.Gi=l,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),s=Math.max(0,Date.now()-this.Ji),u=Math.max(0,t-s);u>0&&je("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,u,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class mD{constructor(e,t,s,u,l,f,y){this.Oe=e,this.er=s,this.nr=u,this.sr=l,this.credentialsProvider=f,this.listener=y,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new aE(e,t)}ur(){return 1===this.state||5===this.state||this.hr()}hr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.lr()}stop(){var e=this;return(0,Ee.Z)(function*(){e.ur()&&(yield e.close(0))})()}dr(){this.state=0,this.ar.reset()}wr(){this.hr()&&null===this.rr&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this._r()))}mr(e){this.gr(),this.stream.send(e)}_r(){var e=this;return(0,Ee.Z)(function*(){if(e.hr())return e.close(0)})()}gr(){this.rr&&(this.rr.cancel(),this.rr=null)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var s=this;return(0,Ee.Z)(function*(){s.gr(),s.yr(),s.ar.cancel(),s.ir++,4!==e?s.ar.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(wr(t.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),s.ar.Yi()):t&&t.code===pe.UNAUTHENTICATED&&3!==s.state&&s.credentialsProvider.invalidateToken(),null!==s.stream&&(s.pr(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Ci(t)})()}pr(){}auth(){this.state=1;const e=this.Tr(this.ir),t=this.ir;this.credentialsProvider.getToken().then(s=>{this.ir===t&&this.Er(s)},s=>{e(()=>{const u=new Me(pe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Ir(u)})})}Er(e){const t=this.Tr(this.ir);this.stream=this.Ar(e),this.stream.Si(()=>{t(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.nr,1e4,()=>(this.hr()&&(this.state=3),Promise.resolve())),this.listener.Si()))}),this.stream.Ci(s=>{t(()=>this.Ir(s))}),this.stream.onMessage(s=>{t(()=>this.onMessage(s))})}lr(){var e=this;this.state=5,this.ar.Xi((0,Ee.Z)(function*(){e.state=0,e.start()}))}Ir(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Tr(e){return t=>{this.Oe.enqueueAndForget(()=>this.ir===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BT extends mD{constructor(e,t,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,l),this.N=u}Ar(e){return this.sr.ji("Listen",e)}onMessage(e){this.ar.reset();const t=function(n,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(I=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===I?1:"REMOVE"===I?2:"CURRENT"===I?3:"RESET"===I?4:ct(),u=e.targetChange.targetIds||[],l=function(I,S){return I.D?(It(void 0===S||"string"==typeof S),Br.fromBase64String(S||"")):(It(void 0===S||S instanceof Uint8Array),Br.fromUint8Array(S||new Uint8Array))}(n,e.targetChange.resumeToken),f=e.targetChange.cause,y=f&&function(I){const S=void 0===I.code?pe.UNKNOWN:Ov(I.code);return new Me(S,I.message||"")}(f);t=new DI(s,u,l,y||null)}else if("documentChange"in e){const s=e.documentChange,u=Lo(n,s.document.name),l=jr(s.document.updateTime),f=new Jr({mapValue:{fields:s.document.fields}}),y=ir.newFoundDocument(u,l,f);t=new bm(s.targetIds||[],s.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const s=e.documentDelete,u=Lo(n,s.document),l=s.readTime?jr(s.readTime):Ft.min(),f=ir.newNoDocument(u,l);t=new bm([],s.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const s=e.documentRemove,u=Lo(n,s.document);t=new bm([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return ct();{const s=e.filter,l=new vI(s.count||0);t=new II(s.targetId,l)}}var I;return t}(this.N,e),s=function(u){if(!("targetChange"in u))return Ft.min();const l=u.targetChange;return l.targetIds&&l.targetIds.length?Ft.min():l.readTime?jr(l.readTime):Ft.min()}(e);return this.listener.Rr(t,s)}br(e){const t={};t.database=rp(this.N),t.addTarget=function(u,l){let f;const y=l.target;return f=nh(y)?{documents:MI(u,y)}:{query:OI(u,y)},f.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?f.resumeToken=Lv(u,l.resumeToken):l.snapshotVersion.compareTo(Ft.min())>0&&(f.readTime=uh(u,l.snapshotVersion.toTimestamp())),f}(this.N,e);const s=function(n,e){const t=function(s,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ct()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.mr(t)}Pr(e){const t={};t.database=rp(this.N),t.removeTarget=e,this.mr(t)}}class jT extends mD{constructor(e,t,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,l),this.N=u,this.vr=!1}get Vr(){return this.vr}start(){this.vr=!1,this.lastStreamToken=void 0,super.start()}pr(){this.vr&&this.Sr([])}Ar(e){return this.sr.ji("Write",e)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.vr){this.ar.reset();const t=function(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(s,u){let l=jr(s.updateTime?s.updateTime:u);return l.isEqual(Ft.min())&&(l=jr(u)),new yI(l,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=jr(e.commitTime);return this.listener.Dr(s,t)}return It(!e.writeResults||0===e.writeResults.length),this.vr=!0,this.listener.Cr()}Nr(){const e={};e.database=rp(this.N),this.mr(e)}Sr(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>ip(this.N,s))};this.mr(t)}}class $T extends class{}{constructor(e,t,s){super(),this.credentials=e,this.sr=t,this.N=s,this.kr=!1}$r(){if(this.kr)throw new Me(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,s){return this.$r(),this.credentials.getToken().then(u=>this.sr.Li(e,t,s,u)).catch(u=>{throw"FirebaseError"===u.name?(u.code===pe.UNAUTHENTICATED&&this.credentials.invalidateToken(),u):new Me(pe.UNKNOWN,u.toString())})}Ki(e,t,s){return this.$r(),this.credentials.getToken().then(u=>this.sr.Ki(e,t,s,u)).catch(u=>{throw"FirebaseError"===u.name?(u.code===pe.UNAUTHENTICATED&&this.credentials.invalidateToken(),u):new Me(pe.UNKNOWN,u.toString())})}terminate(){this.kr=!0}}class HT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}Lr(){0===this.Or&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.Ur("Backend didn't respond within 10 seconds."),this.Br("Offline"),Promise.resolve())))}qr(e){"Online"===this.state?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Br("Offline")))}set(e){this.Kr(),this.Or=0,"Online"===e&&(this.Mr=!1),this.Br(e)}Br(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Ur(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Mr?(wr(t),this.Mr=!1):je("OnlineStateTracker",t)}Kr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class pp{constructor(e,t,s,u,l){var f=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=l,this.zr.Ti(y=>{s.enqueueAndForget((0,Ee.Z)(function*(){var I;sc(f)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(I=(0,Ee.Z)(function*(S){const M=Qe(S);M.Wr.add(4),yield Tl(M),M.Hr.set("Unknown"),M.Wr.delete(4),yield Eh(M)}),function(S){return I.apply(this,arguments)})(f))}))}),this.Hr=new HT(s,u)}}function Eh(n){return zm.apply(this,arguments)}function zm(){return zm=(0,Ee.Z)(function*(n){if(sc(n))for(const e of n.Gr)yield e(!0)}),zm.apply(this,arguments)}function Tl(n){return qm.apply(this,arguments)}function qm(){return qm=(0,Ee.Z)(function*(n){for(const e of n.Gr)yield e(!1)}),qm.apply(this,arguments)}function gp(n,e){const t=Qe(n);t.Qr.has(e.targetId)||(t.Qr.set(e.targetId,e),lE(t)?cE(t):Ih(t).hr()&&uE(t,e))}function mp(n,e){const t=Qe(n),s=Ih(t);t.Qr.delete(e),s.hr()&&yD(t,e),0===t.Qr.size&&(s.hr()?s.wr():sc(t)&&t.Hr.set("Unknown"))}function uE(n,e){n.Jr.Y(e.targetId),Ih(n).br(e)}function yD(n,e){n.Jr.Y(e),Ih(n).Pr(e)}function cE(n){n.Jr=new mT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.Qr.get(e)||null}),Ih(n).start(),n.Hr.Lr()}function lE(n){return sc(n)&&!Ih(n).ur()&&n.Qr.size>0}function sc(n){return 0===Qe(n).Wr.size}function _D(n){n.Jr=void 0}function yp(n){return dE.apply(this,arguments)}function dE(){return dE=(0,Ee.Z)(function*(n){n.Qr.forEach((e,t)=>{uE(n,e)})}),dE.apply(this,arguments)}function hE(n,e){return Xs.apply(this,arguments)}function Xs(){return Xs=(0,Ee.Z)(function*(n,e){_D(n),lE(n)?(n.Hr.qr(e),cE(n)):n.Hr.set("Unknown")}),Xs.apply(this,arguments)}function GT(n,e,t){return wh.apply(this,arguments)}function wh(){return wh=(0,Ee.Z)(function*(n,e,t){if(n.Hr.set("Online"),e instanceof DI&&2===e.state&&e.cause)try{yield(s=(0,Ee.Z)(function*(u,l){const f=l.cause;for(const y of l.targetIds)u.Qr.has(y)&&(yield u.remoteSyncer.rejectListen(y,f),u.Qr.delete(y),u.Jr.removeTarget(y))}),function(u,l){return s.apply(this,arguments)})(n,e)}catch(s){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Km(n,s)}else if(e instanceof bm?n.Jr.rt(e):e instanceof II?n.Jr.ft(e):n.Jr.at(e),!t.isEqual(Ft.min()))try{const s=yield Uo(n.localStore);t.compareTo(s)>=0&&(yield function(u,l){const f=u.Jr._t(l);return f.targetChanges.forEach((y,I)=>{if(y.resumeToken.approximateByteSize()>0){const S=u.Qr.get(I);S&&u.Qr.set(I,S.withResumeToken(y.resumeToken,l))}}),f.targetMismatches.forEach(y=>{const I=u.Qr.get(y);if(!I)return;u.Qr.set(y,I.withResumeToken(Br.EMPTY_BYTE_STRING,I.snapshotVersion)),yD(u,y);const S=new Xu(I.target,y,1,I.sequenceNumber);uE(u,S)}),u.remoteSyncer.applyRemoteEvent(f)}(n,t))}catch(s){je("RemoteStore","Failed to raise snapshot:",s),yield Km(n,s)}var s}),wh.apply(this,arguments)}function Km(n,e,t){return vD.apply(this,arguments)}function vD(){return vD=(0,Ee.Z)(function*(n,e,t){if(!dh(e))throw e;n.Wr.add(1),yield Tl(n),n.Hr.set("Offline"),t||(t=()=>Uo(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n.Wr.delete(1),yield Eh(n)}))}),vD.apply(this,arguments)}function ED(n,e){return e().catch(t=>Km(n,t,e))}function Ca(n){return fE.apply(this,arguments)}function fE(){return fE=(0,Ee.Z)(function*(n){const e=Qe(n),t=Al(e);let s=e.jr.length>0?e.jr[e.jr.length-1].batchId:-1;for(;WT(e);)try{const u=yield Vm(e.localStore,s);if(null===u){0===e.jr.length&&t.wr();break}s=u.batchId,zT(e,u)}catch(u){yield Km(e,u)}_p(e)&&wD(e)}),fE.apply(this,arguments)}function WT(n){return sc(n)&&n.jr.length<10}function zT(n,e){n.jr.push(e);const t=Al(n);t.hr()&&t.Vr&&t.Sr(e.mutations)}function _p(n){return sc(n)&&!Al(n).ur()&&n.jr.length>0}function wD(n){Al(n).start()}function dR(n){return pE.apply(this,arguments)}function pE(){return pE=(0,Ee.Z)(function*(n){Al(n).Nr()}),pE.apply(this,arguments)}function Zm(n){return gE.apply(this,arguments)}function gE(){return gE=(0,Ee.Z)(function*(n){const e=Al(n);for(const t of n.jr)e.Sr(t.mutations)}),gE.apply(this,arguments)}function qT(n,e,t){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,Ee.Z)(function*(n,e,t){const s=n.jr.shift(),u=Gv.from(s,e,t);yield ED(n,()=>n.remoteSyncer.applySuccessfulWrite(u)),yield Ca(n)}),Ym.apply(this,arguments)}function ID(n,e){return vp.apply(this,arguments)}function vp(){return vp=(0,Ee.Z)(function*(n,e){var t;e&&Al(n).Vr&&(yield(t=(0,Ee.Z)(function*(s,u){if(Mv(l=u.code)&&l!==pe.ABORTED){const f=s.jr.shift();Al(s).dr(),yield ED(s,()=>s.remoteSyncer.rejectFailedWrite(f.batchId,u)),yield Ca(s)}var l}),function(s,u){return t.apply(this,arguments)})(n,e)),_p(n)&&wD(n)}),vp.apply(this,arguments)}function Qm(n,e){return mE.apply(this,arguments)}function mE(){return mE=(0,Ee.Z)(function*(n,e){const t=Qe(n);e?(t.Wr.delete(2),yield Eh(t)):e||(t.Wr.add(2),yield Tl(t),t.Hr.set("Unknown"))}),mE.apply(this,arguments)}function Ih(n){return n.Yr||(n.Yr=function(e,t,s){const u=Qe(e);return u.$r(),new BT(t,u.sr,u.credentials,u.N,s)}(n.datastore,n.asyncQueue,{Si:yp.bind(null,n),Ci:hE.bind(null,n),Rr:GT.bind(null,n)}),n.Gr.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Yr.dr(),lE(n)?cE(n):n.Hr.set("Unknown")):(yield n.Yr.stop(),_D(n))});return function(t){return e.apply(this,arguments)}}())),n.Yr}function Al(n){return n.Xr||(n.Xr=function(e,t,s){const u=Qe(e);return u.$r(),new jT(t,u.sr,u.credentials,u.N,s)}(n.datastore,n.asyncQueue,{Si:dR.bind(null,n),Ci:ID.bind(null,n),Cr:Zm.bind(null,n),Dr:qT.bind(null,n)}),n.Gr.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Xr.dr(),yield Ca(n)):(yield n.Xr.stop(),n.jr.length>0&&(je("RemoteStore",`Stopping write stream with ${n.jr.length} pending writes`),n.jr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Xr}class Ep{constructor(e,t,s,u,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=u,this.removalCallback=l,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(e,t,s,u,l){const f=Date.now()+s,y=new Ep(e,t,f,u,l);return y.start(s),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oc(n,e){if(wr("AsyncQueue",`${e}: ${n}`),dh(n))return new Me(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Sl{constructor(e){this.comparator=e?(t,s)=>e(t,s)||st.comparator(t.key,s.key):(t,s)=>st.comparator(t.key,s.key),this.keyedMap=Fv(),this.sortedSet=new Mr(this.comparator)}static emptySet(e){return new Sl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,l=s.getNext().key;if(!u.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Sl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Jm{constructor(){this.Zr=new Mr(st.comparator)}track(e){const t=e.doc.key,s=this.Zr.get(t);s?0!==e.type&&3===s.type?this.Zr=this.Zr.insert(t,e):3===e.type&&1!==s.type?this.Zr=this.Zr.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Zr=this.Zr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Zr=this.Zr.remove(t):1===e.type&&2===s.type?this.Zr=this.Zr.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):ct():this.Zr=this.Zr.insert(t,e)}eo(){const e=[];return this.Zr.inorderTraversal((t,s)=>{e.push(s)}),e}}class ac{constructor(e,t,s,u,l,f,y,I){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=l,this.fromCache=f,this.syncStateChanged=y,this.excludesMetadataChanges=I}static fromInitialDocuments(e,t,s,u){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new ac(e,t,Sl.emptySet(t),l,s,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sr(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==s[u].type||!t[u].doc.isEqual(s[u].doc))return!1;return!0}}class KT{constructor(){this.no=void 0,this.listeners=[]}}class ZT{constructor(){this.queries=new nc(e=>Dv(e),sr),this.onlineState="Unknown",this.so=new Set}}function yE(n,e){return _E.apply(this,arguments)}function _E(){return _E=(0,Ee.Z)(function*(n,e){const t=Qe(n),s=e.query;let u=!1,l=t.queries.get(s);if(l||(u=!0,l=new KT),u)try{l.no=yield t.onListen(s)}catch(f){const y=oc(f,`Initialization of query '${bv(e.query)}' failed`);return void e.onError(y)}t.queries.set(s,l),l.listeners.push(e),e.io(t.onlineState),l.no&&e.ro(l.no)&&ey(t)}),_E.apply(this,arguments)}function Xm(n,e){return wp.apply(this,arguments)}function wp(){return wp=(0,Ee.Z)(function*(n,e){const t=Qe(n),s=e.query;let u=!1;const l=t.queries.get(s);if(l){const f=l.listeners.indexOf(e);f>=0&&(l.listeners.splice(f,1),u=0===l.listeners.length)}if(u)return t.queries.delete(s),t.onUnlisten(s)}),wp.apply(this,arguments)}function DD(n,e){const t=Qe(n);let s=!1;for(const u of e){const f=t.queries.get(u.query);if(f){for(const y of f.listeners)y.ro(u)&&(s=!0);f.no=u}}s&&ey(t)}function YT(n,e,t){const s=Qe(n),u=s.queries.get(e);if(u)for(const l of u.listeners)l.onError(t);s.queries.delete(e)}function ey(n){n.so.forEach(e=>{e.next()})}class ty{constructor(e,t,s){this.query=e,this.oo=t,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=s||{}}ro(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new ac(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.uo(e)&&(this.oo.next(e),t=!0):this.ho(e,this.onlineState)&&(this.lo(e),t=!0),this.ao=e,t}onError(e){this.oo.error(e)}io(e){this.onlineState=e;let t=!1;return this.ao&&!this.co&&this.ho(this.ao,e)&&(this.lo(this.ao),t=!0),t}ho(e,t){return!e.fromCache||!(this.options.fo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}uo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ao&&this.ao.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}lo(e){e=ac.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.oo.next(e)}}class QT{constructor(e,t){this.payload=e,this.byteLength=t}wo(){return"metadata"in this.payload}}class vE{constructor(e){this.N=e}zn(e){return Lo(this.N,e)}Hn(e){return e.metadata.exists?Tm(this.N,e.document,!1):ir.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return jr(e)}}class bD{constructor(e,t,s){this._o=e,this.localStore=t,this.N=s,this.queries=[],this.documents=[],this.progress=CD(e)}mo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}yo(e){const t=new Map,s=new vE(this.N);for(const u of e)if(u.metadata.queries){const l=s.zn(u.metadata.name);for(const f of u.metadata.queries){const y=(t.get(f)||Tn()).add(l);t.set(f,y)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function(n,e,t,s){return rc.apply(this,arguments)}(e.localStore,new vE(e.N),e.documents,e._o.id),s=e.yo(e.documents);for(const u of e.queries)yield jm(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",new yh(Object.assign({},e.progress),t)})()}}function CD(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class EE{constructor(e){this.key=e}}class TD{constructor(e){this.key=e}}class Mi{constructor(e,t){this.query=e,this.po=t,this.To=null,this.current=!1,this.Eo=Tn(),this.mutatedKeys=Tn(),this.Io=Cv(e),this.Ao=new Sl(this.Io)}get Ro(){return this.po}bo(e,t){const s=t?t.Po:new Jm,u=t?t.Ao:this.Ao;let l=t?t.mutatedKeys:this.mutatedKeys,f=u,y=!1;const I=Zf(this.query)&&u.size===this.query.limit?u.last():null,S=Yf(this.query)&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((M,F)=>{const Z=u.get(M),J=Qf(this.query,F)?F:null,Ae=!!Z&&this.mutatedKeys.has(Z.key),Ye=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let nt=!1;Z&&J?Z.data.isEqual(J.data)?Ae!==Ye&&(s.track({type:3,doc:J}),nt=!0):this.vo(Z,J)||(s.track({type:2,doc:J}),nt=!0,(I&&this.Io(J,I)>0||S&&this.Io(J,S)<0)&&(y=!0)):!Z&&J?(s.track({type:0,doc:J}),nt=!0):Z&&!J&&(s.track({type:1,doc:Z}),nt=!0,(I||S)&&(y=!0)),nt&&(J?(f=f.add(J),l=Ye?l.add(M):l.delete(M)):(f=f.delete(M),l=l.delete(M)))}),Zf(this.query)||Yf(this.query))for(;f.size>this.query.limit;){const M=Zf(this.query)?f.last():f.first();f=f.delete(M.key),l=l.delete(M.key),s.track({type:1,doc:M})}return{Ao:f,Po:s,Ln:y,mutatedKeys:l}}vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const u=this.Ao;this.Ao=e.Ao,this.mutatedKeys=e.mutatedKeys;const l=e.Po.eo();l.sort((S,M)=>function(F,Z){const J=Ae=>{switch(Ae){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return J(F)-J(Z)}(S.type,M.type)||this.Io(S.doc,M.doc)),this.Vo(s);const f=t?this.So():[],y=0===this.Eo.size&&this.current?1:0,I=y!==this.To;return this.To=y,0!==l.length||I?{snapshot:new ac(this.query,e.Ao,u,l,e.mutatedKeys,0===y,I,!1),Do:f}:{Do:f}}io(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new Jm,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}Co(e){return!this.po.has(e)&&!!this.Ao.has(e)&&!this.Ao.get(e).hasLocalMutations}Vo(e){e&&(e.addedDocuments.forEach(t=>this.po=this.po.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.po=this.po.delete(t)),this.current=e.current)}So(){if(!this.current)return[];const e=this.Eo;this.Eo=Tn(),this.Ao.forEach(s=>{this.Co(s.key)&&(this.Eo=this.Eo.add(s.key))});const t=[];return e.forEach(s=>{this.Eo.has(s)||t.push(new TD(s))}),this.Eo.forEach(s=>{e.has(s)||t.push(new EE(s))}),t}No(e){this.po=e.Gn,this.Eo=Tn();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return ac.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,0===this.To)}}class Dh{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class JT{constructor(e){this.key=e,this.ko=!1}}class XT{constructor(e,t,s,u,l,f){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=u,this.currentUser=l,this.maxConcurrentLimboResolutions=f,this.$o={},this.Oo=new nc(y=>Dv(y),sr),this.Fo=new Map,this.Mo=new Set,this.Lo=new Mr(st.comparator),this.Bo=new Map,this.Uo=new $m,this.qo={},this.Ko=new Map,this.jo=Dl.ie(),this.onlineState="Unknown",this.Qo=void 0}get isPrimaryClient(){return!0===this.Qo}}function hR(n,e){return Rl.apply(this,arguments)}function Rl(){return Rl=(0,Ee.Z)(function*(n,e){const t=kD(n);let s,u;const l=t.Oo.get(e);if(l)s=l.targetId,t.sharedClientState.addLocalQueryTarget(s),u=l.view.xo();else{const f=yield _h(t.localStore,Ss(e)),y=t.sharedClientState.addLocalQueryTarget(f.targetId);s=f.targetId,u=yield wE(t,e,s,"current"===y),t.isPrimaryClient&&gp(t.remoteStore,f)}return u}),Rl.apply(this,arguments)}function wE(n,e,t,s){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,Ee.Z)(function*(n,e,t,s){n.Wo=(M,F,Z)=>{return(J=(0,Ee.Z)(function*(Ae,Ye,nt,Wt){let kn=Ye.view.bo(nt);kn.Ln&&(kn=yield Um(Ae.localStore,Ye.query,!1).then(({documents:Xn})=>Ye.view.bo(Xn,kn)));const ur=Wt&&Wt.targetChanges.get(Ye.targetId),zt=Ye.view.applyChanges(kn,Ae.isPrimaryClient,ur);return CE(Ae,Ye.targetId,zt.Do),zt.snapshot}),function(Ae,Ye,nt,Wt){return J.apply(this,arguments)})(n,M,F,Z);var J};const u=yield Um(n.localStore,e,!0),l=new Mi(e,u.Gn),f=l.bo(u.documents),y=np.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==n.onlineState),I=l.applyChanges(f,n.isPrimaryClient,y);CE(n,t,I.Do);const S=new Dh(e,t,l);return n.Oo.set(e,S),n.Fo.has(t)?n.Fo.get(t).push(e):n.Fo.set(t,[e]),I.snapshot}),Ip.apply(this,arguments)}function eA(n,e){return ny.apply(this,arguments)}function ny(){return ny=(0,Ee.Z)(function*(n,e){const t=Qe(n),s=t.Oo.get(e),u=t.Fo.get(s.targetId);if(u.length>1)return t.Fo.set(s.targetId,u.filter(l=>!sr(l,e))),void t.Oo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield vh(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),mp(t.remoteStore,s.targetId),uc(t,s.targetId)}).catch(tc))):(uc(t,s.targetId),yield vh(t.localStore,s.targetId,!0))}),ny.apply(this,arguments)}function IE(){return IE=(0,Ee.Z)(function*(n,e,t){const s=FD(n);try{const u=yield function(l,f){const y=Qe(l),I=Pr.now(),S=f.reduce((F,Z)=>F.add(Z.key),Tn());let M;return y.persistence.runTransaction("Locally write mutations","readwrite",F=>y.Qn.Pn(F,S).next(Z=>{M=Z;const J=[];for(const Ae of f){const Ye=xv(Ae,M.get(Ae.key));null!=Ye&&J.push(new Qu(Ae.key,Ye,hv(Ye.value.mapValue),Ir.exists(!0)))}return y.In.addMutationBatch(F,I,J,f)})).then(F=>(F.applyToLocalDocumentSet(M),{batchId:F.batchId,changes:M}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(l,f,y){let I=l.qo[l.currentUser.toKey()];I||(I=new Mr(Zt)),I=I.insert(f,y),l.qo[l.currentUser.toKey()]=I}(s,u.batchId,t),yield Ta(s,u.changes),yield Ca(s.remoteStore)}catch(u){const l=oc(u,"Failed to persist write");t.reject(l)}}),IE.apply(this,arguments)}function ry(n,e){return iy.apply(this,arguments)}function iy(){return iy=(0,Ee.Z)(function*(n,e){const t=Qe(n);try{const s=yield uD(t.localStore,e);e.targetChanges.forEach((u,l)=>{const f=t.Bo.get(l);f&&(It(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?f.ko=!0:u.modifiedDocuments.size>0?It(f.ko):u.removedDocuments.size>0&&(It(f.ko),f.ko=!1))}),yield Ta(t,s,e)}catch(s){yield tc(s)}}),iy.apply(this,arguments)}function DE(n,e,t){const s=Qe(n);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const u=[];s.Oo.forEach((l,f)=>{const y=f.view.io(e);y.snapshot&&u.push(y.snapshot)}),function(l,f){const y=Qe(l);y.onlineState=f;let I=!1;y.queries.forEach((S,M)=>{for(const F of M.listeners)F.io(f)&&(I=!0)}),I&&ey(y)}(s.eventManager,e),u.length&&s.$o.Rr(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function sy(n,e,t){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,Ee.Z)(function*(n,e,t){const s=Qe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const u=s.Bo.get(e),l=u&&u.key;if(l){let f=new Mr(st.comparator);f=f.insert(l,ir.newNoDocument(l,Ft.min()));const y=Tn().add(l),I=new tp(Ft.min(),new Map,new or(Zt),f,y);yield ry(s,I),s.Lo=s.Lo.remove(l),s.Bo.delete(e),ly(s)}else yield vh(s.localStore,e,!1).then(()=>uc(s,e,t)).catch(tc)}),Dp.apply(this,arguments)}function fR(n,e){return oy.apply(this,arguments)}function oy(){return oy=(0,Ee.Z)(function*(n,e){const t=Qe(n),s=e.batch.batchId;try{const u=yield xT(t.localStore,e);bp(t,s,null),bE(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Ta(t,u)}catch(u){yield tc(u)}}),oy.apply(this,arguments)}function nA(n,e,t){return ay.apply(this,arguments)}function ay(){return ay=(0,Ee.Z)(function*(n,e,t){const s=Qe(n);try{const u=yield function(l,f){const y=Qe(l);return y.persistence.runTransaction("Reject batch","readwrite-primary",I=>{let S;return y.In.lookupMutationBatch(I,f).next(M=>(It(null!==M),S=M.keys(),y.In.removeMutationBatch(I,M))).next(()=>y.In.performConsistencyCheck(I)).next(()=>y.Qn.Pn(I,S))})}(s.localStore,e);bp(s,e,t),bE(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Ta(s,u)}catch(u){yield tc(u)}}),ay.apply(this,arguments)}function cy(){return cy=(0,Ee.Z)(function*(n,e){const t=Qe(n);sc(t.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(l){const f=Qe(l);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>f.In.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===s)return void e.resolve();const u=t.Ko.get(s)||[];u.push(e),t.Ko.set(s,u)}catch(s){const u=oc(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),cy.apply(this,arguments)}function bE(n,e){(n.Ko.get(e)||[]).forEach(t=>{t.resolve()}),n.Ko.delete(e)}function bp(n,e,t){const s=Qe(n);let u=s.qo[s.currentUser.toKey()];if(u){const l=u.get(e);l&&(t?l.reject(t):l.resolve(),u=u.remove(e)),s.qo[s.currentUser.toKey()]=u}}function uc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Fo.get(e))n.Oo.delete(s),t&&n.$o.Go(s,t);n.Fo.delete(e),n.isPrimaryClient&&n.Uo.cs(e).forEach(s=>{n.Uo.containsKey(s)||AD(n,s)})}function AD(n,e){n.Mo.delete(e.path.canonicalString());const t=n.Lo.get(e);null!==t&&(mp(n.remoteStore,t),n.Lo=n.Lo.remove(e),n.Bo.delete(t),ly(n))}function CE(n,e,t){for(const s of t)s instanceof EE?(n.Uo.addReference(s.key,e),SD(n,s)):s instanceof TD?(je("SyncEngine","Document no longer in limbo: "+s.key),n.Uo.removeReference(s.key,e),n.Uo.containsKey(s.key)||AD(n,s.key)):ct()}function SD(n,e){const t=e.key,s=t.path.canonicalString();n.Lo.get(t)||n.Mo.has(s)||(je("SyncEngine","New document in limbo: "+t),n.Mo.add(s),ly(n))}function ly(n){for(;n.Mo.size>0&&n.Lo.size<n.maxConcurrentLimboResolutions;){const e=n.Mo.values().next().value;n.Mo.delete(e);const t=new st(fn.fromString(e)),s=n.jo.next();n.Bo.set(s,new JT(t)),n.Lo=n.Lo.insert(t,s),gp(n.remoteStore,new Xu(Ss(pl(t.path)),s,2,Ys.T))}}function Ta(n,e,t){return TE.apply(this,arguments)}function TE(){return TE=(0,Ee.Z)(function*(n,e,t){const s=Qe(n),u=[],l=[],f=[];var y;s.Oo.isEmpty()||(s.Oo.forEach((y,I)=>{f.push(s.Wo(I,e,t).then(S=>{if(S){s.isPrimaryClient&&s.sharedClientState.updateQueryState(I.targetId,S.fromCache?"not-current":"current"),u.push(S);const M=cp.kn(I.targetId,S);l.push(M)}}))}),yield Promise.all(f),s.$o.Rr(u),yield(y=(0,Ee.Z)(function*(I,S){const M=Qe(I);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",F=>Pe.forEach(S,Z=>Pe.forEach(Z.Nn,J=>M.persistence.referenceDelegate.addReference(F,Z.targetId,J)).next(()=>Pe.forEach(Z.xn,J=>M.persistence.referenceDelegate.removeReference(F,Z.targetId,J)))))}catch(F){if(!dh(F))throw F;je("LocalStore","Failed to update sequence numbers: "+F)}for(const F of S){const Z=F.targetId;if(!F.fromCache){const J=M.Un.get(Z),Ye=J.withLastLimboFreeSnapshotVersion(J.snapshotVersion);M.Un=M.Un.insert(Z,Ye)}}}),function(I,S){return y.apply(this,arguments)})(s.localStore,l))}),TE.apply(this,arguments)}function RD(n,e){return dy.apply(this,arguments)}function dy(){return dy=(0,Ee.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const s=yield oD(t.localStore,e);t.currentUser=e,(u=t).Ko.forEach(f=>{f.forEach(y=>{y.reject(new Me(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.Ko.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Ta(t,s.Wn)}var u}),dy.apply(this,arguments)}function rA(n,e){const t=Qe(n),s=t.Bo.get(e);if(s&&s.ko)return Tn().add(s.key);{let u=Tn();const l=t.Fo.get(e);if(!l)return u;for(const f of l){const y=t.Oo.get(f);u=u.unionWith(y.view.Ro)}return u}}function iA(n,e){return hy.apply(this,arguments)}function hy(){return hy=(0,Ee.Z)(function*(n,e){const t=Qe(n),s=yield Um(t.localStore,e.query,!0),u=e.view.No(s);return t.isPrimaryClient&&CE(t,e.targetId,u.Do),u}),hy.apply(this,arguments)}function sA(n){return fy.apply(this,arguments)}function fy(){return fy=(0,Ee.Z)(function*(n){const e=Qe(n);return dD(e.localStore).then(t=>Ta(e,t))}),fy.apply(this,arguments)}function xD(n,e,t,s){return py.apply(this,arguments)}function py(){return py=(0,Ee.Z)(function*(n,e,t,s){const u=Qe(n),l=yield function(f,y){const I=Qe(f),S=Qe(I.In);return I.persistence.runTransaction("Lookup mutation documents","readonly",M=>S.Xt(M,y).next(F=>F?I.Qn.Pn(M,F):Pe.resolve(null)))}(u.localStore,e);var y;null!==l?("pending"===t?yield Ca(u.remoteStore):"acknowledged"===t||"rejected"===t?(bp(u,e,s||null),bE(u,e),y=e,Qe(Qe(u.localStore).In).te(y)):ct(),yield Ta(u,l)):je("SyncEngine","Cannot apply mutation batch with id: "+e)}),py.apply(this,arguments)}function AE(){return AE=(0,Ee.Z)(function*(n,e){const t=Qe(n);if(kD(t),FD(t),!0===e&&!0!==t.Qo){const s=t.sharedClientState.getAllActiveQueryTargets(),u=yield PD(t,s.toArray());t.Qo=!0,yield Qm(t.remoteStore,!0);for(const l of u)gp(t.remoteStore,l)}else if(!1===e&&!1!==t.Qo){const s=[];let u=Promise.resolve();t.Fo.forEach((l,f)=>{t.sharedClientState.isLocalQueryTarget(f)?s.push(f):u=u.then(()=>(uc(t,f),vh(t.localStore,f,!0))),mp(t.remoteStore,f)}),yield u,yield PD(t,s),function(l){const f=Qe(l);f.Bo.forEach((y,I)=>{mp(f.remoteStore,I)}),f.Uo.us(),f.Bo=new Map,f.Lo=new Mr(st.comparator)}(t),t.Qo=!1,yield Qm(t.remoteStore,!1)}}),AE.apply(this,arguments)}function PD(n,e,t){return SE.apply(this,arguments)}function SE(){return SE=(0,Ee.Z)(function*(n,e,t){const s=Qe(n),u=[],l=[];for(const f of e){let y;const I=s.Fo.get(f);if(I&&0!==I.length){y=yield _h(s.localStore,Ss(I[0]));for(const S of I){const M=s.Oo.get(S),F=yield iA(s,M);F.snapshot&&l.push(F.snapshot)}}else{const S=yield lD(s.localStore,f);y=yield _h(s.localStore,S),yield wE(s,RE(S),f,!1)}u.push(y)}return s.$o.Rr(l),u}),SE.apply(this,arguments)}function RE(n){return wv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pR(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).pn()}function gR(n,e,t,s){return MD.apply(this,arguments)}function MD(){return MD=(0,Ee.Z)(function*(n,e,t,s){const u=Qe(n);if(u.Qo)je("SyncEngine","Ignoring unexpected query state notification.");else if(u.Fo.has(e))switch(t){case"current":case"not-current":{const l=yield dD(u.localStore),f=tp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ta(u,l,f);break}case"rejected":yield vh(u.localStore,e,!0),uc(u,e,s);break;default:ct()}}),MD.apply(this,arguments)}function mR(n,e,t){return OD.apply(this,arguments)}function OD(){return OD=(0,Ee.Z)(function*(n,e,t){const s=kD(n);if(s.Qo){for(const u of e){if(s.Fo.has(u)){je("SyncEngine","Adding an already active target "+u);continue}const l=yield lD(s.localStore,u),f=yield _h(s.localStore,l);yield wE(s,RE(l),f.targetId,!1),gp(s.remoteStore,f)}for(const u of t)s.Fo.has(u)&&(yield vh(s.localStore,u,!1).then(()=>{mp(s.remoteStore,u),uc(s,u)}).catch(tc))}}),OD.apply(this,arguments)}function kD(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ry.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sy.bind(null,e),e.$o.Rr=DD.bind(null,e.eventManager),e.$o.Go=YT.bind(null,e.eventManager),e}function FD(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nA.bind(null,e),e}class LD{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.N=fp(e.databaseInfo.databaseId),t.sharedClientState=t.Ho(e),t.persistence=t.Jo(e),yield t.persistence.start(),t.gcScheduler=t.Yo(e),t.localStore=t.Xo(e)})()}Yo(e){return null}Xo(e){return bl(this.persistence,new lp,e.initialUser,this.N)}Jo(e){return new FT(iE.Ns,this.N)}Ho(e){return new LT}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class VD extends LD{constructor(e,t,s){super(),this.Zo=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,Ee.Z)(function*(){yield t().call(s,e),yield function(n){return Bm.apply(this,arguments)}(s.localStore),yield s.Zo.initialize(s,e),yield FD(s.Zo.syncEngine),yield Ca(s.Zo.remoteStore),yield s.persistence.nn(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()))})()}Xo(e){return bl(this.persistence,new lp,e.initialUser,this.N)}Yo(e){return new DT(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Jo(e){const t=eE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?ls.withCacheSize(this.cacheSizeBytes):ls.DEFAULT;return new Lm(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,gD(),Wm(),this.N,this.sharedClientState,!!this.forceOwnership)}Ho(e){return new LT}}class yR extends VD{constructor(e,t){super(e,t,!1),this.Zo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,Ee.Z)(function*(){yield t().call(s,e);const u=s.Zo.syncEngine;s.sharedClientState instanceof hp&&(s.sharedClientState.syncEngine={_i:xD.bind(null,u),mi:gR.bind(null,u),gi:mR.bind(null,u),pn:pR.bind(null,u),wi:sA.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.nn(function(){var l=(0,Ee.Z)(function*(f){yield function(n,e){return AE.apply(this,arguments)}(s.Zo.syncEngine,f),s.gcScheduler&&(f&&!s.gcScheduler.started?s.gcScheduler.start(s.localStore):f||s.gcScheduler.stop())});return function(f){return l.apply(this,arguments)}}())})()}Ho(e){const t=gD();if(!hp.bt(t))throw new Me(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=eE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new hp(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class UD{initialize(e,t){var s=this;return(0,Ee.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=u=>DE(s.syncEngine,u,1),s.remoteStore.remoteSyncer.handleCredentialChange=RD.bind(null,s.syncEngine),yield Qm(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ZT}createDatastore(e){const t=fp(e.databaseInfo.databaseId),s=new UT(e.databaseInfo);return new $T(e.credentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,u=e.asyncQueue,l=y=>DE(this.syncEngine,y,0),f=VT.bt()?new VT:new lR,new pp(t,s,u,l,f);var t,s,u,l,f}createSyncEngine(e,t){return function(s,u,l,f,y,I,S){const M=new XT(s,u,l,f,y,I);return S&&(M.Qo=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const s=Qe(t);je("RemoteStore","RemoteStore shutting down."),s.Wr.add(5),yield Tl(s),s.zr.shutdown(),s.Hr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function aA(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class gy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.tc(this.observer.next,e)}error(e){this.observer.error?this.tc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}ec(){this.muted=!0}tc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class uA{constructor(e,t){this.nc=e,this.N=t,this.metadata=new Qr,this.buffer=new Uint8Array,this.sc=new TextDecoder("utf-8"),this.ic().then(s=>{s&&s.wo()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.nc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}zo(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.ic()})()}ic(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.rc();if(null===t)return null;const s=e.sc.decode(t),u=Number(s);isNaN(u)&&e.oc(`length string (${s}) is not valid number`);const l=yield e.cc(u);return new QT(JSON.parse(l),t.length+u)})()}ac(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}rc(){var e=this;return(0,Ee.Z)(function*(){for(;e.ac()<0&&!(yield e.uc()););if(0===e.buffer.length)return null;const t=e.ac();t<0&&e.oc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}cc(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.uc())&&t.oc("Reached the end of bundle when more is expected.");const s=t.sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}oc(e){throw this.nc.cancel(),new Error(`Invalid bundle format: ${e}`)}uc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.nc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class cA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(u=(0,Ee.Z)(function*(l,f){const y=Qe(l),I=rp(y.N)+"/documents",S={documents:f.map(J=>ch(y.N,J))},M=yield y.Ki("BatchGetDocuments",I,S),F=new Map;M.forEach(J=>{const Ae=function(n,e){return"found"in e?function(t,s){It(!!s.found);const u=Lo(t,s.found.name),l=jr(s.found.updateTime),f=new Jr({mapValue:{fields:s.found.fields}});return ir.newFoundDocument(u,l,f)}(n,e):"missing"in e?function(t,s){It(!!s.missing),It(!!s.readTime);const u=Lo(t,s.missing),l=jr(s.readTime);return ir.newNoDocument(u,l)}(n,e):ct()}(y.N,J);F.set(Ae.key.toString(),Ae)});const Z=[];return f.forEach(J=>{const Ae=F.get(J.toString());It(!!Ae),Z.push(Ae)}),Z}),function(l,f){return u.apply(this,arguments)})(t.datastore,e);var u;return s.forEach(u=>t.recordVersion(u)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,u)=>{const l=st.fromPath(u);e.mutations.push(new Im(l,e.precondition(l)))}),yield(s=(0,Ee.Z)(function*(u,l){const f=Qe(u),y=rp(f.N)+"/documents",I={writes:l.map(S=>ip(f.N,S))};yield f.Li("Commit",y,I)}),function(u,l){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=Ft.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Me(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ir.updateTime(t):Ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ft.min()))throw new Me(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ir.updateTime(t)}return Ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class _R{constructor(e,t,s,u){this.asyncQueue=e,this.datastore=t,this.updateFunction=s,this.deferred=u,this.hc=5,this.ar=new aE(this.asyncQueue,"transaction_retry")}run(){this.hc-=1,this.lc()}lc(){var e=this;this.ar.Xi((0,Ee.Z)(function*(){const t=new cA(e.datastore),s=e.fc(t);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(l=>{e.dc(l)}))}).catch(u=>{e.dc(u)})}))}fc(e){try{const t=this.updateFunction(e);return!cl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}dc(e){this.hc>0&&this.wc(e)?(this.hc-=1,this.asyncQueue.enqueueAndForget(()=>(this.lc(),Promise.resolve()))):this.deferred.reject(e)}wc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Mv(t)}return!1}}class vR{constructor(e,t,s){var u=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=s,this.user=Yr.UNAUTHENTICATED,this.clientId=JC.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var l=(0,Ee.Z)(function*(f){je("FirestoreClient","Received user=",f.uid),yield u.credentialListener(f),u.user=f});return function(f){return l.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(s){const u=oc(s,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function BD(n,e){return jD.apply(this,arguments)}function jD(){return jD=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(function(){var u=(0,Ee.Z)(function*(l){s.isEqual(l)||(yield oD(e.localStore,l),s=l)});return function(l){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),jD.apply(this,arguments)}function $D(n,e){return HD.apply(this,arguments)}function HD(){return HD=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Cp(n);je("FirestoreClient","Initializing OnlineComponentProvider");const s=yield n.getConfiguration();yield e.initialize(t,s),n.setCredentialChangeListener(u=>{return(l=(0,Ee.Z)(function*(f,y){const I=Qe(f);I.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const S=sc(I);I.Wr.add(3),yield Tl(I),S&&I.Hr.set("Unknown"),yield I.remoteSyncer.handleCredentialChange(y),I.Wr.delete(3),yield Eh(I)}),function(f,y){return l.apply(this,arguments)})(e.remoteStore,u);var l}),n.onlineComponents=e}),HD.apply(this,arguments)}function Cp(n){return cc.apply(this,arguments)}function cc(){return cc=(0,Ee.Z)(function*(n){return n.offlineComponents||(je("FirestoreClient","Using default OfflineComponentProvider"),yield BD(n,new LD)),n.offlineComponents}),cc.apply(this,arguments)}function Tp(n){return xE.apply(this,arguments)}function xE(){return xE=(0,Ee.Z)(function*(n){return n.onlineComponents||(je("FirestoreClient","Using default OnlineComponentProvider"),yield $D(n,new UD)),n.onlineComponents}),xE.apply(this,arguments)}function GD(n){return Cp(n).then(e=>e.persistence)}function Ap(n){return Cp(n).then(e=>e.localStore)}function NE(n){return Tp(n).then(e=>e.remoteStore)}function my(n){return Tp(n).then(e=>e.syncEngine)}function xl(n){return WD.apply(this,arguments)}function WD(){return WD=(0,Ee.Z)(function*(n){const e=yield Tp(n),t=e.eventManager;return t.onListen=hR.bind(null,e.syncEngine),t.onUnlisten=eA.bind(null,e.syncEngine),t}),WD.apply(this,arguments)}function lA(n,e,t={}){const s=new Qr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(u,l,f,y,I){const S=new gy({next:F=>{l.enqueueAndForget(()=>Xm(u,M));const Z=F.docs.has(f);!Z&&F.fromCache?I.reject(new Me(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):Z&&F.fromCache&&y&&"server"===y.source?I.reject(new Me(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):I.resolve(F)},error:F=>I.reject(F)}),M=new ty(pl(f.path),S,{includeMetadataChanges:!0,fo:!0});return yE(u,M)}(yield xl(n),n.asyncQueue,e,t,s)})),s.promise}function dA(n,e,t={}){const s=new Qr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(u,l,f,y,I){const S=new gy({next:F=>{l.enqueueAndForget(()=>Xm(u,M)),F.fromCache&&"server"===y.source?I.reject(new Me(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):I.resolve(F)},error:F=>I.reject(F)}),M=new ty(f,S,{includeMetadataChanges:!0,fo:!0});return yE(u,M)}(yield xl(n),n.asyncQueue,e,t,s)})),s.promise}class IR{constructor(e,t,s,u,l,f,y,I){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=u,this.ssl=l,this.forceLongPolling=f,this.autoDetectLongPolling=y,this.useFetchStreams=I}}class Sp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Sp&&e.projectId===this.projectId&&e.database===this.database}}const _y=new Map;function PE(n,e,t){if(!t)throw new Me(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function pA(n,e,t,s){if(!0===e&&!0===s)throw new Me(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gA(n){if(!st.isDocumentKey(n))throw new Me(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ZD(n){if(st.isDocumentKey(n))throw new Me(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ME(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function Xt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ME(n);throw new Me(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function YD(n,e){if(e<=0)throw new Me(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class mA{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,pA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vy{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mA({}),this._settingsFrozen=!1,e instanceof Sp?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Me(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sp(s.options.projectId)}(e))}get app(){if(!this._app)throw new Me(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mA(e),void 0!==e.credentials&&(this._credentials=function(t){if(!t)return new KC;switch(t.type){case"gapi":const s=t.client;return It(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new iR(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(pe.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_y.get(e);t&&(je("ComponentProvider","Removing Datastore"),_y.delete(e),t.terminate())}(this),Promise.resolve()}}class On{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Aa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new On(this.firestore,e,this._key)}}class Oi{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Oi(this.firestore,e,this._query)}}class Aa extends Oi{constructor(e,t,s){super(e,t,pl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new On(this.firestore,null,new st(e))}withConverter(e){return new Aa(this.firestore,e,this._path)}}function QD(n,e,...t){if(n=(0,qt.m9)(n),PE("collection","path",e),n instanceof vy){const s=fn.fromString(e,...t);return ZD(s),new Aa(n,null,s)}{if(!(n instanceof On||n instanceof Aa))throw new Me(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(fn.fromString(e,...t));return ZD(s),new Aa(n.firestore,null,s)}}function Ey(n,e,...t){if(n=(0,qt.m9)(n),1===arguments.length&&(e=JC.I()),PE("doc","path",e),n instanceof vy){const s=fn.fromString(e,...t);return gA(s),new On(n,null,new st(s))}{if(!(n instanceof On||n instanceof Aa))throw new Me(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(fn.fromString(e,...t));return gA(s),new On(n.firestore,n instanceof Aa?n.converter:null,new st(s))}}function ds(n,e){return n=(0,qt.m9)(n),e=(0,qt.m9)(e),(n instanceof On||n instanceof Aa)&&(e instanceof On||e instanceof Aa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function JD(n,e){return n=(0,qt.m9)(n),e=(0,qt.m9)(e),n instanceof Oi&&e instanceof Oi&&n.firestore===e.firestore&&sr(n._query,e._query)&&n.converter===e.converter}class kE{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new aE(this,"async_queue_retry"),this.Rc=()=>{const t=Wm();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ar.tr()};const e=Wm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Rc)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.bc(),this.Pc(e)}enterRestrictedMode(e){if(!this.gc){this.gc=!0,this.Ic=e||!1;const t=Wm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Rc)}}enqueue(e){if(this.bc(),this.gc)return new Promise(()=>{});const t=new Qr;return this.Pc(()=>this.gc&&this.Ic?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.vc()))}vc(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.mc.length){try{yield e.mc[0](),e.mc.shift(),e.ar.reset()}catch(t){if(!dh(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.mc.length>0&&e.ar.Xi(()=>e.vc())}})()}Pc(e){const t=this._c.then(()=>(this.Ec=!0,e().catch(s=>{throw this.Tc=s,this.Ec=!1,wr("INTERNAL UNHANDLED ERROR: ",function(l){let f=l.message||"";return l.stack&&(f=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),f}(s)),s}).then(s=>(this.Ec=!1,s))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.bc(),this.Ac.indexOf(e)>-1&&(t=0);const u=Ep.createAndSchedule(this,e,t,s,l=>this.Vc(l));return this.yc.push(u),u}bc(){this.Tc&&ct()}verifyOperationInProgress(){}Sc(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e._c,yield t}while(t!==e._c)})()}Dc(e){for(const t of this.yc)if(t.timerId===e)return!0;return!1}Cc(e){return this.Sc().then(()=>{this.yc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.yc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sc()})}Nc(e){this.Ac.push(e)}Vc(e){const t=this.yc.indexOf(e);this.yc.splice(t,1)}}function FE(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(n)}class _A{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jn extends vy{constructor(e,t){super(e,t),this.type="firestore",this._queue=new kE,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||VE(this),this._firestoreClient.terminate()}}function Or(n){return n._firestoreClient||VE(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function VE(n){var e;const t=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new IR(n._databaseId,l,n._persistenceKey,(y=t).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var l,y;n._firestoreClient=new vR(n._credentials,n._queue,s)}function wy(n,e,t){const s=new Qr;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield BD(n,t),yield $D(n,e),s.resolve()}catch(u){if(!("FirebaseError"===(l=u).name?l.code===pe.FAILED_PRECONDITION||l.code===pe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),s.reject(u)}var l})).then(()=>s.promise)}function tb(n){if(n._initialized||n._terminated)throw new Me(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class lc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ra(Br.fromBase64String(e))}catch(t){throw new Me(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ra(Br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nl{constructor(e){this._methodName=e}}class BE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}}const bA=/^__.*__$/;class nb{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Qu(e,this.data,this.fieldMask,t,this.fieldTransforms):new ah(e,this.data,t,this.fieldTransforms)}}class rb{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Qu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ib(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class Rp{constructor(e,t,s,u,l,f){this.settings=e,this.databaseId=t,this.N=s,this.ignoreUndefinedProperties=u,void 0===l&&this.xc(),this.fieldTransforms=l||[],this.fieldMask=f||[]}get path(){return this.settings.path}get kc(){return this.settings.kc}$c(e){return new Rp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oc(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.$c({path:s,Fc:!1});return u.Mc(e),u}Lc(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.$c({path:s,Fc:!1});return u.xc(),u}Bc(e){return this.$c({path:void 0,Fc:!0})}Uc(e){return zE(e,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Kc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}Mc(e){if(0===e.length)throw this.Uc("Document fields must not be empty");if(ib(this.kc)&&bA.test(e))throw this.Uc('Document fields cannot begin and end with "__"')}}class CA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=s||fp(e)}jc(e,t,s,u=!1){return new Rp({kc:e,methodName:t,Kc:s,path:fi.emptyPath(),Fc:!1,qc:u},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function bh(n){const e=n._freezeSettings(),t=fp(n._databaseId);return new CA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xp(n,e,t,s,u,l={}){const f=n.jc(l.merge||l.mergeFields?2:0,e,t,u);ab("Data must be an object, but it was:",f,s);const y=AA(s,f);let I,S;if(l.merge)I=new Po(f.fieldMask),S=f.fieldTransforms;else if(l.mergeFields){const M=[];for(const F of l.mergeFields){const Z=ub(e,F,t);if(!f.contains(Z))throw new Me(pe.INVALID_ARGUMENT,`Field '${Z}' is specified in your field mask but missing from your input data.`);cb(M,Z)||M.push(Z)}I=new Po(M),S=f.fieldTransforms.filter(F=>I.covers(F.field))}else I=null,S=f.fieldTransforms;return new nb(new Jr(y),I,S)}class Ch extends Nl{_toFieldTransform(e){if(2!==e.kc)throw e.Uc(1===e.kc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ch}}function sb(n,e,t){return new Rp({kc:3,Kc:e.settings.Kc,methodName:n._methodName,Fc:t},e.databaseId,e.N,e.ignoreUndefinedProperties)}class jE extends Nl{_toFieldTransform(e){return new zi(e.path,new ml)}isEqual(e){return e instanceof jE}}class ob extends Nl{constructor(e,t){super(e),this.Qc=t}_toFieldTransform(e){const t=sb(this,e,!0),s=this.Qc.map(l=>Th(l,t)),u=new ih(s);return new zi(e.path,u)}isEqual(e){return this===e}}class Np extends Nl{constructor(e,t){super(e),this.Qc=t}_toFieldTransform(e){const t=sb(this,e,!0),s=this.Qc.map(l=>Th(l,t)),u=new Yu(s);return new zi(e.path,u)}isEqual(e){return this===e}}class $E extends Nl{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=new sh(e.N,gl(e.N,this.Wc));return new zi(e.path,t)}isEqual(e){return this===e}}function Iy(n,e,t,s){const u=n.jc(1,e,t);ab("Data must be an object, but it was:",u,s);const l=[],f=Jr.empty();Jd(s,(I,S)=>{const M=WE(e,I,t);S=(0,qt.m9)(S);const F=u.Lc(M);if(S instanceof Ch)l.push(M);else{const Z=Th(S,F);null!=Z&&(l.push(M),f.set(M,Z))}});const y=new Po(l);return new rb(f,y,u.fieldTransforms)}function HE(n,e,t,s,u,l){const f=n.jc(1,e,t),y=[ub(e,s,t)],I=[u];if(l.length%2!=0)throw new Me(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Z=0;Z<l.length;Z+=2)y.push(ub(e,l[Z])),I.push(l[Z+1]);const S=[],M=Jr.empty();for(let Z=y.length-1;Z>=0;--Z)if(!cb(S,y[Z])){const J=y[Z];let Ae=I[Z];Ae=(0,qt.m9)(Ae);const Ye=f.Lc(J);if(Ae instanceof Ch)S.push(J);else{const nt=Th(Ae,Ye);null!=nt&&(S.push(J),M.set(J,nt))}}const F=new Po(S);return new rb(M,F,f.fieldTransforms)}function TA(n,e,t,s=!1){return Th(t,n.jc(s?4:3,e))}function Th(n,e){if(SA(n=(0,qt.m9)(n)))return ab("Unsupported field value:",e,n),AA(n,e);if(n instanceof Nl)return function(t,s){if(!ib(s.kc))throw s.Uc(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Uc(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Fc&&4!==e.kc)throw e.Uc("Nested arrays are not supported");return function(t,s){const u=[];let l=0;for(const f of t){let y=Th(f,s.Bc(l));null==y&&(y={nullValue:"NULL_VALUE"}),u.push(y),l++}return{arrayValue:{values:u}}}(n,e)}return function(t,s){if(null===(t=(0,qt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return gl(s.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Pr.fromDate(t);return{timestampValue:uh(s.N,u)}}if(t instanceof Pr){const u=new Pr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:uh(s.N,u)}}if(t instanceof BE)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ra)return{bytesValue:Lv(s.N,t._byteString)};if(t instanceof On){const u=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(u))throw s.Uc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Cm(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.Uc(`Unsupported field value: ${ME(t)}`)}(n,e)}function AA(n,e){const t={};return eT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jd(n,(s,u)=>{const l=Th(u,e.Oc(s));null!=l&&(t[s]=l)}),{mapValue:{fields:t}}}function SA(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Pr||n instanceof BE||n instanceof Ra||n instanceof On||n instanceof Nl)}function ab(n,e,t){if(!SA(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=ME(t);throw e.Uc("an object"===s?n+" a custom object":n+" "+s)}var s}function ub(n,e,t){if((e=(0,qt.m9)(e))instanceof lc)return e._internalPath;if("string"==typeof e)return WE(n,e);throw zE("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const GE=new RegExp("[~\\*/\\[\\]]");function WE(n,e,t){if(e.search(GE)>=0)throw zE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new lc(...e.split("."))._internalPath}catch(s){throw zE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zE(n,e,t,s,u){const l=s&&!s.isEmpty(),f=void 0!==u;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let I="";return(l||f)&&(I+=" (found",l&&(I+=` in field ${s}`),f&&(I+=` in document ${u}`),I+=")"),new Me(pe.INVALID_ARGUMENT,y+n+I)}function cb(n,e){return n.some(t=>t.isEqual(e))}class Pp{constructor(e,t,s,u,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=u,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new On(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new RA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class RA extends Pp{data(){return super.data()}}function Dy(n,e){return"string"==typeof e?WE(n,e):e instanceof lc?e._internalPath:e._delegate._internalPath}class Ah{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dc extends Pp{constructor(e,t,s,u,l,f){super(e,t,s,u,f),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new by(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Dy("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class by extends dc{data(e={}){return super.data(e)}}class hc{constructor(e,t,s,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new Ah(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new by(this._firestore,this._userDataWriter,s.key,s,new Ah(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(f=>({type:"added",doc:new by(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Ah(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>u||3!==f.type).map(f=>{const y=new by(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Ah(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let I=-1,S=-1;return 0!==f.type&&(I=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),1!==f.type&&(l=l.add(f.doc),S=l.indexOf(f.doc.key)),{type:qE(f.type),doc:y,oldIndex:I,newIndex:S}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qE(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function Gr(n,e){return n instanceof dc&&e instanceof dc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof hc&&e instanceof hc&&n._firestore===e._firestore&&JD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function xA(n){if(Yf(n)&&0===n.explicitOrderBy.length)throw new Me(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sh{}function lu(n,...e){for(const t of e)n=t._apply(n);return n}class NA extends Sh{constructor(e,t,s){super(),this.Gc=e,this.zc=t,this.Hc=s,this.type="where"}_apply(e){const t=bh(e.firestore),s=function(u,l,f,y,I,S,M){let F;if(I.isKeyField()){if("array-contains"===S||"array-contains-any"===S)throw new Me(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on FieldPath.documentId().`);if("in"===S||"not-in"===S){FA(M,S);const J=[];for(const Ae of M)J.push(Wr(y,u,Ae));F={arrayValue:{values:J}}}else F=Wr(y,u,M)}else"in"!==S&&"not-in"!==S&&"array-contains-any"!==S||FA(M,S),F=TA(f,"where",M,"in"===S||"not-in"===S);const Z=Pi.create(I,S,F);return function(J,Ae){if(Ae.v()){const nt=hI(J);if(null!==nt&&!nt.isEqual(Ae.field))throw new Me(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${nt.toString()}' and '${Ae.field.toString()}'`);const Wt=_m(J);null!==Wt&&db(0,Ae.field,Wt)}const Ye=function(nt,Wt){for(const kn of nt.filters)if(Wt.indexOf(kn.op)>=0)return kn.op;return null}(J,function(nt){switch(nt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Ae.op));if(null!==Ye)throw new Me(pe.INVALID_ARGUMENT,Ye===Ae.op?`Invalid query. You cannot use more than one '${Ae.op.toString()}' filter.`:`Invalid query. You cannot use '${Ae.op.toString()}' filters with '${Ye.toString()}' filters.`)}(u,Z),Z}(e._query,0,t,e.firestore._databaseId,this.Gc,this.zc,this.Hc);return new Oi(e.firestore,e.converter,function(u,l){const f=u.filters.concat([l]);return new Ea(u.path,u.collectionGroup,u.explicitOrderBy.slice(),f,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,s))}}class PA extends Sh{constructor(e,t){super(),this.Gc=e,this.Jc=t,this.type="orderBy"}_apply(e){const t=function(s,u,l){if(null!==s.startAt)throw new Me(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Me(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new fl(u,l);return function(y,I){if(null===_m(y)){const S=hI(y);null!==S&&db(0,S,I.field)}}(s,f),f}(e._query,this.Gc,this.Jc);return new Oi(e.firestore,e.converter,function(s,u){const l=s.explicitOrderBy.concat([u]);return new Ea(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class KE extends Sh{constructor(e,t,s){super(),this.type=e,this.Yc=t,this.Xc=s}_apply(e){return new Oi(e.firestore,e.converter,fI(e._query,this.Yc,this.Xc))}}class Ty extends Sh{constructor(e,t,s){super(),this.type=e,this.Zc=t,this.ta=s}_apply(e){const t=QE(e,this.type,this.Zc,this.ta);return new Oi(e.firestore,e.converter,(u=t,new Ea((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt)));var s,u}}class Mp extends Sh{constructor(e,t,s){super(),this.type=e,this.Zc=t,this.ta=s}_apply(e){const t=QE(e,this.type,this.Zc,this.ta);return new Oi(e.firestore,e.converter,(u=t,new Ea((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u)));var s,u}}function QE(n,e,t,s){if(t[0]=(0,qt.m9)(t[0]),t[0]instanceof Pp)return function(u,l,f,y,I){if(!y)throw new Me(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const S=[];for(const M of rh(u))if(M.field.isKeyField())S.push(lv(l,y.key));else{const F=y.data.field(M.field);if(dm(F))throw new Me(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===F){const Z=M.field.canonicalString();throw new Me(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Z}' (used as the orderBy) does not exist.`)}S.push(F)}return new Kf(S,I)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const u=bh(n.firestore);return function(l,f,y,I,S,M){const F=l.explicitOrderBy;if(S.length>F.length)throw new Me(pe.INVALID_ARGUMENT,`Too many arguments provided to ${I}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Z=[];for(let J=0;J<S.length;J++){const Ae=S[J];if(F[J].field.isKeyField()){if("string"!=typeof Ae)throw new Me(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${I}(), but got a ${typeof Ae}`);if(!Iv(l)&&-1!==Ae.indexOf("/"))throw new Me(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${I}() must be a plain document ID, but '${Ae}' contains a slash.`);const Ye=l.path.child(fn.fromString(Ae));if(!st.isDocumentKey(Ye))throw new Me(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${I}() must result in a valid document path, but '${Ye}' is not because it contains an odd number of segments.`);const nt=new st(Ye);Z.push(lv(f,nt))}else{const Ye=TA(y,I,Ae);Z.push(Ye)}}return new Kf(Z,M)}(n._query,n.firestore._databaseId,u,e,t,s)}}function Wr(n,e,t){if("string"==typeof(t=(0,qt.m9)(t))){if(""===t)throw new Me(pe.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Iv(e)&&-1!==t.indexOf("/"))throw new Me(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(fn.fromString(t));if(!st.isDocumentKey(s))throw new Me(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return lv(n,new st(s))}if(t instanceof On)return lv(n,t._key);throw new Me(pe.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${ME(t)}.`)}function FA(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function db(n,e,t){if(!t.isEqual(e))throw new Me(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class JE{convertValue(e,t="none"){switch(ll(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){const s={};return Jd(e.fields,(u,l)=>{s[u]=this.convertValue(l,t)}),s}convertGeoPoint(e){return new BE(rr(e.latitude),rr(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=uI(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(zf(e));default:return null}}convertTimestamp(e){const t=iu(e);return new Pr(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=fn.fromString(e);It(Uv(s));const u=new Sp(s.get(1),s.get(3)),l=new st(s.popFirst(5));return u.isEqual(t)||wr(`Document ${l} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function XE(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Ay extends JE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ra(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new On(this.firestore,null,t)}}class hb{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bh(e)}set(e,t,s){this._verifyNotCommitted();const u=Ml(e,this._firestore),l=XE(u.converter,t,s),f=xp(this._dataReader,"WriteBatch.set",u._key,l,null!==u.converter,s);return this._mutations.push(f.toMutation(u._key,Ir.none())),this}update(e,t,s,...u){this._verifyNotCommitted();const l=Ml(e,this._firestore);let f;return f="string"==typeof(t=(0,qt.m9)(t))||t instanceof lc?HE(this._dataReader,"WriteBatch.update",l._key,t,s,u):Iy(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(f.toMutation(l._key,Ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ml(e,this._firestore);return this._mutations=this._mutations.concat(new Xf(t._key,Ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ml(n,e){if((n=(0,qt.m9)(n)).firestore!==e)throw new Me(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class fc extends JE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ra(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new On(this.firestore,null,t)}}function e0(n,e,t){n=Xt(n,On);const s=Xt(n.firestore,Jn),u=XE(n.converter,e,t);return Rh(s,[xp(bh(s),"setDoc",n._key,u,null!==n.converter,t).toMutation(n._key,Ir.none())])}function t0(n,e,t,...s){n=Xt(n,On);const u=Xt(n.firestore,Jn),l=bh(u);let f;return f="string"==typeof(e=(0,qt.m9)(e))||e instanceof lc?HE(l,"updateDoc",n._key,e,t,s):Iy(l,"updateDoc",n._key,e),Rh(u,[f.toMutation(n._key,Ir.exists(!0))])}function n0(n,...e){var t,s,u;n=(0,qt.m9)(n);let l={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||FE(e[f])||(l=e[f],f++);const y={includeMetadataChanges:l.includeMetadataChanges};if(FE(e[f])){const F=e[f];e[f]=null===(t=F.next)||void 0===t?void 0:t.bind(F),e[f+1]=null===(s=F.error)||void 0===s?void 0:s.bind(F),e[f+2]=null===(u=F.complete)||void 0===u?void 0:u.bind(F)}let I,S,M;if(n instanceof On)S=Xt(n.firestore,Jn),M=pl(n._key.path),I={next:F=>{e[f]&&e[f](Ry(S,n,F))},error:e[f+1],complete:e[f+2]};else{const F=Xt(n,Oi);S=Xt(F.firestore,Jn),M=F._query;const Z=new fc(S);I={next:J=>{e[f]&&e[f](new hc(S,Z,F,J))},error:e[f+1],complete:e[f+2]},xA(n._query)}return function(F,Z,J,Ae){const Ye=new gy(Ae),nt=new ty(Z,Ye,J);return F.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return yE(yield xl(F),nt)})),()=>{Ye.ec(),F.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Xm(yield xl(F),nt)}))}}(Or(S),M,y,I)}function Rh(n,e){return function(t,s){const u=new Qr;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(n,e,t){return IE.apply(this,arguments)}(yield my(t),s,u)})),u.promise}(Or(n),e)}function Ry(n,e,t){const s=t.docs.get(e._key),u=new fc(n);return new dc(n,u,e._key,s,new Ah(t.hasPendingWrites,t.fromCache),e.converter)}class xy extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=bh(e)}get(e){const t=Ml(e,this._firestore),s=new Ay(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return ct();const l=u[0];if(l.isFoundDocument())return new Pp(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Pp(this._firestore,s,t._key,null,t.converter);throw ct()})}set(e,t,s){const u=Ml(e,this._firestore),l=XE(u.converter,t,s),f=xp(this._dataReader,"Transaction.set",u._key,l,null!==u.converter,s);return this._transaction.set(u._key,f),this}update(e,t,s,...u){const l=Ml(e,this._firestore);let f;return f="string"==typeof(t=(0,qt.m9)(t))||t instanceof lc?HE(this._dataReader,"Transaction.update",l._key,t,s,u):Iy(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,f),this}delete(e){const t=Ml(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ml(e,this._firestore),s=new fc(this._firestore);return super.get(e).then(u=>new dc(this._firestore,s,t._key,u._document,new Ah(!1,!1),t.converter))}}!function(n,e=!0){ul=Qc.SDK_VERSION,(0,Qc._registerComponent)(new Ng.wA("firestore",(t,{options:s})=>{const u=t.getProvider("app").getImmediate(),l=new Jn(u,new YC(t.getProvider("auth-internal")));return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC")),(0,Qc.registerVersion)(ov,"3.3.1",n),(0,Qc.registerVersion)(ov,"3.3.1","esm2017")}();var KA=k(3719),Ny=k(4763),ZA=k(1733);class YA extends Di.x{constructor(e=1/0,t=1/0,s=ZA.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:s,_infiniteTimeWindow:u,_timestampProvider:l,_windowTime:f}=this;t||(s.push(e),!u&&s.push(l.now()+f)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:s,_buffer:u}=this,l=u.slice();for(let f=0;f<l.length&&!e.closed;f+=s?1:2)e.next(l[f]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:s,_infiniteTimeWindow:u}=this,l=(u?1:2)*e;if(e<1/0&&l<s.length&&s.splice(0,s.length-l),!u){const f=t.now();let y=0;for(let I=1;I<s.length&&s[I]<=f;I+=2)y=I;y&&s.splice(0,y+1)}}}var QA=k(3174);function pb(n,e,t){var s,u;let l,f=!1;return n&&"object"==typeof n?(l=null!==(s=n.bufferSize)&&void 0!==s?s:1/0,e=null!==(u=n.windowTime)&&void 0!==u?u:1/0,f=!!n.refCount,t=n.scheduler):l=null!=n?n:1/0,(0,QA.B)({connector:()=>new YA(l,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:f})}function Op(n,e){return(0,Zn.m)(e)?Lr(()=>n,e):Lr(()=>n)}var xh=k(5222),pi=k(7233),qi=k(7905);k(7713);const yb=new Map,rS={activated:!1,tokenObservers:[]},eo={initialized:!1,enabled:!1};function jt(n){return yb.get(n)||rS}function Cr(n,e){yb.set(n,e)}function kp(){return eo}class Ol{constructor(e,t,s,u,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=s,this.lowerBound=u,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=u,u>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new qt.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new qt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(s){t.retryPolicy(s)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const gi=new qt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function My(n){if(!jt(n).activated)throw gi.create("use-before-activation",{appName:n.name})}function kh(n,e){return ky.apply(this,arguments)}function ky(){return ky=(0,Ee.Z)(function*({url:n,body:e},t){const s={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});u&&(s["X-Firebase-Client"]=u.getPlatformInfoString());const l={method:"POST",body:JSON.stringify(e),headers:s};let f,y;try{f=yield fetch(n,l)}catch(F){throw gi.create("fetch-network-error",{originalErrorMessage:F.message})}if(200!==f.status)throw gi.create("fetch-status-error",{httpStatus:f.status});try{y=yield f.json()}catch(F){throw gi.create("fetch-parse-error",{originalErrorMessage:F.message})}const I=y.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw gi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const S=1e3*Number(I[1]),M=Date.now();return{token:y.attestationToken,expireTimeMillis:M+S,issuedAtTimeMillis:M}}),ky.apply(this,arguments)}function Fy(n,e){const{projectId:t,appId:s,apiKey:u}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${s}:exchangeDebugToken?key=${u}`,body:{debug_token:e}}}const kl="firebase-app-check-store";let a0=null;function bt(){return a0||(a0=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=s=>{n(s.target.result)},t.onerror=s=>{var u;e(gi.create("storage-open",{originalErrorMessage:null===(u=s.target.error)||void 0===u?void 0:u.message}))},t.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(kl,{keyPath:"compositeKey"})}}catch(t){e(gi.create("storage-open",{originalErrorMessage:t.message}))}}),a0)}function u0(){return u0=(0,Ee.Z)(function*(n,e){const s=(yield bt()).transaction(kl,"readwrite"),l=s.objectStore(kl).put({compositeKey:n,value:e});return new Promise((f,y)=>{l.onsuccess=I=>{f()},s.onerror=I=>{var S;y(gi.create("storage-set",{originalErrorMessage:null===(S=I.target.error)||void 0===S?void 0:S.message}))}})}),u0.apply(this,arguments)}const Fp=new Zr.Yd("@firebase/app-check");function Cb(n,e){return(0,qt.hl)()?function(n,e){return function(n,e){return u0.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Fp.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Tb(){return kp().enabled}function Ab(){return Sb.apply(this,arguments)}function Sb(){return Sb=(0,Ee.Z)(function*(){const n=kp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Sb.apply(this,arguments)}const lS={error:"UNKNOWN_ERROR"};function ki(n){return qt.US.encodeString(JSON.stringify(n),!1)}function Ly(n){return h0.apply(this,arguments)}function h0(){return h0=(0,Ee.Z)(function*(n,e=!1){const t=n.app;My(t);const s=jt(t);let l,u=s.token;if(!u){const I=yield s.cachedTokenPromise;I&&Vy(I)&&(u=I)}if(!e&&u&&Vy(u))return{token:u.token};let y,f=!1;if(Tb()){s.exchangeTokenPromise||(s.exchangeTokenPromise=kh(Fy(t,yield Ab()),n.platformLoggerProvider).then(S=>(s.exchangeTokenPromise=void 0,S)),f=!0);const I=yield s.exchangeTokenPromise;return yield Cb(t,I),Cr(t,Object.assign(Object.assign({},s),{token:I})),{token:I.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().then(I=>(s.exchangeTokenPromise=void 0,I)),f=!0),u=yield s.exchangeTokenPromise}catch(I){"appCheck/throttled"===I.code?Fp.warn(I.message):Fp.error(I),l=I}return u?(y={token:u.token},Cr(t,Object.assign(Object.assign({},s),{token:u})),yield Cb(t,u)):y=hS(l),f&&xb(t,y),y}),h0.apply(this,arguments)}function f0(n,e){const t=jt(n),s=t.tokenObservers.filter(u=>u.next!==e);0===s.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Cr(n,Object.assign(Object.assign({},t),{tokenObservers:s}))}function Rb(n){const{app:e}=n,t=jt(e);let s=t.tokenRefresher;s||(s=function(n){const{app:e}=n;return new Ol((0,Ee.Z)(function*(){let s;if(s=jt(e).token?yield Ly(n,!0):yield Ly(n),s.error)throw s.error}),()=>!0,()=>{const t=jt(e);if(t.token){let s=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,t.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(n),Cr(e,Object.assign(Object.assign({},t),{tokenRefresher:s}))),!s.isRunning()&&t.isTokenAutoRefreshEnabled&&s.start()}function xb(n,e){const t=jt(n).tokenObservers;for(const s of t)try{"EXTERNAL"===s.type&&null!=e.error?s.error(e.error):s.next(e)}catch(u){}}function Vy(n){return n.expireTimeMillis-Date.now()>0}function hS(n){return{token:ki(lS),error:n}}class p0{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=jt(this.app);for(const t of e)f0(this.app,t.next);return Promise.resolve()}}const DS="app-check-internal";(0,Qc._registerComponent)(new Ng.wA("app-check",n=>function(n,e){return new p0(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(DS).initialize()})),(0,Qc._registerComponent)(new Ng.wA(DS,n=>function(n){return{getToken:e=>Ly(n,e),addTokenListener:e=>function(n,e,t,s){const{app:u}=n,l=jt(u),f={next:t,error:s,type:e};if(Cr(u,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,f]})),l.token&&Vy(l.token)){const y=l.token;Promise.resolve().then(()=>{t({token:y.token}),Rb(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>Rb(n))}(n,"INTERNAL",e),removeTokenListener:e=>f0(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Qc.registerVersion)("@firebase/app-check","0.5.2");class v0{constructor(){return(0,pi.vb)("app-check")}}"undefined"!=typeof window&&window;var Vb=k(7892);const Ub=new v.OlP("angularfire2.auth.use-emulator"),Lh=new v.OlP("angularfire2.auth.settings"),I0=new v.OlP("angularfire2.auth.tenant-id"),SS=new v.OlP("angularfire2.auth.langugage-code"),Bb=new v.OlP("angularfire2.auth.use-device-language"),RS=new v.OlP("angularfire.auth.persistence"),xS=(n,e,t,s,u,l,f,y)=>(0,qi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const I=e.runOutsideAngular(()=>n.auth());if(t&&I.useEmulator(...t),s&&(I.tenantId=s),I.languageCode=u,l&&I.useDeviceLanguage(),f)for(const[S,M]of Object.entries(f))I.settings[S]=M;return y&&I.setPersistence(y),I},[t,s,u,l,f,y]);let D0=(()=>{class n{constructor(t,s,u,l,f,y,I,S,M,F,Z,J){const Ae=new Di.x,Ye=pt(void 0).pipe((0,Ny.Q)(f.outsideAngular),Lr(()=>l.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2115)))),(0,wt.U)(()=>(0,qi.on)(t,l,s)),(0,wt.U)(nt=>xS(nt,l,y,S,M,F,I,Z)),pb({bufferSize:1,refCount:!1}));if(ri(u))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=pt(null);else{Ye.pipe(ui()).subscribe();const Wt=Ye.pipe(Lr(zt=>zt.getRedirectResult().then(Xn=>Xn,()=>null)),pi.iC,pb({bufferSize:1,refCount:!1})),kn=Ye.pipe(Lr(zt=>new yr.y(Xn=>({unsubscribe:l.runOutsideAngular(()=>zt.onAuthStateChanged(no=>Xn.next(no),no=>Xn.error(no),()=>Xn.complete()))})))),ur=Ye.pipe(Lr(zt=>new yr.y(Xn=>({unsubscribe:l.runOutsideAngular(()=>zt.onIdTokenChanged(no=>Xn.next(no),no=>Xn.error(no),()=>Xn.complete()))}))));this.authState=Wt.pipe(Op(kn),(0,xh.R)(f.outsideAngular),(0,Ny.Q)(f.insideAngular)),this.user=Wt.pipe(Op(ur),(0,xh.R)(f.outsideAngular),(0,Ny.Q)(f.insideAngular)),this.idToken=this.user.pipe(Lr(zt=>zt?(0,Un.D)(zt.getIdToken()):pt(null))),this.idTokenResult=this.user.pipe(Lr(zt=>zt?(0,Un.D)(zt.getIdTokenResult()):pt(null))),this.credential=(0,KA.T)(Wt,Ae,this.authState.pipe(Is(zt=>!zt))).pipe((0,wt.U)(zt=>(null==zt?void 0:zt.user)?zt:null),(0,xh.R)(f.outsideAngular),(0,Ny.Q)(f.insideAngular))}return(0,qi.pX)(this,Ye,l,{spy:{apply:(nt,Wt,kn)=>{(nt.startsWith("signIn")||nt.startsWith("createUser"))&&kn.then(ur=>Ae.next(ur))}}})}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(qi.Dh),v.LFG(qi.xv,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(pi.HU),v.LFG(Ub,8),v.LFG(Lh,8),v.LFG(I0,8),v.LFG(SS,8),v.LFG(Bb,8),v.LFG(RS,8),v.LFG(v0,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),b0=(()=>{class n{constructor(){Vb.Z.registerVersion("angularfire",pi.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[D0]}),n})(),jb=(()=>{class n{constructor(t){this.afAuth=t}GoogleAuth(){return this.AuthLogin(new hw.N)}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(s=>{console.log("You have been successfully logged in!")}).catch(s=>{console.log(s)})}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(D0))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),NS=(()=>{class n{constructor(t){this.authserviceService=t,this.title="authentication"}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(jb))},n.\u0275cmp=v.Xpm({type:n,selectors:[["app-root"]],decls:14,vars:0,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"formGroup"],["type","button",3,"click"]],template:function(t,s){1&t&&(v.TgZ(0,"html",0),v.TgZ(1,"head"),v._UZ(2,"meta",1),v._UZ(3,"meta",2),v._UZ(4,"meta",3),v.TgZ(5,"title"),v._uU(6,"Document"),v.qZA(),v.qZA(),v.TgZ(7,"body"),v.TgZ(8,"h1"),v._uU(9,"hi"),v.qZA(),v.TgZ(10,"div",4),v.TgZ(11,"button",5),v.NdJ("click",function(){return s.authserviceService.GoogleAuth()}),v._uU(12," Log in with Google "),v.qZA(),v.qZA(),v.qZA(),v._UZ(13,"router-outlet"),v.qZA())},directives:[Jt],styles:[""]}),n})();var PS=k(2210);function $b(){return(0,oi.e)((n,e)=>{let t,s=!1;n.subscribe(new lr.Q(e,u=>{const l=t;t=u,s&&e.next([l,u]),s=!0}))})}function OS(n,e){return n===e}k(2115);var $o=k(6293);function C0(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function T0(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function A0(){if("undefined"==typeof atob)throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Vh{constructor(e){this._delegate=e}static fromBase64String(e){return A0(),new Vh(Ra.fromBase64String(e))}static fromUint8Array(e){return T0(),new Vh(Ra.fromUint8Array(e))}toBase64(){return A0(),this._delegate.toBase64()}toUint8Array(){return T0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jp(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const s of["next","error","complete"])if(s in t&&"function"==typeof t[s])return!0;return!1}(n)}class R0{enableIndexedDbPersistence(e,t){return function(n,e){tb(n=Xt(n,Jn));const t=Or(n),s=n._freezeSettings(),u=new UD;return wy(t,u,new VD(u,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){tb(n=Xt(n,Jn));const e=Or(n),t=n._freezeSettings(),s=new UD;return wy(e,s,new yR(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Me(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(s){if(!Ia.bt())return Promise.resolve();const u=s+"main";yield Ia.delete(u)}),function(s){return t.apply(this,arguments)})(eE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class $p{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Sp||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Gf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function(n,e,t,s={}){var u;const l=(n=Xt(n,vy))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Gf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let f,y;if("string"==typeof s.mockUserToken)f=s.mockUserToken,y=Yr.MOCK_USER;else{f=(0,qt.Sg)(s.mockUserToken,null===(u=n._app)||void 0===u?void 0:u.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new Me(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Yr(I)}n._credentials=new ZC(new uv(f,y))}}(this._delegate,e,t,s)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield GD(n),t=yield NE(n);return e.setNetworkEnabled(!0),function(s){const u=Qe(s);return u.Wr.delete(0),Eh(u)}(t)}))}(Or(n=Xt(n,Jn)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield GD(n),t=yield NE(n);return e.setNetworkEnabled(!1),(s=(0,Ee.Z)(function*(u){const l=Qe(u);l.Wr.add(0),yield Tl(l),l.Hr.set("Offline")}),function(u){return s.apply(this,arguments)})(t);var s}))}(Or(n=Xt(n,Jn)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,pA("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Qr;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(n,e){return cy.apply(this,arguments)}(yield my(e),t)})),t.promise}(Or(n=Xt(n,Jn)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new gy(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return s=yield xl(n),u=t,Qe(s).so.add(u),void u.next();var s,u})),()=>{t.ec(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return s=yield xl(n),u=t,void Qe(s).so.delete(u);var s,u}))}}(Or(n=Xt(n,Jn)),FE(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ul(this,QD(this._delegate,e))}catch(t){throw Zi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ns(this,Ey(this._delegate,e))}catch(t){throw Zi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new An(this,function(n,e){if(n=Xt(n,vy),PE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Oi(n,null,(t=e,new Ea(fn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Zi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const s=yield(u=n,Tp(u).then(l=>l.datastore));var u;new _R(n.asyncQueue,s,e,t).run()})),t.promise}(Or(n=Xt(n,Jn)),t=>e(new xy(n,t)))}(this._delegate,t=>e(new x0(this,t)))}batch(){return Or(this._delegate),new Wb(new hb(this._delegate,e=>Rh(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Or(n=Xt(n,Jn)),s=new _A;return function(n,e,t,s){const u=function(l,f){let y;return y="string"==typeof l?(new TextEncoder).encode(l):l,I=function(I,S){if(I instanceof Uint8Array)return aA(I,S);if(I instanceof ArrayBuffer)return aA(new Uint8Array(I),S);if(I instanceof ReadableStream)return I.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new uA(I,f);var I}(t,fp(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function(n,e,t){const s=Qe(n);var u;(u=(0,Ee.Z)(function*(l,f,y){try{const I=yield f.getMetadata();if(yield function(Z,J){const Ae=Qe(Z),Ye=jr(J.createTime);return Ae.persistence.runTransaction("hasNewerBundle","readonly",nt=>Ae.Je.getBundleMetadata(nt,J.id)).then(nt=>!!nt&&nt.createTime.compareTo(Ye)>=0)}(l.localStore,I))return yield f.close(),void y._completeWith((Z=I,{taskState:"Success",documentsLoaded:Z.totalDocuments,bytesLoaded:Z.totalBytes,totalDocuments:Z.totalDocuments,totalBytes:Z.totalBytes}));y._updateProgress(CD(I));const S=new bD(I,l.localStore,f.N);let M=yield f.zo();for(;M;){const Z=yield S.mo(M);Z&&y._updateProgress(Z),M=yield f.zo()}const F=yield S.complete();yield Ta(l,F.En,void 0),yield function(Z,J){const Ae=Qe(Z);return Ae.persistence.runTransaction("Save bundle","readwrite",Ye=>Ae.Je.saveBundleMetadata(Ye,J))}(l.localStore,I),y._completeWith(F.progress)}catch(I){Gf("SyncEngine",`Loading bundle failed with ${I}`),y._failWith(I)}var Z}),function(l,f,y){return u.apply(this,arguments)})(s,e,t).then(()=>{s.sharedClientState.notifyBundleLoaded()})}(yield my(n),u,s)}))}(t,n._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,s){const u=Qe(t);return u.persistence.runTransaction("Get named query","readonly",l=>u.Je.getNamedQuery(l,s))}(yield Ap(n),e)}))}(Or(n=Xt(n,Jn)),e).then(t=>t?new Oi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new An(this,t):null)}}class Fl extends JE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vh(new Ra(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ns.forKey(t,this.firestore,null)}}class x0{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Fl(e)}get(e){const t=Na(e);return this._delegate.get(t).then(s=>new Vl(this._firestore,new dc(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const u=Na(e);return s?(C0("Transaction.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const l=Na(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...u),this}delete(e){const t=Na(e);return this._delegate.delete(t),this}}class Wb{constructor(e){this._delegate=e}set(e,t,s){const u=Na(e);return s?(C0("WriteBatch.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const l=Na(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...u),this}delete(e){const t=Na(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ll{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new by(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hp(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Ll.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let l=u.get(t);return l||(l=new Ll(e,new Fl(e),t),u.set(t,l)),l}}Ll.INSTANCES=new WeakMap;class Ns{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fl(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ns(t,new On(t._delegate,s,new st(e)))}static forKey(e,t,s){return new Ns(t,new On(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Ul(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ul(this.firestore,QD(this._delegate,e))}catch(t){throw Zi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,qt.m9)(e))instanceof On&&ds(this._delegate,e)}set(e,t){t=C0("DocumentReference.set",t);try{return t?e0(this._delegate,e,t):e0(this._delegate,e)}catch(s){throw Zi(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?t0(this._delegate,e):t0(this._delegate,e,t,...s)}catch(u){throw Zi(u,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Rh(Xt(n.firestore,Jn),[new Xf(n._key,Ir.none())])}(this._delegate)}onSnapshot(...e){const t=zb(e),s=qb(e,u=>new Vl(this.firestore,new dc(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return n0(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Xt(n,On);const e=Xt(n.firestore,Jn),t=Or(e),s=new fc(e);return function(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(s=(0,Ee.Z)(function*(u,l,f){try{const y=yield function(I,S){const M=Qe(I);return M.persistence.runTransaction("read document","readonly",F=>M.Qn.An(F,S))}(u,l);y.isFoundDocument()?f.resolve(y):y.isNoDocument()?f.resolve(null):f.reject(new Me(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const I=oc(y,`Failed to get document '${l} from cache`);f.reject(I)}}),function(u,l,f){return s.apply(this,arguments)})(yield Ap(n),e,t);var s})),t.promise}(t,n._key).then(u=>new dc(e,s,n._key,u,new Ah(null!==u&&u.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Xt(n,On);const e=Xt(n.firestore,Jn);return lA(Or(e),n._key,{source:"server"}).then(t=>Ry(e,n,t))}(this._delegate):function(n){n=Xt(n,On);const e=Xt(n.firestore,Jn);return lA(Or(e),n._key).then(t=>Ry(e,n,t))}(this._delegate),t.then(s=>new Vl(this.firestore,new dc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Ns(this.firestore,this._delegate.withConverter(e?Ll.getInstance(this.firestore,e):null))}}function Zi(n,e,t){return n.message=n.message.replace(e,t),n}function zb(n){for(const e of n)if("object"==typeof e&&!jp(e))return e;return{}}function qb(n,e){var t,s;let u;return u=jp(n[0])?n[0]:jp(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{u.next&&u.next(e(l))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class Vl{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ns(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Gr(this._delegate,e._delegate)}}class Hp extends Vl{data(e){const t=this._delegate.data(e);return function(n,e){n||ct()}(void 0!==t),t}}class An{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Fl(e)}where(e,t,s){try{return new An(this.firestore,lu(this._delegate,function(n,e,t){const s=e,u=Dy("where",n);return new NA(u,s,t)}(e,t,s)))}catch(u){throw Zi(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new An(this.firestore,lu(this._delegate,function(n,e="asc"){const t=e,s=Dy("orderBy",n);return new PA(s,t)}(e,t)))}catch(s){throw Zi(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new An(this.firestore,lu(this._delegate,function(n){return YD("limit",n),new KE("limit",n,"F")}(e)))}catch(t){throw Zi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new An(this.firestore,lu(this._delegate,function(n){return YD("limitToLast",n),new KE("limitToLast",n,"L")}(e)))}catch(t){throw Zi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new An(this.firestore,lu(this._delegate,function(...n){return new Ty("startAt",n,!0)}(...e)))}catch(t){throw Zi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new An(this.firestore,lu(this._delegate,function(...n){return new Ty("startAfter",n,!1)}(...e)))}catch(t){throw Zi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new An(this.firestore,lu(this._delegate,function(...n){return new Mp("endBefore",n,!0)}(...e)))}catch(t){throw Zi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new An(this.firestore,lu(this._delegate,function(...n){return new Mp("endAt",n,!1)}(...e)))}catch(t){throw Zi(t,"endAt()","Query.endAt()")}}isEqual(e){return JD(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Xt(n,Oi);const e=Xt(n.firestore,Jn),t=Or(e),s=new fc(e);return function(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(s=(0,Ee.Z)(function*(u,l,f){try{const y=yield Um(u,l,!0),I=new Mi(l,y.Gn),S=I.bo(y.documents),M=I.applyChanges(S,!1);f.resolve(M.snapshot)}catch(y){const I=oc(y,`Failed to execute query '${l} against cache`);f.reject(I)}}),function(u,l,f){return s.apply(this,arguments)})(yield Ap(n),e,t);var s})),t.promise}(t,n._query).then(u=>new hc(e,s,n,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Xt(n,Oi);const e=Xt(n.firestore,Jn),t=Or(e),s=new fc(e);return dA(t,n._query,{source:"server"}).then(u=>new hc(e,s,n,u))}(this._delegate):function(n){n=Xt(n,Oi);const e=Xt(n.firestore,Jn),t=Or(e),s=new fc(e);return xA(n._query),dA(t,n._query).then(u=>new hc(e,s,n,u))}(this._delegate),t.then(s=>new Uh(this.firestore,new hc(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=zb(e),s=qb(e,u=>new Uh(this.firestore,new hc(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return n0(this._delegate,t,s)}withConverter(e){return new An(this.firestore,this._delegate.withConverter(e?Ll.getInstance(this.firestore,e):null))}}class Gp{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Hp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Uh{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new An(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Hp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Gp(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Hp(this._firestore,s))})}isEqual(e){return Gr(this._delegate,e._delegate)}}class Ul extends An{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ns(this.firestore,e):null}doc(e){try{return new Ns(this.firestore,void 0===e?Ey(this._delegate):Ey(this._delegate,e))}catch(t){throw Zi(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Xt(n.firestore,Jn),s=Ey(n),u=XE(n.converter,e);return Rh(t,[xp(bh(n.firestore),"addDoc",s._key,u,null!==n.converter,{}).toMutation(s._key,Ir.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Ns(this.firestore,t))}isEqual(e){return ds(this._delegate,e._delegate)}withConverter(e){return new Ul(this.firestore,this._delegate.withConverter(e?Ll.getInstance(this.firestore,e):null))}}function Na(n){return Xt(n,On)}class Wp{constructor(...e){this._delegate=new lc(...e)}static documentId(){return new Wp(fi.keyField().canonicalString())}isEqual(e){return(e=(0,qt.m9)(e))instanceof lc&&this._delegate._internalPath.isEqual(e._internalPath)}}class mc{constructor(e){this._delegate=e}static serverTimestamp(){const e=new jE("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new mc(e)}static delete(){const e=new Ch("deleteField");return e._methodName="FieldValue.delete",new mc(e)}static arrayUnion(...e){const t=function(...n){return new ob("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new mc(t)}static arrayRemove(...e){const t=function(...n){return new Np("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new mc(t)}static increment(e){const t=function(n){return new $E("increment",n)}(e);return t._methodName="FieldValue.increment",new mc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const jy={Firestore:$p,GeoPoint:BE,Timestamp:Pr,Blob:Vh,Transaction:x0,WriteBatch:Wb,DocumentReference:Ns,DocumentSnapshot:Vl,Query:An,QueryDocumentSnapshot:Hp,QuerySnapshot:Uh,CollectionReference:Ul,FieldPath:Wp,FieldValue:mc,setLogLevel:function(n){!function(n){ru.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Kb(n,e){return function(n,e=PS.z){return new yr.y(t=>{let s;return null!=e?e.schedule(()=>{s=n.onSnapshot({includeMetadataChanges:!0},t)}):s=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(n,e)}function N0(n,e){return Kb(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function $y(n,e){return N0(n,e).pipe(Ou(void 0),$b(),(0,wt.U)(([t,s])=>{const u=s.payload.docChanges(),l=u.map(f=>({type:f.type,payload:f}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((f,y)=>{const I=u.find(M=>M.doc.ref.isEqual(f.ref)),S=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(f.ref));I&&JSON.stringify(I.doc.metadata)===JSON.stringify(f.metadata)||!I&&S&&JSON.stringify(S.metadata)===JSON.stringify(f.metadata)||l.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:f}})}),l}))}function Yb(n,e,t){return $y(n,t).pipe(Uc((s,u)=>function(n,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Bl(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Bl(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Bl(n,e.oldIndex,1)}return n}(n,s))}),n}(s,u.map(l=>l.payload),e),[]),function(n,e=Hs.y){return n=null!=n?n:OS,(0,oi.e)((t,s)=>{let u,l=!0;t.subscribe(new lr.Q(s,f=>{const y=e(f);(l||!n(u,y))&&(l=!1,u=y,s.next(f))}))})}(),(0,wt.U)(s=>s.map(u=>({type:u.type,payload:u}))))}function Bl(n,e,t,...s){const u=n.slice();return u.splice(e,t,...s),u}function Qb(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,e){n.INTERNAL.registerComponent(new Ng.wA("firestore-compat",t=>((e,t)=>new $p(e,t,new R0))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},jy)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.8")}($o.Z);class Jb{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=$y(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),t.pipe(Ou(void 0),$b(),Is(([s,u])=>u.length>0||!s),(0,wt.U)(([s,u])=>u),pi.iC)}auditTrail(e){return this.stateChanges(e).pipe(Uc((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Qb(e);return Yb(this.query,t,this.afs.schedulers.outsideAngular).pipe(pi.iC)}valueChanges(e={}){return N0(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),pi.iC)}get(e){return(0,Un.D)(this.query.get(e)).pipe(pi.iC)}add(e){return this.ref.add(e)}doc(e){return new Xb(this.ref.doc(e),this.afs)}}class Xb{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:u,query:l}=nC(s,t);return new Jb(u,l,this.afs)}snapshotChanges(){return function(n,e){return Kb(n,e).pipe(Ou(void 0),$b(),(0,wt.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pi.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Un.D)(this.ref.get(e)).pipe(pi.iC)}}class M0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?$y(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),Is(t=>t.length>0),pi.iC):$y(this.query,this.afs.schedulers.outsideAngular).pipe(pi.iC)}auditTrail(e){return this.stateChanges(e).pipe(Uc((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Qb(e);return Yb(this.query,t,this.afs.schedulers.outsideAngular).pipe(pi.iC)}valueChanges(e={}){return N0(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(s=>s.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),pi.iC)}get(e){return(0,Un.D)(this.query.get(e)).pipe(pi.iC)}}const eC=new v.OlP("angularfire2.enableFirestorePersistence"),O0=new v.OlP("angularfire2.firestore.persistenceSettings"),tC=new v.OlP("angularfire2.firestore.settings"),VS=new v.OlP("angularfire2.firestore.use-emulator");function nC(n,e=(t=>t)){return{query:e(n),ref:n}}let US=(()=>{class n{constructor(t,s,u,l,f,y,I,S,M,F,Z,J,Ae,Ye,nt,Wt,kn){this.schedulers=I;const ur=(0,qi.on)(t,y,s),zt=M;F&&xS(ur,y,Z,Ae,Ye,nt,J,Wt),[this.firestore,this.persistenceEnabled$]=(0,qi.cc)(`${ur.name}.firestore`,"AngularFirestore",ur.name,()=>{const Xn=y.runOutsideAngular(()=>ur.firestore());if(l&&Xn.settings(l),zt&&Xn.useEmulator(...zt),u&&!ri(f)){const no=()=>{try{return(0,Un.D)(Xn.enablePersistence(S||void 0).then(()=>!0,()=>!1))}catch(ZR){return"undefined"!=typeof console&&console.warn(ZR),pt(!1)}};return[Xn,y.runOutsideAngular(no)]}return[Xn,pt(!1)]},[l,zt,u])}collection(t,s){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:f}=nC(u,s),y=this.schedulers.ngZone.run(()=>l);return new Jb(y,f,this)}collectionGroup(t,s){const u=s||(f=>f),l=this.firestore.collectionGroup(t);return new M0(u(l),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>s);return new Xb(u,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(qi.Dh),v.LFG(qi.xv,8),v.LFG(eC,8),v.LFG(tC,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(pi.HU),v.LFG(O0,8),v.LFG(VS,8),v.LFG(D0,8),v.LFG(Ub,8),v.LFG(Lh,8),v.LFG(I0,8),v.LFG(SS,8),v.LFG(Bb,8),v.LFG(RS,8),v.LFG(v0,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),du=(()=>{class n{constructor(){Vb.Z.registerVersion("angularfire",pi.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:eC,useValue:!0},{provide:O0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[US]}),n})();const Bh_firebase={apiKey:"AIzaSyBL-CVooW3mv682qfXbO8kFXaOPmT5gEks",authDomain:"authentication-fbc3d.firebaseapp.com",projectId:"authentication-fbc3d",storageBucket:"authentication-fbc3d.appspot.com",messagingSenderId:"792044941321",appId:"1:792044941321:web:0103917cf8b3470441c8d8",measurementId:"G-5D5T1M70RW"};let jh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n,bootstrap:[NS]}),n.\u0275inj=v.cJS({providers:[jb],imports:[[Oc,DC,qi.hO.initializeApp(Bh_firebase),b0,du]]}),n})();(0,v.G48)(),Xo().bootstrapModule(jh).catch(n=>console.error(n))},9162:(et,ve,k)=>{"use strict";function ie(re,fe,_e,De){return new(_e||(_e=Promise))(function(me,_t){function un(Et){try{vt(De.next(Et))}catch(At){_t(At)}}function $n(Et){try{vt(De.throw(Et))}catch(At){_t(At)}}function vt(Et){Et.done?me(Et.value):function(me){return me instanceof _e?me:new _e(function(_t){_t(me)})}(Et.value).then(un,$n)}vt((De=De.apply(re,fe||[])).next())})}function de(re){return this instanceof de?(this.v=re,this):new de(re)}function Y(re,fe,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,De=_e.apply(re,fe||[]),me=[];return Fe={},_t("next"),_t("throw"),_t("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function _t(pn){De[pn]&&(Fe[pn]=function(Tr){return new Promise(function(Ar,tn){me.push([pn,Tr,Ar,tn])>1||un(pn,Tr)})})}function un(pn,Tr){try{!function(pn){pn.value instanceof de?Promise.resolve(pn.value.v).then(vt,Et):At(me[0][2],pn)}(De[pn](Tr))}catch(Ar){At(me[0][3],Ar)}}function vt(pn){un("next",pn)}function Et(pn){un("throw",pn)}function At(pn,Tr){pn(Tr),me.shift(),me.length&&un(me[0][0],me[0][1])}}function Ce(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,fe=re[Symbol.asyncIterator];return fe?fe.call(re):(re=function(re){var fe="function"==typeof Symbol&&Symbol.iterator,_e=fe&&re[fe],De=0;if(_e)return _e.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&De>=re.length&&(re=void 0),{value:re&&re[De++],done:!re}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),_e={},De("next"),De("throw"),De("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function De(me){_e[me]=re[me]&&function(_t){return new Promise(function(un,$n){!function(me,_t,un,$n){Promise.resolve($n).then(function(vt){me({value:vt,done:un})},_t)}(un,$n,(_t=re[me](_t)).done,_t.value)})}}}k.d(ve,{mG:()=>ie,qq:()=>de,FC:()=>Y,KL:()=>Ce})},3668:(et,ve,k)=>{"use strict";k.d(ve,{deG:()=>ig,tb:()=>xl,AFp:()=>Tp,ip1:()=>Cp,CZH:()=>cc,hGG:()=>pb,z2F:()=>Np,sBO:()=>Pp,Sil:()=>On,_Vd:()=>yh,EJc:()=>qD,SBq:()=>Uo,qLn:()=>Cd,vpe:()=>Xs,tBr:()=>qr,XFs:()=>Xe,OlP:()=>xn,zs3:()=>Bn,ZZ4:()=>Sy,aQg:()=>xy,soG:()=>yy,YKP:()=>Hm,h0i:()=>ic,PXZ:()=>rb,R0b:()=>ds,FiY:()=>xr,Lbi:()=>my,g9A:()=>NE,Qsj:()=>_h,FYo:()=>Vm,JOm:()=>pa,Tiy:()=>tE,q3G:()=>R,tp0:()=>vr,Rgc:()=>Ca,dDg:()=>Or,q4F:()=>nE,GfV:()=>Bm,s_b:()=>Zm,ifc:()=>$e,eFA:()=>Rp,G48:()=>IA,X6Q:()=>UE,_c5:()=>qA,VLi:()=>wA,c2e:()=>zD,zSh:()=>Ro,wAp:()=>yt,vHH:()=>We,EiD:()=>g,mCW:()=>Co,qzn:()=>Ks,JVY:()=>_d,pB0:()=>cf,eBb:()=>uf,L6k:()=>fg,LAX:()=>pg,cg1:()=>Tm,Tjo:()=>JE,kL8:()=>PI,yhl:()=>hg,dqk:()=>Kt,sIi:()=>Gd,CqO:()=>pv,QGY:()=>nh,F4k:()=>Pi,RDi:()=>bc,AaK:()=>ie,z3N:()=>Ri,TTD:()=>Yi,uIk:()=>um,Suo:()=>ey,Xpm:()=>Fn,lG2:()=>Lt,Yz7:()=>tn,cJS:()=>gn,oAB:()=>Te,Yjl:()=>xt,Y36:()=>dl,_UZ:()=>hv,qZA:()=>Jr,TgZ:()=>hl,LFG:()=>ke,$8M:()=>_o,$Z:()=>fm,NdJ:()=>gv,CRH:()=>ty,iGM:()=>DD,LSH:()=>qe,_uU:()=>vI});var v=k(273),V=k(7908),P=k(8305),se=k(3719),ae=k(3174);function ge(r){for(let i in r)if(r[i]===ge)return i;throw Error("Could not find renamed property on target object.")}function ie(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(ie).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function he(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const H=ge({__forward_ref__:ge});function j(r){return r.__forward_ref__=j,r.toString=function(){return ie(this())},r}function X(r){return function(r){return"function"==typeof r&&r.hasOwnProperty(H)&&r.__forward_ref__===j}(r)?r():r}class We extends Error{constructor(i,o){super(function(r,i){return`${r?`NG0${r}: `:""}${i}`}(i,o)),this.code=i}}function Y(r){return"string"==typeof r?r:null==r?"":String(r)}function ue(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Y(r)}function Ne(r,i){const o=i?` in ${i}`:"";throw new We("201",`No provider for ${ue(r)} found${o}`)}function Et(r,i){null==r&&function(r,i,o,a){throw new Error(`ASSERTION ERROR: ${r}`+(null==a?"":` [Expected=> ${o} ${a} ${i} <=Actual]`))}(i,r,null,"!=")}function tn(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function gn(r){return{providers:r.providers||[],imports:r.imports||[]}}function nn(r){return Qt(r,Oe)||Qt(r,Hn)}function Qt(r,i){return r.hasOwnProperty(i)?r[i]:null}function Fi(r){return r&&(r.hasOwnProperty(_n)||r.hasOwnProperty(_i))?r[_n]:null}const Oe=ge({\u0275prov:ge}),_n=ge({\u0275inj:ge}),Hn=ge({ngInjectableDef:ge}),_i=ge({ngInjectorDef:ge});var Xe=(()=>((Xe=Xe||{})[Xe.Default=0]="Default",Xe[Xe.Host=1]="Host",Xe[Xe.Self=2]="Self",Xe[Xe.SkipSelf=4]="SkipSelf",Xe[Xe.Optional=8]="Optional",Xe))();let Ht;function Gn(r){const i=Ht;return Ht=r,i}function lt(r,i,o){const a=nn(r);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&Xe.Optional?null:void 0!==i?i:void Ne(ie(r),"Injector")}function Mt(r){return{toString:r}.toString()}var kt=(()=>((kt=kt||{})[kt.OnPush=0]="OnPush",kt[kt.Default=1]="Default",kt))(),$e=(()=>{return(r=$e||($e={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",$e;var r})();const ot="undefined"!=typeof globalThis&&globalThis,Ma="undefined"!=typeof window&&window,cn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Kt=ot||"undefined"!=typeof global&&global||Ma||cn,$={},U=[],G=ge({\u0275cmp:ge}),Ie=ge({\u0275dir:ge}),ne=ge({\u0275pipe:ge}),tt=ge({\u0275mod:ge}),it=ge({\u0275fac:ge}),on=ge({__NG_ELEMENT_ID__:ge});let zn=0;function Fn(r){return Mt(()=>{const o={},a={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===kt.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||U,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||$e.Emulated,id:"c",styles:r.styles||U,_:null,setInput:null,schemas:r.schemas||null,tView:null},c=r.directives,d=r.features,p=r.pipes;return a.id+=zn++,a.inputs=gt(r.inputs,o),a.outputs=gt(r.outputs),d&&d.forEach(m=>m(a)),a.directiveDefs=c?()=>("function"==typeof c?c():c).map(ee):null,a.pipeDefs=p?()=>("function"==typeof p?p():p).map(z):null,a})}function ee(r){return Vt(r)||function(r){return r[Ie]||null}(r)}function z(r){return function(r){return r[ne]||null}(r)}const W={};function Te(r){return Mt(()=>{const i={type:r.type,bootstrap:r.bootstrap||U,declarations:r.declarations||U,imports:r.imports||U,exports:r.exports||U,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(W[r.id]=r.type),i})}function gt(r,i){if(null==r)return $;const o={};for(const a in r)if(r.hasOwnProperty(a)){let c=r[a],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),o[c]=a,i&&(i[c]=d)}return o}const Lt=Fn;function xt(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function Vt(r){return r[G]||null}function mt(r,i){const o=r[tt]||null;if(!o&&!0===i)throw new Error(`Type ${ie(r)} does not have '\u0275mod' property.`);return o}function ms(r){return Array.isArray(r)&&"object"==typeof r[1]}function wn(r){return Array.isArray(r)&&!0===r[1]}function $l(r){return 0!=(8&r.flags)}function ks(r){return 2==(2&r.flags)}function pu(r){return 1==(1&r.flags)}function Vi(r){return null!==r.template}function Hl(r){return 0!=(512&r[2])}function Ls(r,i){return r.hasOwnProperty(it)?r[it]:null}class Wo{constructor(i,o,a){this.previousValue=i,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function Yi(){return Qi}function Qi(r){return r.type.prototype.ngOnChanges&&(r.setInput=Hh),Jl}function Jl(){const r=ao(this),i=null==r?void 0:r.current;if(i){const o=r.previous;if(o===$)r.previous=i;else for(let a in i)o[a]=i[a];r.current=null,this.ngOnChanges(i)}}function Hh(r,i,o,a){const c=ao(r)||function(r,i){return r[Ui]=i}(r,{previous:$,current:null}),d=c.current||(c.current={}),p=c.previous,m=this.declaredInputs[o],E=p[m];d[m]=new Wo(E&&E.currentValue,i,p===$),r[a]=i}Yi.ngInherit=!0;const Ui="__ngSimpleChanges__";function ao(r){return r[Ui]||null}let yu;function bc(r){yu=r}function hn(r){return!!r.listen}const uo={createRenderer:(r,i)=>void 0!==yu?yu:"undefined"!=typeof document?document:void 0};function Pn(r){for(;Array.isArray(r);)r=r[0];return r}function kr(r,i){return Pn(i[r.index])}function zo(r,i){return r.data[i]}function Gt(r,i){const o=i[r];return ms(o)?o:o[0]}function _u(r){return 4==(4&r[2])}function Vs(r){return 128==(128&r[2])}function $i(r,i){return null==i?null:r[i]}function vu(r){r[18]=0}function Fr(r,i){r[5]+=i;let o=r,a=r[3];for(;null!==a&&(1===i&&1===o[5]||-1===i&&0===o[5]);)a[5]+=i,o=a,a=a[3]}const ft={lFrame:ja(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ac(){return ft.bindingsEnabled}function Re(){return ft.lFrame.lView}function Ut(){return ft.lFrame.tView}function In(){let r=co();for(;null!==r&&64===r.type;)r=r.parent;return r}function co(){return ft.lFrame.currentTNode}function pr(r,i){const o=ft.lFrame;o.currentTNode=r,o.isParent=i}function Ko(){return ft.lFrame.isParent}function lo(){return ft.isInCheckNoChangesMode}function La(r){ft.isInCheckNoChangesMode=r}function Bs(r,i){const o=ft.lFrame;o.bindingIndex=o.bindingRootIndex=r,js(i)}function js(r){ft.lFrame.currentDirectiveIndex=r}function Qo(){return ft.lFrame.currentQueryIndex}function xc(r){ft.lFrame.currentQueryIndex=r}function Ua(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function Ba(r,i,o){if(o&Xe.SkipSelf){let c=i,d=r;for(;!(c=c.parent,null!==c||o&Xe.Host||(c=Ua(d),null===c||(d=d[15],10&c.type))););if(null===c)return!1;i=c,r=d}const a=ft.lFrame=Du();return a.currentTNode=i,a.lView=r,!0}function ho(r){const i=Du(),o=r[1];ft.lFrame=i,i.currentTNode=o.firstChild,i.lView=r,i.tView=o,i.contextLView=r,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Du(){const r=ft.lFrame,i=null===r?null:r.child;return null===i?ja(r):i}function ja(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function Nc(){const r=ft.lFrame;return ft.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Pc=Nc;function bu(){const r=Nc();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function $s(r){ft.lFrame.selectedIndex=r}function po(r,i){for(let o=i.directiveStart,a=i.directiveEnd;o<a;o++){const d=r.data[o].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:m,ngAfterViewInit:E,ngAfterViewChecked:b,ngOnDestroy:T}=d;p&&(r.contentHooks||(r.contentHooks=[])).push(-o,p),m&&((r.contentHooks||(r.contentHooks=[])).push(o,m),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,m)),E&&(r.viewHooks||(r.viewHooks=[])).push(-o,E),b&&((r.viewHooks||(r.viewHooks=[])).push(o,b),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,b)),null!=T&&(r.destroyHooks||(r.destroyHooks=[])).push(o,T)}}function Jo(r,i,o){Zh(r,i,3,o)}function Tu(r,i,o,a){(3&r[2])===o&&Zh(r,i,o,a)}function Ha(r,i){let o=r[2];(3&o)===i&&(o&=2047,o+=1,r[2]=o)}function Zh(r,i,o,a){const d=null!=a?a:-1,p=i.length-1;let m=0;for(let E=void 0!==a?65535&r[18]:0;E<p;E++)if("number"==typeof i[E+1]){if(m=i[E],null!=a&&m>=a)break}else i[E]<0&&(r[18]+=65536),(m<d||-1==d)&&(Mc(r,o,i,E),r[18]=(4294901760&r[18])+E+2),E++}function Mc(r,i,o,a){const c=o[a]<0,d=o[a+1],m=r[c?-o[a]:o[a]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{d.call(m)}finally{}}}else try{d.call(m)}finally{}}class Xo{constructor(i,o,a){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function Su(r,i,o){const a=hn(r);let c=0;for(;c<o.length;){const d=o[c];if("number"==typeof d){if(0!==d)break;c++;const p=o[c++],m=o[c++],E=o[c++];a?r.setAttribute(i,m,E,p):i.setAttributeNS(p,m,E)}else{const p=d,m=o[++c];Rr(p)?a&&r.setProperty(i,p,m):a?r.setAttribute(i,p,m):i.setAttribute(p,m),c++}}return c}function id(r){return 3===r||4===r||6===r}function Rr(r){return 64===r.charCodeAt(0)}function Ru(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let o=-1;for(let a=0;a<i.length;a++){const c=i[a];"number"==typeof c?o=c:0===o||eg(r,o,c,null,-1===o||2===o?i[++a]:null)}}return r}function eg(r,i,o,a,c){let d=0,p=r.length;if(-1===i)p=-1;else for(;d<r.length;){const m=r[d++];if("number"==typeof m){if(m===i){p=-1;break}if(m>i){p=d-1;break}}}for(;d<r.length;){const m=r[d];if("number"==typeof m)break;if(m===o){if(null===a)return void(null!==c&&(r[d+1]=c));if(a===r[d+1])return void(r[d+2]=c)}d++,null!==a&&d++,null!==c&&d++}-1!==p&&(r.splice(p,0,i),d=p+1),r.splice(d++,0,o),null!==a&&r.splice(d++,0,a),null!==c&&r.splice(d++,0,c)}function tg(r){return-1!==r}function Ga(r){return 32767&r}function xu(r,i){let o=function(r){return r>>16}(r),a=i;for(;o>0;)a=a[15],o--;return a}let mo=!0;function ws(r){const i=mo;return mo=r,i}let rg=0;function Hi(r,i){const o=Di(r,i);if(-1!==o)return o;const a=i[1];a.firstCreatePass&&(r.injectorIndex=i.length,pt(a.data,r),pt(i,null),pt(a.blueprint,null));const c=mr(r,i),d=r.injectorIndex;if(tg(c)){const p=Ga(c),m=xu(c,i),E=m[1].data;for(let b=0;b<8;b++)i[d+b]=m[p+b]|E[p+b]}return i[d+8]=c,d}function pt(r,i){r.push(0,0,0,0,0,0,0,0,i)}function Di(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function mr(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,a=null,c=i;for(;null!==c;){const d=c[1],p=d.type;if(a=2===p?d.declTNode:1===p?c[6]:null,null===a)return-1;if(o++,c=c[15],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return-1}function yr(r,i,o){!function(r,i,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(on)&&(a=o[on]),null==a&&(a=o[on]=rg++);const c=255&a;i.data[r+(c>>5)]|=1<<c}(r,i,o)}function ts(r,i,o){if(o&Xe.Optional)return r;Ne(i,"NodeInjector")}function Fc(r,i,o,a){if(o&Xe.Optional&&void 0===a&&(a=null),0==(o&(Xe.Self|Xe.Host))){const c=r[9],d=Gn(void 0);try{return c?c.get(i,a,o&Xe.Optional):lt(i,a,o&Xe.Optional)}finally{Gn(d)}}return ts(a,i,o)}function od(r,i,o,a=Xe.Default,c){if(null!==r){const d=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(on)?r[on]:void 0;return"number"==typeof i?i>=0?255&i:Jh:i}(o);if("function"==typeof d){if(!Ba(i,r,a))return a&Xe.Host?ts(c,o,a):Fc(i,o,a,c);try{const p=d(a);if(null!=p||a&Xe.Optional)return p;Ne(o)}finally{Pc()}}else if("number"==typeof d){let p=null,m=Di(r,i),E=-1,b=a&Xe.Host?i[16][6]:null;for((-1===m||a&Xe.SkipSelf)&&(E=-1===m?mr(r,i):i[m+8],-1!==E&&Kn(a,!1)?(p=i[1],m=Ga(E),i=xu(E,i)):m=-1);-1!==m;){const T=i[1];if(ad(d,m,T.data)){const N=Hs(m,i,o,p,a,b);if(N!==ea)return N}E=i[m+8],-1!==E&&Kn(a,i[1].data[m+8]===b)&&ad(d,m,i)?(p=T,m=Ga(E),i=xu(E,i)):m=-1}}}return Fc(i,o,a,c)}const ea={};function Jh(){return new lr(In(),Re())}function Hs(r,i,o,a,c,d){const p=i[1],m=p.data[r+8],T=wt(m,p,o,null==a?ks(m)&&mo:a!=p&&0!=(3&m.type),c&Xe.Host&&d===m);return null!==T?yo(i,p,T,m):ea}function wt(r,i,o,a,c){const d=r.providerIndexes,p=i.data,m=1048575&d,E=r.directiveStart,T=d>>20,O=c?m+T:r.directiveEnd;for(let B=a?m:m+T;B<O;B++){const q=p[B];if(B<E&&o===q||B>=E&&q.type===o)return B}if(c){const B=p[E];if(B&&Vi(B)&&B.type===o)return E}return null}function yo(r,i,o,a){let c=r[o];const d=i.data;if(function(r){return r instanceof Xo}(c)){const p=c;p.resolving&&function(r,i){throw new We("200",`Circular dependency in DI detected for ${r}`)}(ue(d[o]));const m=ws(p.canSeeViewProviders);p.resolving=!0;const E=p.injectImpl?Gn(p.injectImpl):null;Ba(r,a,Xe.Default);try{c=r[o]=p.factory(void 0,d,r,a),i.firstCreatePass&&o>=a.directiveStart&&function(r,i,o){const{ngOnChanges:a,ngOnInit:c,ngDoCheck:d}=i.type.prototype;if(a){const p=Qi(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,p),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,p)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,c),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,d))}(o,d[o],i)}finally{null!==E&&Gn(E),ws(m),p.resolving=!1,Pc()}}return c}function ad(r,i,o){return!!(o[i+(r>>5)]&1<<r)}function Kn(r,i){return!(r&Xe.Self||r&Xe.Host&&i)}class lr{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,a){return od(this._tNode,this._lView,i,a,o)}}function _o(r){return function(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const o=r.attrs;if(o){const a=o.length;let c=0;for(;c<a;){const d=o[c];if(id(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<a&&"string"==typeof o[c];)c++;else{if(d===i)return o[c+1];c+=2}}}return null}(In(),r)}const Gs="__parameters__";function bi(r,i,o){return Mt(()=>{const a=function(r){return function(...o){if(r){const a=r(...o);for(const c in a)this[c]=a[c]}}}(i);function c(...d){if(this instanceof c)return a.apply(this,d),this;const p=new c(...d);return m.annotation=p,m;function m(E,b,T){const N=E.hasOwnProperty(Gs)?E[Gs]:Object.defineProperty(E,Gs,{value:[]})[Gs];for(;N.length<=T;)N.push(null);return(N[T]=N[T]||[]).push(p),E}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class xn{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=tn({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ig=new xn("AnalyzeForEntryComponents");function ai(r,i){void 0===i&&(i=r);for(let o=0;o<r.length;o++){let a=r[o];Array.isArray(a)?(i===r&&(i=r.slice(0,o)),ai(a,i)):i!==r&&i.push(a)}return i}function is(r,i){r.forEach(o=>Array.isArray(o)?is(o,i):i(o))}function ui(r,i,o){i>=r.length?r.push(o):r.splice(i,0,o)}function Yn(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}const aa={},Io="__NG_DI_FLAG__",Za="ngTempTokenPath",C=/\n/gm,L="__source",Q=ge({provide:String,useValue:ge});let ce;function xe(r){const i=ce;return ce=r,i}function Ge(r,i=Xe.Default){if(void 0===ce)throw new Error("inject() must be called from an injection context");return null===ce?lt(r,void 0,i):ce.get(r,i&Xe.Optional?null:void 0,i)}function ke(r,i=Xe.Default){return(Ht||Ge)(X(r),i)}function Ln(r){const i=[];for(let o=0;o<r.length;o++){const a=X(r[o]);if(Array.isArray(a)){if(0===a.length)throw new Error("Arguments array must have arguments.");let c,d=Xe.Default;for(let p=0;p<a.length;p++){const m=a[p],E=tr(m);"number"==typeof E?-1===E?c=m.token:d|=E:c=m}i.push(ke(c,d))}else i.push(ke(a))}return i}function _r(r,i){return r[Io]=i,r.prototype[Io]=i,r}function tr(r){return r[Io]}function qs(r,i,o,a){const c=r[Za];throw i[L]&&c.unshift(i[L]),r.message=function(r,i,o,a=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let c=ie(i);if(Array.isArray(i))c=i.map(ie).join(" -> ");else if("object"==typeof i){let d=[];for(let p in i)if(i.hasOwnProperty(p)){let m=i[p];d.push(p+":"+("string"==typeof m?JSON.stringify(m):ie(m)))}c=`{${d.join(", ")}}`}return`${o}${a?"("+a+")":""}[${c}]: ${r.replace(C,"\n  ")}`}("\n"+r.message,c,o,a),r.ngTokenPath=c,r[Za]=null,r}const qr=_r(bi("Inject",r=>({token:r})),-1),xr=_r(bi("Optional"),8),vr=_r(bi("SkipSelf"),4);let Fu;function da(r){var i;return(null==(i=function(){if(void 0===Fu&&(Fu=null,Kt.trustedTypes))try{Fu=Kt.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return Fu}())?void 0:i.createHTML(r))||r}class Do{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class bo extends Do{getTypeName(){return"HTML"}}class ha extends Do{getTypeName(){return"Style"}}class cg extends Do{getTypeName(){return"Script"}}class lg extends Do{getTypeName(){return"URL"}}class dg extends Do{getTypeName(){return"ResourceURL"}}function Ri(r){return r instanceof Do?r.changingThisBreaksApplicationSecurity:r}function Ks(r,i){const o=hg(r);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}function hg(r){return r instanceof Do&&r.getTypeName()||null}function _d(r){return new bo(r)}function fg(r){return new ha(r)}function uf(r){return new cg(r)}function pg(r){return new lg(r)}function cf(r){return new dg(r)}class Yy{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(da(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class Ya{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const a=this.inertDocument.createElement("body");o.appendChild(a)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=da(i),o;const a=this.inertDocument.createElement("body");return a.innerHTML=da(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(i){const o=i.attributes;for(let c=o.length-1;0<c;c--){const p=o.item(c).name;("xmlns:ns1"===p||0===p.indexOf("ns1:"))&&i.removeAttribute(p)}let a=i.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const Jy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ed=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Co(r){return(r=String(r)).match(Jy)||r.match(Ed)?r:"unsafe:"+r}function Cs(r){const i={};for(const o of r.split(","))i[o]=!0;return i}function Lu(...r){const i={};for(const o of r)for(const a in o)o.hasOwnProperty(a)&&(i[a]=!0);return i}const gg=Cs("area,br,col,hr,img,wbr"),wd=Cs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Id=Cs("rp,rt"),Qa=Lu(gg,Lu(wd,Cs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Lu(Id,Cs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Lu(Id,wd)),lf=Cs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ja=Cs("srcset"),Dd=Lu(lf,Ja,Cs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Cs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),e_=Cs("script,style,template");class t_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,a=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?a=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,a&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let c=this.checkClobberedElement(o,o.nextSibling);if(c){o=c;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!Qa.hasOwnProperty(o))return this.sanitizedSomething=!0,!e_.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const a=i.attributes;for(let c=0;c<a.length;c++){const d=a.item(c),p=d.name,m=p.toLowerCase();if(!Dd.hasOwnProperty(m)){this.sanitizedSomething=!0;continue}let E=d.value;lf[m]&&(E=Co(E)),Ja[m]&&(r=E,E=(r=String(r)).split(",").map(i=>Co(i.trim())).join(", ")),this.buf.push(" ",p,'="',_(E),'"')}var r;return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();Qa.hasOwnProperty(o)&&!gg.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(_(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const n_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_g=/([^\#-~ |!])/g;function _(r){return r.replace(/&/g,"&amp;").replace(n_,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(_g,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let h;function g(r,i){let o=null;try{h=h||function(r){const i=new Ya(r);return function(){try{return!!(new window.DOMParser).parseFromString(da(""),"text/html")}catch(r){return!1}}()?new Yy(i):i}(r);let a=i?String(i):"";o=h.getInertBodyElement(a);let c=5,d=a;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,a=d,d=o.innerHTML,o=h.getInertBodyElement(a)}while(a!==d);return da((new t_).sanitizeChildren(w(o)||o))}finally{if(o){const a=w(o)||o;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function w(r){return"content"in r&&function(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var R=(()=>((R=R||{})[R.NONE=0]="NONE",R[R.HTML=1]="HTML",R[R.STYLE=2]="STYLE",R[R.SCRIPT=3]="SCRIPT",R[R.URL=4]="URL",R[R.RESOURCE_URL=5]="RESOURCE_URL",R))();function qe(r){const i=function(){const r=Re();return r&&r[12]}();return i?i.sanitize(R.URL,r)||"":Ks(r,"URL")?Ri(r):Co(Y(r))}const Uu="__ngContext__";function nr(r,i){r[Uu]=i}function hf(r){const i=function(r){return r[Uu]||null}(r);return i?Array.isArray(i)?i:i.lView:null}function mf(r){return r.ngOriginalError}function sC(r,...i){r.error(...i)}class Cd{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i),a=this._findContext(i),c=(r=i)&&r.ngErrorLogger||sC;var r;c(this._console,"ERROR",i),o&&c(this._console,"ORIGINAL ERROR",o),a&&c(this._console,"ERROR CONTEXT",a)}_findContext(i){return i?i.ngDebugContext||this._findContext(mf(i)):null}_findOriginalError(i){let o=i&&mf(i);for(;o&&mf(o);)o=mf(o);return o||null}}const q0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Kt))();function Ao(r){return r instanceof Function?r():r}var pa=(()=>((pa=pa||{})[pa.Important=1]="Important",pa[pa.DashCase=2]="DashCase",pa))();function Z0(r,i){return undefined(r,i)}function Ad(r){const i=r[3];return wn(i)?i[3]:i}function c_(r){return J0(r[13])}function l_(r){return J0(r[4])}function J0(r){for(;null!==r&&!wn(r);)r=r[4];return r}function $u(r,i,o,a,c){if(null!=a){let d,p=!1;wn(a)?d=a:ms(a)&&(p=!0,a=a[0]);const m=Pn(a);0===r&&null!==o?null==c?rw(i,o,m):Yc(i,o,m,c||null,!0):1===r&&null!==o?Yc(i,o,m,c||null,!0):2===r?function(r,i,o){const a=vf(r,i);a&&function(r,i,o,a){hn(r)?r.removeChild(i,o,a):i.removeChild(o)}(r,a,i,o)}(i,m,p):3===r&&i.destroyNode(m),null!=d&&function(r,i,o,a,c){const d=o[7];d!==Pn(o)&&$u(i,r,a,d,c);for(let m=10;m<o.length;m++){const E=o[m];wf(E[1],E,r,i,a,d)}}(i,r,d,o,c)}}function _f(r,i,o){return hn(r)?r.createElement(i,o):null===o?r.createElement(i):r.createElementNS(o,i)}function nw(r,i){const o=r[9],a=o.indexOf(i),c=i[3];1024&i[2]&&(i[2]&=-1025,Fr(c,-1)),o.splice(a,1)}function h_(r,i){if(r.length<=10)return;const o=10+i,a=r[o];if(a){const c=a[17];null!==c&&c!==r&&nw(c,a),i>0&&(r[o-1][4]=a[4]);const d=Yn(r,10+i);!function(r,i){wf(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(a[1],a);const p=d[19];null!==p&&p.detachView(d[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function os(r,i){if(!(256&i[2])){const o=i[11];hn(o)&&o.destroyNode&&wf(r,i,o,3,null,null),function(r){let i=r[13];if(!i)return f_(r[1],r);for(;i;){let o=null;if(ms(i))o=i[13];else{const a=i[10];a&&(o=a)}if(!o){for(;i&&!i[4]&&i!==r;)ms(i)&&f_(i[1],i),i=i[3];null===i&&(i=r),ms(i)&&f_(i[1],i),o=i&&i[4]}i=o}}(i)}}function f_(r,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(r,i){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let a=0;a<o.length;a+=2){const c=i[o[a]];if(!(c instanceof Xo)){const d=o[a+1];if(Array.isArray(d))for(let p=0;p<d.length;p+=2){const m=c[d[p]],E=d[p+1];try{E.call(m)}finally{}}else try{d.call(c)}finally{}}}}(r,i),function(r,i){const o=r.cleanup,a=i[7];let c=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const p=o[d+1],m="function"==typeof p?p(i):Pn(i[p]),E=a[c=o[d+2]],b=o[d+3];"boolean"==typeof b?m.removeEventListener(o[d],E,b):b>=0?a[c=b]():a[c=-b].unsubscribe(),d+=2}else{const p=a[c=o[d+1]];o[d].call(p)}if(null!==a){for(let d=c+1;d<a.length;d++)a[d]();i[7]=null}}(r,i),1===i[1].type&&hn(i[11])&&i[11].destroy();const o=i[17];if(null!==o&&wn(i[3])){o!==i[3]&&nw(o,i);const a=i[19];null!==a&&a.detachView(r)}}}function Cg(r,i,o){return function(r,i,o){let a=i;for(;null!==a&&40&a.type;)a=(i=a).parent;if(null===a)return o[0];if(2&a.flags){const c=r.data[a.directiveStart].encapsulation;if(c===$e.None||c===$e.Emulated)return null}return kr(a,o)}(r,i.parent,o)}function Yc(r,i,o,a,c){hn(r)?r.insertBefore(i,o,a,c):i.insertBefore(o,a,c)}function rw(r,i,o){hn(r)?r.appendChild(i,o):i.appendChild(o)}function g_(r,i,o,a,c){null!==a?Yc(r,i,o,a,c):rw(r,i,o)}function vf(r,i){return hn(r)?r.parentNode(i):i.parentNode}let Hu=function(r,i,o){return 40&r.type?kr(r,o):null};function Sg(r,i,o,a){const c=Cg(r,a,i),d=i[11],m=function(r,i,o){return Hu(r,i,o)}(a.parent||i[6],a,i);if(null!=c)if(Array.isArray(o))for(let E=0;E<o.length;E++)g_(d,c,o[E],m,!1);else g_(d,c,o,m,!1)}function Ef(r,i){if(null!==i){const o=i.type;if(3&o)return kr(i,r);if(4&o)return m_(-1,r[i.index]);if(8&o){const a=i.child;if(null!==a)return Ef(r,a);{const c=r[i.index];return wn(c)?m_(-1,c):Pn(c)}}if(32&o)return Z0(i,r)()||Pn(r[i.index]);{const a=ow(r,i);return null!==a?Array.isArray(a)?a[0]:Ef(Ad(r[16]),a):Ef(r,i.next)}}return null}function ow(r,i){return null!==i?r[16][6].projection[i.projection]:null}function m_(r,i){const o=10+r+1;if(o<i.length){const a=i[o],c=a[1].firstChild;if(null!==c)return Ef(a,c)}return i[7]}function Rg(r,i,o,a,c,d,p){for(;null!=o;){const m=a[o.index],E=o.type;if(p&&0===i&&(m&&nr(Pn(m),a),o.flags|=4),64!=(64&o.flags))if(8&E)Rg(r,i,o.child,a,c,d,!1),$u(i,r,c,m,d);else if(32&E){const b=Z0(o,a);let T;for(;T=b();)$u(i,r,c,T,d);$u(i,r,c,m,d)}else 16&E?uw(r,i,a,o,c,d):$u(i,r,c,m,d);o=p?o.projectionNext:o.next}}function wf(r,i,o,a,c,d){Rg(o,a,r.firstChild,i,c,d,!1)}function uw(r,i,o,a,c,d){const p=o[16],E=p[6].projection[a.projection];if(Array.isArray(E))for(let b=0;b<E.length;b++)$u(i,r,c,E[b],d);else Rg(r,i,E,p[3],c,d,!0)}function cw(r,i,o){hn(r)?r.setAttribute(i,"style",o):i.style.cssText=o}function xg(r,i,o){hn(r)?""===o?r.removeAttribute(i,"class"):r.setAttribute(i,"class",o):i.className=o}function lw(r,i,o){let a=r.length;for(;;){const c=r.indexOf(i,o);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const d=i.length;if(c+d===a||r.charCodeAt(c+d)<=32)return c}o=c+1}}const dw="ng-template";function DC(r,i,o){let a=0;for(;a<r.length;){let c=r[a++];if(o&&"class"===c){if(c=r[a],-1!==lw(c.toLowerCase(),i,0))return!0}else if(1===c){for(;a<r.length&&"string"==typeof(c=r[a++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function hw(r){return 4===r.type&&r.value!==dw}function qt(r,i,o){return i===(4!==r.type||o?r.value:dw)}function Qc(r,i,o){let a=4;const c=r.attrs||[],d=function(r){for(let i=0;i<r.length;i++)if(id(r[i]))return i;return r.length}(c);let p=!1;for(let m=0;m<i.length;m++){const E=i[m];if("number"!=typeof E){if(!p)if(4&a){if(a=2|1&a,""!==E&&!qt(r,E,o)||""===E&&1===i.length){if(Zr(a))return!1;p=!0}}else{const b=8&a?E:i[++m];if(8&a&&null!==r.attrs){if(!DC(r.attrs,b,o)){if(Zr(a))return!1;p=!0}continue}const N=Ng(8&a?"class":E,c,hw(r),o);if(-1===N){if(Zr(a))return!1;p=!0;continue}if(""!==b){let O;O=N>d?"":c[N+1].toLowerCase();const B=8&a?O:null;if(B&&-1!==lw(B,b,0)||2&a&&b!==O){if(Zr(a))return!1;p=!0}}}}else{if(!p&&!Zr(a)&&!Zr(E))return!1;if(p&&Zr(E))continue;p=!1,a=E|1&a}}return Zr(a)||p}function Zr(r){return 0==(1&r)}function Ng(r,i,o,a){if(null===i)return-1;let c=0;if(a||!o){let d=!1;for(;c<i.length;){const p=i[c];if(p===r)return c;if(3===p||6===p)d=!0;else{if(1===p||2===p){let m=i[++c];for(;"string"==typeof m;)m=i[++c];continue}if(4===p)break;if(0===p){c+=4;continue}}c+=d?1:2}return-1}return function(r,i){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const a=r[o];if("number"==typeof a)return-1;if(a===i)return o;o++}return-1}(i,r)}function Ee(r,i,o=!1){for(let a=0;a<i.length;a++)if(Qc(r,i[a],o))return!0;return!1}function Rt(r,i){return r?":not("+i.trim()+")":i}function Pg(r){let i=r[0],o=1,a=2,c="",d=!1;for(;o<r.length;){let p=r[o];if("string"==typeof p)if(2&a){const m=r[++o];c+="["+p+(m.length>0?'="'+m+'"':"")+"]"}else 8&a?c+="."+p:4&a&&(c+=" "+p);else""!==c&&!Zr(p)&&(i+=Rt(d,c),c=""),a=p,d=d||!Zr(a);o++}return""!==c&&(i+=Rt(d,c)),i}const Pt={};function Fg(r,i){const o=r.contentQueries;if(null!==o)for(let a=0;a<o.length;a+=2){const c=o[a],d=o[a+1];if(-1!==d){const p=r.data[d];xc(c),p.contentQueries(2,i[d],d)}}}function Sf(r,i,o,a,c,d,p,m,E,b){const T=i.blueprint.slice();return T[0]=c,T[2]=140|a,vu(T),T[3]=T[15]=r,T[8]=o,T[10]=p||r&&r[10],T[11]=m||r&&r[11],T[12]=E||r&&r[12]||null,T[9]=b||r&&r[9]||null,T[6]=d,T[16]=2==i.type?r[16]:T,T}function el(r,i,o,a,c){let d=r.data[i];if(null===d)d=function(r,i,o,a,c){const d=co(),p=Ko(),E=r.data[i]=function(r,i,o,a,c,d){return{type:o,index:a,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?d:d&&d.parent,o,i,a,c);return null===r.firstChild&&(r.firstChild=E),null!==d&&(p?null==d.child&&null!==E.parent&&(d.child=E):null===d.next&&(d.next=E)),E}(r,i,o,a,c),ft.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=a,d.attrs=c;const p=function(){const r=ft.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();d.injectorIndex=null===p?-1:p.injectorIndex}return pr(d,!0),d}function Wu(r,i,o,a){if(0===o)return-1;const c=i.length;for(let d=0;d<o;d++)i.push(a),r.blueprint.push(a),r.data.push(null);return c}function xd(r,i,o){ho(i);try{const a=r.viewQuery;null!==a&&kf(1,a,o);const c=r.template;null!==c&&Vg(r,i,c,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Fg(r,i),r.staticViewQueries&&kf(2,r.viewQuery,o);const d=r.components;null!==d&&function(r,i){for(let o=0;o<i.length;o++)Mf(r,i[o])}(i,d)}catch(a){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),a}finally{i[2]&=-5,bu()}}function Nd(r,i,o,a){const c=i[2];if(256==(256&c))return;ho(i);const d=lo();try{vu(i),function(r){ft.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&Vg(r,i,o,2,a);const p=3==(3&c);if(!d)if(p){const b=r.preOrderCheckHooks;null!==b&&Jo(i,b,null)}else{const b=r.preOrderHooks;null!==b&&Tu(i,b,0,null),Ha(i,0)}if(function(r){for(let i=c_(r);null!==i;i=l_(i)){if(!i[2])continue;const o=i[9];for(let a=0;a<o.length;a++){const c=o[a],d=c[3];0==(1024&c[2])&&Fr(d,1),c[2]|=1024}}}(i),function(r){for(let i=c_(r);null!==i;i=l_(i))for(let o=10;o<i.length;o++){const a=i[o],c=a[1];Vs(a)&&Nd(c,a,c.template,a[8])}}(i),null!==r.contentQueries&&Fg(r,i),!d)if(p){const b=r.contentCheckHooks;null!==b&&Jo(i,b)}else{const b=r.contentHooks;null!==b&&Tu(i,b,1),Ha(i,1)}!function(r,i){const o=r.hostBindingOpCodes;if(null!==o)try{for(let a=0;a<o.length;a++){const c=o[a];if(c<0)$s(~c);else{const d=c,p=o[++a],m=o[++a];Bs(p,d),m(2,i[d])}}}finally{$s(-1)}}(r,i);const m=r.components;null!==m&&function(r,i){for(let o=0;o<i.length;o++)Lw(r,i[o])}(i,m);const E=r.viewQuery;if(null!==E&&kf(2,E,a),!d)if(p){const b=r.viewCheckHooks;null!==b&&Jo(i,b)}else{const b=r.viewHooks;null!==b&&Tu(i,b,2),Ha(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),d||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,Fr(i[3],-1))}finally{bu()}}function O_(r,i,o,a){const c=i[10],d=!lo(),p=_u(i);try{d&&!p&&c.begin&&c.begin(),p&&xd(r,i,a),Nd(r,i,o,a)}finally{d&&!p&&c.end&&c.end()}}function Vg(r,i,o,a,c){const d=ft.lFrame.selectedIndex,p=2&a;try{$s(-1),p&&i.length>20&&function(r,i,o,a){if(!a)if(3==(3&i[2])){const d=r.preOrderCheckHooks;null!==d&&Jo(i,d,o)}else{const d=r.preOrderHooks;null!==d&&Tu(i,d,0,o)}$s(o)}(r,i,20,lo()),o(a,c)}finally{$s(d)}}function Rf(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=Pd(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function Pd(r,i,o,a,c,d,p,m,E,b){const T=20+a,N=T+c,O=function(r,i){const o=[];for(let a=0;a<i;a++)o.push(a<r?null:Pt);return o}(T,N),B="function"==typeof b?b():b;return O[1]={type:r,blueprint:O,template:o,queries:null,viewQuery:m,declTNode:i,data:O.slice().fill(null,T),bindingStartIndex:T,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:E,consts:B,incompleteFirstPass:!1}}function Sw(r,i,o,a){const c=H_(i);null===o?c.push(a):(c.push(o),r.firstCreatePass&&Bw(r).push(a,c.length-1))}function Bg(r,i,o){for(let a in r)if(r.hasOwnProperty(a)){const c=r[a];(o=null===o?{}:o).hasOwnProperty(a)?o[a].push(i,c):o[a]=[i,c]}return o}function V_(r,i,o,a,c,d){const p=d.hostBindings;if(p){let m=r.hostBindingOpCodes;null===m&&(m=r.hostBindingOpCodes=[]);const E=~i.index;(function(r){let i=r.length;for(;i>0;){const o=r[--i];if("number"==typeof o&&o<0)return o}return 0})(m)!=E&&m.push(E),m.push(a,c,p)}}function Pw(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function Mw(r,i){i.flags|=2,(r.components||(r.components=[])).push(i.index)}function tl(r,i,o){if(o){if(i.exportAs)for(let a=0;a<i.exportAs.length;a++)o[i.exportAs[a]]=r;Vi(i)&&(o[""]=r)}}function U_(r,i,o){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+o,r.providerIndexes=i}function Nf(r,i,o,a,c){r.data[a]=c;const d=c.factory||(c.factory=Ls(c.type)),p=new Xo(d,Vi(c),null);r.blueprint[a]=p,o[a]=p,V_(r,i,0,a,Wu(r,o,c.hostVars,Pt),c)}function Ow(r,i,o){const a=kr(i,r),c=Rf(o),d=r[10],p=Od(r,Sf(r,c,null,o.onPush?64:16,a,i,d,d.createRenderer(a,o),null,null));r[i.index]=p}function us(r,i,o,a,c,d){const p=kr(r,i);!function(r,i,o,a,c,d,p){if(null==d)hn(r)?r.removeAttribute(i,c,o):i.removeAttribute(c);else{const m=null==p?Y(d):p(d,a||"",c);hn(r)?r.setAttribute(i,c,m,o):o?i.setAttributeNS(o,c,m):i.setAttribute(c,m)}}(i[11],p,d,r.value,o,a,c)}function Wi(r,i,o,a,c,d){const p=d[i];if(null!==p){const m=a.setInput;for(let E=0;E<p.length;){const b=p[E++],T=p[E++],N=p[E++];null!==m?a.setInput(o,N,b,T):o[T]=N}}}function kw(r,i){let o=null,a=0;for(;a<i.length;){const c=i[a];if(0!==c)if(5!==c){if("number"==typeof c)break;r.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,r[c],i[a+1])),a+=2}else a+=2;else a+=4}return o}function Lw(r,i){const o=Gt(i,r);if(Vs(o)){const a=o[1];80&o[2]?Nd(a,o,a.template,o[8]):o[5]>0&&zg(o)}}function zg(r){for(let a=c_(r);null!==a;a=l_(a))for(let c=10;c<a.length;c++){const d=a[c];if(1024&d[2]){const p=d[1];Nd(p,d,p.template,d[8])}else d[5]>0&&zg(d)}const o=r[1].components;if(null!==o)for(let a=0;a<o.length;a++){const c=Gt(o[a],r);Vs(c)&&c[5]>0&&zg(c)}}function Mf(r,i){const o=Gt(i,r),a=o[1];(function(r,i){for(let o=i.length;o<r.blueprint.length;o++)i.push(r.blueprint[o])})(a,o),xd(a,o,o[8])}function Od(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function Of(r){for(;r;){r[2]|=64;const i=Ad(r);if(Hl(r)&&!i)return r;r=i}return null}function Kg(r,i,o){const a=i[10];a.begin&&a.begin();try{Nd(r,i,r.template,o)}catch(c){throw G_(i,c),c}finally{a.end&&a.end()}}function Vw(r){!function(r){for(let i=0;i<r.components.length;i++){const o=r.components[i],a=hf(o),c=a[1];O_(c,a,c.template,o)}}(r[8])}function kf(r,i,o){xc(0),i(r,o)}const Uw=(()=>Promise.resolve(null))();function H_(r){return r[7]||(r[7]=[])}function Bw(r){return r.cleanup||(r.cleanup=[])}function G_(r,i){const o=r[9],a=o?o.get(Cd,null):null;a&&a.handleError(i)}function ma(r,i,o){let a=o?r.styles:null,c=o?r.classes:null,d=0;if(null!==i)for(let p=0;p<i.length;p++){const m=i[p];"number"==typeof m?d=m:1==d?c=he(c,m):2==d&&(a=he(a,m+": "+i[++p]+";"))}o?r.styles=a:r.stylesWithoutHost=a,o?r.classes=c:r.classesWithoutHost=c}const ya=new xn("INJECTOR",-1);class Yg{get(i,o=aa){if(o===aa){const a=new Error(`NullInjectorError: No provider for ${ie(i)}!`);throw a.name="NullInjectorError",a}return o}}const Ro=new xn("Set Injector scope."),Fd={},VC={};let tu;function _a(){return void 0===tu&&(tu=new Yg),tu}function Lf(r,i=null,o=null,a){return new Jg(r,o,i||_a(),a)}class Jg{constructor(i,o,a,c=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];o&&is(o,m=>this.processProvider(m,i,o)),is([i],m=>this.processInjectorType(m,[],d)),this.records.set(ya,Ld(void 0,this));const p=this.records.get(Ro);this.scope=null!=p?p.value:null,this.source=c||("object"==typeof i?null:ie(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,o=aa,a=Xe.Default){this.assertNotDestroyed();const c=xe(this),d=Gn(void 0);try{if(!(a&Xe.SkipSelf)){let m=this.records.get(i);if(void 0===m){const E=("function"==typeof(r=i)||"object"==typeof r&&r instanceof xn)&&nn(i);m=E&&this.injectableDefInScope(E)?Ld(Xg(i),Fd):null,this.records.set(i,m)}if(null!=m)return this.hydrate(i,m)}return(a&Xe.Self?_a():this.parent).get(i,o=a&Xe.Optional&&o===aa?null:o)}catch(p){if("NullInjectorError"===p.name){if((p[Za]=p[Za]||[]).unshift(ie(i)),c)throw p;return qs(p,i,"R3InjectorError",this.source)}throw p}finally{Gn(d),xe(c)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((a,c)=>i.push(ie(c))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,o,a){if(!(i=X(i)))return!1;let c=Fi(i);const d=null==c&&i.ngModule||void 0,p=void 0===d?i:d,m=-1!==a.indexOf(p);if(void 0!==d&&(c=Fi(d)),null==c)return!1;if(null!=c.imports&&!m){let T;a.push(p);try{is(c.imports,N=>{this.processInjectorType(N,o,a)&&(void 0===T&&(T=[]),T.push(N))})}finally{}if(void 0!==T)for(let N=0;N<T.length;N++){const{ngModule:O,providers:B}=T[N];is(B,q=>this.processProvider(q,O,B||U))}}this.injectorDefTypes.add(p);const E=Ls(p)||(()=>new p);this.records.set(p,Ld(E,Fd));const b=c.providers;if(null!=b&&!m){const T=i;is(b,N=>this.processProvider(N,T,b))}return void 0!==d&&void 0!==i.providers}processProvider(i,o,a){let c=rl(i=X(i))?i:X(i&&i.provide);const d=(r=i,Vd(r)?Ld(void 0,r.useValue):Ld(function(r,i,o){let a;if(rl(r)){const c=X(r);return Ls(c)||Xg(c)}if(Vd(r))a=()=>X(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))a=()=>r.useFactory(...Ln(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))a=()=>ke(X(r.useExisting));else{const c=X(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return Ls(c)||Xg(c);a=()=>new c(...Ln(r.deps))}return a}(r),Fd));var r;if(rl(i)||!0!==i.multi)this.records.get(c);else{let p=this.records.get(c);p||(p=Ld(void 0,Fd,!0),p.factory=()=>Ln(p.multi),this.records.set(c,p)),c=i,p.multi.push(i)}this.records.set(c,d)}hydrate(i,o){return o.value===Fd&&(o.value=VC,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(r=o.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var r}injectableDefInScope(i){if(!i.providedIn)return!1;const o=X(i.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Xg(r){const i=nn(r),o=null!==i?i.factory:Ls(r);if(null!==o)return o;if(r instanceof xn)throw new Error(`Token ${ie(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const i=r.length;if(i>0){const a=function(r,i){const o=[];for(let a=0;a<r;a++)o.push(i);return o}(i,"?");throw new Error(`Can't resolve all parameters for ${ie(r)}: (${a.join(", ")}).`)}const o=function(r){const i=r&&(r[Oe]||r[Hn]);if(i){const o=function(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Error("unreachable")}function Ld(r,i,o=!1){return{factory:r,value:i,multi:o?[]:void 0}}function Vd(r){return null!==r&&"object"==typeof r&&Q in r}function rl(r){return"function"==typeof r}const z_=function(r,i,o){return function(r,i=null,o=null,a){const c=Lf(r,i,o,a);return c._resolveInjectorDefTypes(),c}({name:o},i,r,o)};let Bn=(()=>{class r{static create(o,a){return Array.isArray(o)?z_(o,a,""):z_(o.providers,o.parent,o.name||"")}}return r.THROW_IF_NOT_FOUND=aa,r.NULL=new Yg,r.\u0275prov=tn({token:r,providedIn:"any",factory:()=>ke(ya)}),r.__NG_ELEMENT_ID__=-1,r})();function Jw(r,i){po(hf(r)[1],In())}let Hd=null;function sl(){if(!Hd){const r=Kt.Symbol;if(r&&r.iterator)Hd=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const a=i[o];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Hd=a)}}}return Hd}function Gd(r){return!!am(r)&&(Array.isArray(r)||!(r instanceof Map)&&sl()in r)}function am(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function um(r,i,o,a){const c=Re();return function(r,i,o){return!Object.is(r[i],o)&&(r[i]=o,!0)}(c,ft.lFrame.bindingIndex++,i)&&(Ut(),us(function(){const r=ft.lFrame;return zo(r.tView,r.selectedIndex)}(),c,r,i,o,a)),um}function dl(r,i=Xe.Default){const o=Re();return null===o?ke(r,i):od(In(),o,X(r),i)}function fm(){throw new Error("invalid")}function pm(r,i,o,a,c){const p=c?"class":"style";!function(r,i,o,a,c){for(let d=0;d<o.length;){const p=o[d++],m=o[d++],E=i[p],b=r.data[p];null!==b.setInput?b.setInput(E,c,a,m):E[m]=c}}(r,o,i.inputs[p],p,a)}function hl(r,i,o,a){const c=Re(),d=Ut(),p=20+r,m=c[11],E=c[p]=_f(m,i,ft.lFrame.currentNamespace),b=d.firstCreatePass?function(r,i,o,a,c,d,p){const m=i.consts,b=el(i,r,2,c,$i(m,d));return function(r,i,o,a){let c=!1;if(Ac()){const d=function(r,i,o){const a=r.directiveRegistry;let c=null;if(a)for(let d=0;d<a.length;d++){const p=a[d];Ee(o,p.selectors,!1)&&(c||(c=[]),yr(Hi(o,i),r,p.type),Vi(p)?(Mw(r,o),c.unshift(p)):c.push(p))}return c}(r,i,o),p=null===a?null:{"":-1};if(null!==d){c=!0,U_(o,r.data.length,d.length);for(let T=0;T<d.length;T++){const N=d[T];N.providersResolver&&N.providersResolver(N)}let m=!1,E=!1,b=Wu(r,i,d.length,null);for(let T=0;T<d.length;T++){const N=d[T];o.mergedAttrs=Ru(o.mergedAttrs,N.hostAttrs),Nf(r,o,i,b,N),tl(b,N,p),null!==N.contentQueries&&(o.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(o.flags|=128);const O=N.type.prototype;!m&&(O.ngOnChanges||O.ngOnInit||O.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),m=!0),!E&&(O.ngOnChanges||O.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),E=!0),b++}!function(r,i){const a=i.directiveEnd,c=r.data,d=i.attrs,p=[];let m=null,E=null;for(let b=i.directiveStart;b<a;b++){const T=c[b],N=T.inputs,O=null===d||hw(i)?null:kw(N,d);p.push(O),m=Bg(N,b,m),E=Bg(T.outputs,b,E)}null!==m&&(m.hasOwnProperty("class")&&(i.flags|=16),m.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=p,i.inputs=m,i.outputs=E}(r,o)}p&&function(r,i,o){if(i){const a=r.localNames=[];for(let c=0;c<i.length;c+=2){const d=o[i[c+1]];if(null==d)throw new We("301",`Export of name '${i[c+1]}' not found!`);a.push(i[c],d)}}}(o,a,p)}o.mergedAttrs=Ru(o.mergedAttrs,o.attrs)}(i,o,b,$i(m,p)),null!==b.attrs&&ma(b,b.attrs,!1),null!==b.mergedAttrs&&ma(b,b.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,b),b}(p,d,c,0,i,o,a):d.data[p];pr(b,!0);const T=b.mergedAttrs;null!==T&&Su(m,E,T);const N=b.classes;null!==N&&xg(m,E,N);const O=b.styles;null!==O&&cw(m,E,O),64!=(64&b.flags)&&Sg(d,c,E,b),0===ft.lFrame.elementDepthCount&&nr(E,c),ft.lFrame.elementDepthCount++,pu(b)&&(function(r,i,o){!Ac()||(function(r,i,o,a){const c=o.directiveStart,d=o.directiveEnd;r.firstCreatePass||Hi(o,i),nr(a,i);const p=o.initialInputs;for(let m=c;m<d;m++){const E=r.data[m],b=Vi(E);b&&Ow(i,o,E);const T=yo(i,r,m,o);nr(T,i),null!==p&&Wi(0,m-c,T,E,0,p),b&&(Gt(o.index,i)[8]=T)}}(r,i,o,kr(o,i)),128==(128&o.flags)&&function(r,i,o){const a=o.directiveStart,c=o.directiveEnd,p=o.index,m=ft.lFrame.currentDirectiveIndex;try{$s(p);for(let E=a;E<c;E++){const b=r.data[E],T=i[E];js(E),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&Pw(b,T)}}finally{$s(-1),js(m)}}(r,i,o))}(d,c,b),function(r,i,o){if($l(i)){const c=i.directiveEnd;for(let d=i.directiveStart;d<c;d++){const p=r.data[d];p.contentQueries&&p.contentQueries(1,o[d],d)}}}(d,b,c)),null!==a&&function(r,i,o=kr){const a=i.localNames;if(null!==a){let c=i.index+1;for(let d=0;d<a.length;d+=2){const p=a[d+1],m=-1===p?o(i,r):r[p];r[c++]=m}}}(c,b)}function Jr(){let r=In();Ko()?ft.lFrame.isParent=!1:(r=r.parent,pr(r,!1));const i=r;ft.lFrame.elementDepthCount--;const o=Ut();o.firstCreatePass&&(po(o,r),$l(r)&&o.queries.elementEnd(r)),null!=i.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(i)&&pm(o,i,Re(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(i)&&pm(o,i,Re(),i.stylesWithoutHost,!1)}function hv(r,i,o,a){hl(r,i,o,a),Jr()}function nh(r){return!!r&&"function"==typeof r.then}function Pi(r){return!!r&&"function"==typeof r.subscribe}const pv=Pi;function gv(r,i,o,a){const c=Re(),d=Ut(),p=In();return function(r,i,o,a,c,d,p,m){const E=pu(a),T=r.firstCreatePass&&Bw(r),N=i[8],O=H_(i);let B=!0;if(3&a.type||m){const te=kr(a,i),Le=m?m(te):te,be=O.length,ht=m?Ct=>m(Pn(Ct[a.index])):a.index;if(hn(o)){let Ct=null;if(!m&&E&&(Ct=function(r,i,o,a){const c=r.cleanup;if(null!=c)for(let d=0;d<c.length-1;d+=2){const p=c[d];if(p===o&&c[d+1]===a){const m=i[7],E=c[d+2];return m.length>E?m[E]:null}"string"==typeof p&&(d+=2)}return null}(r,i,c,a.index)),null!==Ct)(Ct.__ngLastListenerFn__||Ct).__ngNextListenerFn__=d,Ct.__ngLastListenerFn__=d,B=!1;else{d=yv(a,i,N,d,!1);const en=o.listen(Le,c,d);O.push(d,en),T&&T.push(c,ht,be,be+1)}}else d=yv(a,i,N,d,!0),Le.addEventListener(c,d,p),O.push(d),T&&T.push(c,ht,be,p)}else d=yv(a,i,N,d,!1);const q=a.outputs;let le;if(B&&null!==q&&(le=q[c])){const te=le.length;if(te)for(let Le=0;Le<te;Le+=2){const mi=i[le[Le]][le[Le+1]].subscribe(d),Pa=O.length;O.push(d,mi),T&&T.push(c,a.index,Pa,-(Pa+1))}}}(d,c,c[11],p,r,i,!!o,a),gv}function dI(r,i,o,a){try{return!1!==o(a)}catch(c){return G_(r,c),!1}}function yv(r,i,o,a,c){return function d(p){if(p===Function)return a;const m=2&r.flags?Gt(r.index,i):i;0==(32&i[2])&&Of(m);let E=dI(i,0,a,p),b=d.__ngNextListenerFn__;for(;b;)E=dI(i,0,b,p)&&E,b=b.__ngNextListenerFn__;return c&&!1===E&&(p.preventDefault(),p.returnValue=!1),E}}function vI(r,i=""){const o=Re(),a=Ut(),c=r+20,d=a.firstCreatePass?el(a,c,1,i,null):a.data[c],p=o[c]=function(r,i){return hn(r)?r.createText(i):r.createTextNode(i)}(o[11],i);Sg(a,o,p,d),pr(d,!1)}const su=void 0;var rp=["en",[["a","p"],["AM","PM"],su],[["AM","PM"],su,su],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],su,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],su,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",su,"{1} 'at' {0}",su],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const o=Math.floor(Math.abs(r)),a=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===a?1:5}];let yl={};function Tm(r){const i=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=ip(i);if(o)return o;const a=i.split("-")[0];if(o=ip(a),o)return o;if("en"===a)return rp;throw new Error(`Missing locale data for the locale "${r}".`)}function PI(r){return Tm(r)[yt.PluralCase]}function ip(r){return r in yl||(yl[r]=Kt.ng&&Kt.ng.common&&Kt.ng.common.locales&&Kt.ng.common.locales[r]),yl[r]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const Am="en-US";let _l=Am;class Fm{}const mh="ngComponent";class eE{resolveComponentFactory(i){throw function(r){const i=Error(`No component factory found for ${ie(r)}. Did you add it to @NgModule.entryComponents?`);return i[mh]=r,i}(i)}}let yh=(()=>{class r{}return r.NULL=new eE,r})();function lp(...r){}function bl(r,i){return new Uo(kr(r,i))}const xT=function(){return bl(In(),Re())};let Uo=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=xT,r})();function uD(r){return r instanceof Uo?r.nativeElement:r}class Vm{}let _h=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>Um(),r})();const Um=function(){const r=Re(),o=Gt(In().index,r);return function(r){return r[11]}(ms(o)?o:r)};let tE=(()=>{class r{}return r.\u0275prov=tn({token:r,providedIn:"root",factory:()=>null}),r})();class Bm{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const nE=new Bm("13.0.2"),rc={};function jm(r,i,o,a,c=!1){for(;null!==o;){const d=i[o.index];if(null!==d&&a.push(Pn(d)),wn(d))for(let m=10;m<d.length;m++){const E=d[m],b=E[1].firstChild;null!==b&&jm(E[1],E,b,a)}const p=o.type;if(8&p)jm(r,i,o.child,a);else if(32&p){const m=Z0(o,i);let E;for(;E=m();)a.push(E)}else if(16&p){const m=ow(i,o);if(Array.isArray(m))a.push(...m);else{const E=Ad(i[16]);jm(E[1],E,m,a,!0)}}o=c?o.projectionNext:o.next}return a}class Cl{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return jm(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(wn(i)){const o=i[8],a=o?o.indexOf(this):-1;a>-1&&(h_(i,a),Yn(o,a))}this._attachedToViewContainer=!1}os(this._lView[1],this._lView)}onDestroy(i){Sw(this._lView[1],this._lView,null,i)}markForCheck(){Of(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Kg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,i,o){La(!0);try{Kg(r,i,o)}finally{La(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,wf(this._lView[1],i=this._lView,i[11],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class PT extends Cl{constructor(i){super(i),this._view=i}detectChanges(){Vw(this._view)}checkNoChanges(){!function(r){La(!0);try{Vw(r)}finally{La(!1)}}(this._view)}get context(){return null}}class $m extends yh{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Vt(i);return new rE(o,this.ngModule)}}function Hr(r){const i=[];for(let o in r)r.hasOwnProperty(o)&&i.push({propName:r[o],templateName:o});return i}const OT=new xn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>q0});class rE extends Fm{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=i.selectors.map(Pg).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return Hr(this.componentDef.inputs)}get outputs(){return Hr(this.componentDef.outputs)}create(i,o,a,c){const d=(c=c||this.ngModule)?function(r,i){return{get:(o,a,c)=>{const d=r.get(o,rc,c);return d!==rc||a===rc?d:i.get(o,a,c)}}}(i,c.injector):i,p=d.get(Vm,uo),m=d.get(tE,null),E=p.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",T=a?function(r,i,o){if(hn(r))return r.selectRootElement(i,o===$e.ShadowDom);let a="string"==typeof i?r.querySelector(i):i;return a.textContent="",a}(E,a,this.componentDef.encapsulation):_f(p.createRenderer(null,this.componentDef),b,function(r){const i=r.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(b)),N=this.componentDef.onPush?576:528,O=function(r,i){return{components:[],scheduler:r||q0,clean:Uw,playerHandler:i||null,flags:0}}(),B=Pd(0,null,null,1,0,null,null,null,null,null),q=Sf(null,B,O,N,null,null,p,E,m,d);let le,te;ho(q);try{const Le=function(r,i,o,a,c,d){const p=o[1];o[20]=r;const E=el(p,20,2,"#host",null),b=E.mergedAttrs=i.hostAttrs;null!==b&&(ma(E,b,!0),null!==r&&(Su(c,r,b),null!==E.classes&&xg(c,r,E.classes),null!==E.styles&&cw(c,r,E.styles)));const T=a.createRenderer(r,i),N=Sf(o,Rf(i),null,i.onPush?64:16,o[20],E,a,T,d||null,null);return p.firstCreatePass&&(yr(Hi(E,o),p,i.type),Mw(p,E),U_(E,o.length,1)),Od(o,N),o[20]=N}(T,this.componentDef,q,p,E);if(T)if(a)Su(E,T,["ng-version",nE.full]);else{const{attrs:be,classes:ht}=function(r){const i=[],o=[];let a=1,c=2;for(;a<r.length;){let d=r[a];if("string"==typeof d)2===c?""!==d&&i.push(d,r[++a]):8===c&&o.push(d);else{if(!Zr(c))break;c=d}a++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);be&&Su(E,T,be),ht&&ht.length>0&&xg(E,T,ht.join(" "))}if(te=zo(B,20),void 0!==o){const be=te.projection=[];for(let ht=0;ht<this.ngContentSelectors.length;ht++){const Ct=o[ht];be.push(null!=Ct?Array.from(Ct):null)}}le=function(r,i,o,a,c){const d=o[1],p=function(r,i,o){const a=In();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Nf(r,a,i,Wu(r,i,1,null),o));const c=yo(i,r,a.directiveStart,a);nr(c,i);const d=kr(a,i);return d&&nr(d,i),c}(d,o,i);if(a.components.push(p),r[8]=p,c&&c.forEach(E=>E(p,i)),i.contentQueries){const E=In();i.contentQueries(1,p,E.directiveStart)}const m=In();return!d.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||($s(m.index),V_(o[1],m,0,m.directiveStart,m.directiveEnd,i),Pw(i,p)),p}(Le,this.componentDef,q,O,[Jw]),xd(B,q,null)}finally{bu()}return new iE(this.componentType,le,bl(te,q),q,te)}}class iE extends class{}{constructor(i,o,a,c,d){super(),this.location=a,this._rootLView=c,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new PT(c),this.componentType=i}get injector(){return new lr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class ic{}class Hm{}const cu=new Map;class pD extends ic{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new $m(this);const a=mt(i);this._bootstrapComponents=Ao(a.bootstrap),this._r3Injector=Lf(i,o,[{provide:ic,useValue:this},{provide:yh,useValue:this.componentFactoryResolver}],ie(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,o=Bn.THROW_IF_NOT_FOUND,a=Xe.Default){return i===Bn||i===ic||i===ya?this:this._r3Injector.get(i,o,a)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class oE extends Hm{constructor(i){super(),this.moduleType=i,null!==mt(i)&&function(r){const i=new Set;!function o(a){const c=mt(a,!0),d=c.id;null!==d&&(function(r,i,o){if(i&&i!==o)throw new Error(`Duplicate module registered for ${r} - ${ie(i)} vs ${ie(i.name)}`)}(d,cu.get(d),a),cu.set(d,a));const p=Ao(c.imports);for(const m of p)i.has(m)||(i.add(m),o(m))}(r)}(i)}create(i){return new pD(this.moduleType,i)}}function hE(r){return i=>{setTimeout(r,void 0,i)}}const Xs=class extends v.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,a){var E,b,T;let c=i,d=o||(()=>null),p=a;if(i&&"object"==typeof i){const N=i;c=null==(E=N.next)?void 0:E.bind(N),d=null==(b=N.error)?void 0:b.bind(N),p=null==(T=N.complete)?void 0:T.bind(N)}this.__isAsync&&(d=hE(d),c&&(c=hE(c)),p&&(p=hE(p)));const m=super.subscribe({next:c,error:d,complete:p});return i instanceof V.w0&&i.add(m),m}};function GT(){return this._results[sl()]()}class wh{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=sl(),a=wh.prototype;a[o]||(a[o]=GT)}get changes(){return this._changes||(this._changes=new Xs)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const a=this;a.dirty=!1;const c=ai(i);(this._changesDetected=!function(r,i,o){if(r.length!==i.length)return!1;for(let a=0;a<r.length;a++){let c=r[a],d=i[a];if(o&&(c=o(c),d=o(d)),d!==c)return!1}return!0}(a._results,c,o))&&(a._results=c,a.length=c.length,a.last=c[this.length-1],a.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;const ED=function(){return _p(In(),Re())};let Ca=(()=>{class r{}return r.__NG_ELEMENT_ID__=ED,r})();const fE=Ca,WT=class extends fE{constructor(i,o,a){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=a}createEmbeddedView(i){const o=this._declarationTContainer.tViews,a=Sf(this._declarationLView,o,i,16,null,o.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(a[19]=d.createEmbeddedView(o)),xd(o,a,i),new Cl(a)}};function _p(r,i){return 4&r.type?new WT(i,r,bl(r,i)):null}const pE=function(){return Qm(In(),Re())};let Zm=(()=>{class r{}return r.__NG_ELEMENT_ID__=pE,r})();const qT=Zm,Ym=class extends qT{constructor(i,o,a){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=a}get element(){return bl(this._hostTNode,this._hostLView)}get injector(){return new lr(this._hostTNode,this._hostLView)}get parentInjector(){const i=mr(this._hostTNode,this._hostLView);if(tg(i)){const o=xu(i,this._hostLView),a=Ga(i);return new lr(o[1].data[a+8],o)}return new lr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=ID(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,a){const c=i.createEmbeddedView(o||{});return this.insert(c,a),c}createComponent(i,o,a,c,d){const p=i&&!("function"==typeof i);let m;if(p)m=o;else{const N=o||{};m=N.index,a=N.injector,c=N.projectableNodes,d=N.ngModuleRef}const E=p?i:new rE(Vt(i)),b=a||this.parentInjector;if(!d&&null==E.ngModule&&b){const N=b.get(ic,null);N&&(d=N)}const T=E.create(b,c,void 0,d);return this.insert(T.hostView,m),T}insert(i,o){const a=i._lView,c=a[1];if(wn(a[3])){const T=this.indexOf(i);if(-1!==T)this.detach(T);else{const N=a[3],O=new Ym(N,N[6],N[3]);O.detach(O.indexOf(i))}}const d=this._adjustIndex(o),p=this._lContainer;!function(r,i,o,a){const c=10+a,d=o.length;a>0&&(o[c-1][4]=i),a<d-10?(i[4]=o[c],ui(o,10+a,i)):(o.push(i),i[4]=null),i[3]=o;const p=i[17];null!==p&&o!==p&&function(r,i){const o=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===o?r[9]=[i]:o.push(i)}(p,i);const m=i[19];null!==m&&m.insertView(r),i[2]|=128}(c,a,p,d);const m=m_(d,p),E=a[11],b=vf(E,p[7]);return null!==b&&function(r,i,o,a,c,d){a[0]=c,a[6]=i,wf(r,a,o,1,c,d)}(c,p[6],E,a,b,m),i.attachToViewContainerRef(),ui(vp(p),d,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=ID(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),a=h_(this._lContainer,o);a&&(Yn(vp(this._lContainer),o),os(a[1],a))}detach(i){const o=this._adjustIndex(i,-1),a=h_(this._lContainer,o);return a&&null!=Yn(vp(this._lContainer),o)?new Cl(a):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function ID(r){return r[8]}function vp(r){return r[8]||(r[8]=[])}function Qm(r,i){let o;const a=i[r.index];if(wn(a))o=a;else{let c;if(8&r.type)c=Pn(a);else{const d=i[11];c=d.createComment("");const p=kr(r,i);Yc(d,vf(d,p),c,function(r,i){return hn(r)?r.nextSibling(i):i.nextSibling}(d,p),!1)}i[r.index]=o=function(r,i,o,a){return new Array(r,!0,!1,i,null,0,a,o,null,null)}(a,i,c,r),Od(i,o)}return new Ym(o,r,i)}class Ep{constructor(i){this.queryList=i,this.matches=null}clone(){return new Ep(this.queryList)}setDirty(){this.queryList.setDirty()}}class oc{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const a=null!==i.contentQueries?i.contentQueries[0]:o.length,c=[];for(let d=0;d<a;d++){const p=o.getByIndex(d);c.push(this.queries[p.indexInDeclarationView].clone())}return new oc(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==EE(i,o).matches&&this.queries[o].setDirty()}}class Sl{constructor(i,o,a=null){this.predicate=i,this.flags=o,this.read=a}}class Jm{constructor(i=[]){this.queries=i}elementStart(i,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let a=0;a<this.length;a++){const c=null!==o?o.length:0,d=this.getByIndex(a).embeddedTView(i,c);d&&(d.indexInDeclarationView=a,null!==o?o.push(d):o=[d])}return null!==o?new Jm(o):null}template(i,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class ac{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new ac(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=i.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let c=0;c<a.length;c++){const d=a[c];this.matchTNodeWithReadOption(i,o,KT(o,d)),this.matchTNodeWithReadOption(i,o,wt(o,i,d,!1,!1))}else a===Ca?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,wt(o,i,a,!1,!1))}matchTNodeWithReadOption(i,o,a){if(null!==a){const c=this.metadata.read;if(null!==c)if(c===Uo||c===Zm||c===Ca&&4&o.type)this.addMatch(o.index,-2);else{const d=wt(o,i,c,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,a)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function KT(r,i){const o=r.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===i)return o[a+1];return null}function yE(r,i,o,a){return-1===o?function(r,i){return 11&r.type?bl(r,i):4&r.type?_p(r,i):null}(i,r):-2===o?function(r,i,o){return o===Uo?bl(i,r):o===Ca?_p(i,r):o===Zm?Qm(i,r):void 0}(r,i,a):yo(r,r[1],o,i)}function Xm(r,i,o,a){const c=i[19].queries[a];if(null===c.matches){const d=r.data,p=o.matches,m=[];for(let E=0;E<p.length;E+=2){const b=p[E];m.push(b<0?null:yE(i,d[b],p[E+1],o.metadata.read))}c.matches=m}return c.matches}function wp(r,i,o,a){const c=r.queries.getByIndex(o),d=c.matches;if(null!==d){const p=Xm(r,i,c,o);for(let m=0;m<d.length;m+=2){const E=d[m];if(E>0)a.push(p[m/2]);else{const b=d[m+1],T=i[-E];for(let N=10;N<T.length;N++){const O=T[N];O[17]===O[3]&&wp(O[1],O,b,a)}if(null!==T[9]){const N=T[9];for(let O=0;O<N.length;O++){const B=N[O];wp(B[1],B,b,a)}}}}}return a}function DD(r){const i=Re(),o=Ut(),a=Qo();xc(a+1);const c=EE(o,a);if(r.dirty&&_u(i)===(2==(2&c.metadata.flags))){if(null===c.matches)r.reset([]);else{const d=c.crossesNgTemplate?wp(o,i,a,[]):Xm(o,i,c,a);r.reset(d,uD),r.notifyOnChanges()}return!0}return!1}function ey(r,i,o,a){const c=Ut();if(c.firstCreatePass){const d=In();(function(r,i,o){null===r.queries&&(r.queries=new Jm),r.queries.track(new ac(i,o))})(c,new Sl(i,o,a),d.index),function(r,i){const o=r.contentQueries||(r.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,i)}(c,r),2==(2&o)&&(c.staticContentQueries=!0)}!function(r,i,o){const a=new wh(4==(4&o));Sw(r,i,a,a.destroy),null===i[19]&&(i[19]=new oc),i[19].queries.push(new Ep(a))}(c,Re(),o)}function ty(){return r=Re(),i=Qo(),r[19].queries[i].queryList;var r,i}function EE(r,i){return r.queries.getByIndex(i)}const Cp=new xn("Application Initializer");let cc=(()=>{class r{constructor(o){this.appInits=o,this.resolve=lp,this.reject=lp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const d=this.appInits[c]();if(nh(d))o.push(d);else if(pv(d)){const p=new Promise((m,E)=>{d.subscribe({complete:m,error:E})});o.push(p)}}Promise.all(o).then(()=>{a()}).catch(c=>{this.reject(c)}),0===o.length&&a(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(ke(Cp,8))},r.\u0275prov=tn({token:r,factory:r.\u0275fac}),r})();const Tp=new xn("AppId"),GD={provide:Tp,useFactory:function(){return`${Ap()}${Ap()}${Ap()}`},deps:[]};function Ap(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const NE=new xn("Platform Initializer"),my=new xn("Platform ID"),xl=new xn("appBootstrapListener");let zD=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=tn({token:r,factory:r.\u0275fac}),r})();const yy=new xn("LocaleId"),qD=new xn("DefaultCurrencyCode");class fA{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}const _y=function(r){return new oE(r)},PE=_y,ZD=function(r){return Promise.resolve(_y(r))},Xt=function(r){const i=_y(r),a=Ao(mt(r).declarations).reduce((c,d)=>{const p=Vt(d);return p&&c.push(new rE(p)),c},[]);return new fA(i,a)},YD=Xt,yA=function(r){return Promise.resolve(Xt(r))};let On=(()=>{class r{constructor(){this.compileModuleSync=PE,this.compileModuleAsync=ZD,this.compileModuleAndAllComponentsSync=YD,this.compileModuleAndAllComponentsAsync=yA}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=tn({token:r,factory:r.\u0275fac}),r})();const QD=(()=>Promise.resolve(0))();function OE(r){"undefined"==typeof Zone?QD.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class ds{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xs(!1),this.onMicrotaskEmpty=new Xs(!1),this.onStable=new Xs(!1),this.onError=new Xs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!a&&o,c.shouldCoalesceRunChangeDetection=a,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let r=Kt.requestAnimationFrame,i=Kt.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&i){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(r){const i=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Kt,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,LE(r),r.isCheckStableRunning=!0,kE(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),LE(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,c,d,p,m)=>{try{return Jn(r),o.invokeTask(c,d,p,m)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||r.shouldCoalesceRunChangeDetection)&&i(),vA(r)}},onInvoke:(o,a,c,d,p,m,E)=>{try{return Jn(r),o.invoke(c,d,p,m,E)}finally{r.shouldCoalesceRunChangeDetection&&i(),vA(r)}},onHasTask:(o,a,c,d)=>{o.hasTask(c,d),a===c&&("microTask"==d.change?(r._hasPendingMicrotasks=d.microTask,LE(r),kE(r)):"macroTask"==d.change&&(r.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,a,c,d)=>(o.handleError(c,d),r.runOutsideAngular(()=>r.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ds.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ds.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,o,a){return this._inner.run(i,o,a)}runTask(i,o,a,c){const d=this._inner,p=d.scheduleEventTask("NgZoneEvent: "+c,i,JD,lp,lp);try{return d.runTask(p,o,a)}finally{d.cancelTask(p)}}runGuarded(i,o,a){return this._inner.runGuarded(i,o,a)}runOutsideAngular(i){return this._outer.run(i)}}const JD={};function kE(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function LE(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function Jn(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function vA(r){r._nesting--,kE(r)}class DR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xs,this.onMicrotaskEmpty=new Xs,this.onStable=new Xs,this.onError=new Xs}run(i,o,a){return i.apply(o,a)}runGuarded(i,o,a){return i.apply(o,a)}runOutsideAngular(i){return i()}runTask(i,o,a,c){return i.apply(o,a)}}let Or=(()=>{class r{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ds.assertNotInAngularZone(),OE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())OE(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(o)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,a,c){let d=-1;a&&a>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==d),o(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:c})}whenStable(o,a,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,a,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,a,c){return[]}}return r.\u0275fac=function(o){return new(o||r)(ke(ds))},r.\u0275prov=tn({token:r,factory:r.\u0275fac}),r})(),VE=(()=>{class r{constructor(){this._applications=new Map,wy.addToWindow(this)}registerApplication(o,a){this._applications.set(o,a)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,a=!0){return wy.findTestabilityInTree(this,o,a)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=tn({token:r,factory:r.\u0275fac}),r})();class EA{addToWindow(i){}findTestabilityInTree(i,o,a){return null}}function wA(r){wy=r}let wy=new EA,XD=!0,eb=!1;function UE(){return eb=!0,XD}function IA(){if(eb)throw new Error("Cannot enable prod mode after platform setup.");XD=!1}let Sa;const nb=new xn("AllowMultipleToken");class rb{constructor(i,o){this.name=i,this.token=o}}function Rp(r,i,o=[]){const a=`Platform: ${i}`,c=new xn(a);return(d=[])=>{let p=xp();if(!p||p.injector.get(nb,!1))if(r)r(o.concat(d).concat({provide:c,useValue:!0}));else{const m=o.concat(d).concat({provide:c,useValue:!0},{provide:Ro,useValue:"platform"});!function(r){if(Sa&&!Sa.destroyed&&!Sa.injector.get(nb,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Sa=r.get(Ch);const i=r.get(NE,null);i&&i.forEach(o=>o())}(Bn.create({providers:m,name:a}))}return function(r){const i=xp();if(!i)throw new Error("No platform exists!");if(!i.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(c)}}function xp(){return Sa&&!Sa.destroyed?Sa:null}let Ch=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,a){const m=function(r,i){let o;return o="noop"===r?new DR:("zone.js"===r?void 0:r)||new ds({enableLongStackTrace:UE(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),o}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),E=[{provide:ds,useValue:m}];return m.run(()=>{const b=Bn.create({providers:E,parent:this.injector,name:o.moduleType.name}),T=o.create(b),N=T.injector.get(Cd,null);if(!N)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return m.runOutsideAngular(()=>{const O=m.onError.subscribe({next:B=>{N.handleError(B)}});T.onDestroy(()=>{$E(this._modules,T),O.unsubscribe()})}),function(r,i,o){try{const a=o();return nh(a)?a.catch(c=>{throw i.runOutsideAngular(()=>r.handleError(c)),c}):a}catch(a){throw i.runOutsideAngular(()=>r.handleError(a)),a}}(N,m,()=>{const O=T.injector.get(cc);return O.runInitializers(),O.donePromise.then(()=>(function(r){Et(r,"Expected localeId to be defined"),"string"==typeof r&&(_l=r.toLowerCase().replace(/_/g,"-"))}(T.injector.get(yy,Am)||Am),this._moduleDoBootstrap(T),T))})})}bootstrapModule(o,a=[]){const c=ob({},a);return function(r,i,o){const a=new oE(o);return Promise.resolve(a)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,c))}_moduleDoBootstrap(o){const a=o.injector.get(Np);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>a.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${ie(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(a)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(ke(Bn))},r.\u0275prov=tn({token:r,factory:r.\u0275fac}),r})();function ob(r,i){return Array.isArray(i)?i.reduce(ob,r):Tt(Tt({},r),i)}let Np=(()=>{class r{constructor(o,a,c,d,p){this._zone=o,this._injector=a,this._exceptionHandler=c,this._componentFactoryResolver=d,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new P.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),E=new P.y(b=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{ds.assertNotInAngularZone(),OE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{ds.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{T.unsubscribe(),N.unsubscribe()}});this.isStable=(0,se.T)(m,E.pipe((0,ae.B)()))}bootstrap(o,a){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=o instanceof Fm?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(c.componentType);const d=function(r){return r.isBoundToModule}(c)?void 0:this._injector.get(ic),m=c.create(Bn.NULL,[],a||c.selector,d),E=m.location.nativeElement,b=m.injector.get(Or,null),T=b&&m.injector.get(VE);return b&&T&&T.registerApplication(E,b),m.onDestroy(()=>{this.detachView(m.hostView),$E(this.components,m),T&&T.unregisterApplication(E)}),this._loadComponent(m),m}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const a=o;this._views.push(a),a.attachToAppRef(this)}detachView(o){const a=o;$E(this._views,a),a.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(xl,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(o){return new(o||r)(ke(ds),ke(Bn),ke(Cd),ke(yh),ke(cc))},r.\u0275prov=tn({token:r,factory:r.\u0275fac}),r})();function $E(r,i){const o=r.indexOf(i);o>-1&&r.splice(o,1)}const cb=function(r){return function(r,i,o){if(ks(r)&&!o){const a=Gt(r.index,i);return new Cl(a,a)}return 47&r.type?new Cl(i[16],i):null}(In(),Re(),16==(16&r))};let Pp=(()=>{class r{}return r.__NG_ELEMENT_ID__=cb,r})();const JE=function(r){return null};class fc{constructor(){}supports(i){return Gd(i)}create(i){return new VA(i)}}const LA=(r,i)=>i;class VA{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||LA}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,a=this._removalsHead,c=0,d=null;for(;o||a;){const p=!a||o&&o.currentIndex<e0(a,c,d)?o:a,m=e0(p,c,d),E=p.currentIndex;if(p===a)c--,a=a._nextRemoved;else if(o=o._next,null==p.previousIndex)c++;else{d||(d=[]);const b=m-c,T=E-c;if(b!=T){for(let O=0;O<b;O++){const B=O<d.length?d[O]:d[O]=0,q=B+O;T<=q&&q<b&&(d[O]=B+1)}d[p.previousIndex]=T-b}}m!==E&&i(p,m,E)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!Gd(i))throw new Error(`Error trying to diff '${ie(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,d,p,o=this._itHead,a=!1;if(Array.isArray(i)){this.length=i.length;for(let m=0;m<this.length;m++)d=i[m],p=this._trackByFn(m,d),null!==o&&Object.is(o.trackById,p)?(a&&(o=this._verifyReinsertion(o,d,p,m)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,p,m),a=!0),o=o._next}else c=0,function(r,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)i(r[o]);else{const o=r[sl()]();let a;for(;!(a=o.next()).done;)i(a.value)}}(i,m=>{p=this._trackByFn(c,m),null!==o&&Object.is(o.trackById,p)?(a&&(o=this._verifyReinsertion(o,m,p,c)),Object.is(o.item,m)||this._addIdentityChange(o,m)):(o=this._mismatch(o,m,p,c),a=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,a,c){let d;return null===i?d=this._itTail:(d=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,d,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(a,c))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,d,c)):i=this._addAfter(new UA(o,a),d,c),i}_verifyReinsertion(i,o,a,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==d?i=this._reinsertAfter(d,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,d=i._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(i,o,a),this._addToMoves(i,a),i}_moveAfter(i,o,a){return this._unlink(i),this._insertAfter(i,o,a),this._addToMoves(i,a),i}_addAfter(i,o,a){return this._insertAfter(i,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,a){const c=null===o?this._itHead:o._next;return i._next=c,i._prev=o,null===c?this._itTail=i:c._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new fb),this._linkedRecords.put(i),i.currentIndex=a,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,a=i._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fb),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class UA{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class BA{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,i))return a;return null}remove(i){const o=i._prevDup,a=i._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class fb{constructor(){this.map=new Map}put(i){const o=i.trackById;let a=this.map.get(o);a||(a=new BA,this.map.set(o,a)),a.add(i)}get(i,o){const c=this.map.get(i);return c?c.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function e0(r,i,o){const a=r.previousIndex;if(null===a)return a;let c=0;return o&&a<o.length&&(c=o[a]),a+i+c}class t0{constructor(){}supports(i){return i instanceof Map||am(i)}create(){return new jA}}class jA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||am(i)))throw new Error(`Error trying to diff '${ie(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(a,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(c,a);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const a=i._prev;return o._next=i,o._prev=a,i._prev=o,a&&(a._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,o);const d=c._prev,p=c._next;return d&&(d._next=p),p&&(p._prev=d),c._next=null,c._prev=null,c}const a=new $A(i);return this._records.set(i,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(a=>o(i[a],a))}}class $A{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function n0(){return new Sy([new fc])}let Sy=(()=>{class r{constructor(o){this.factories=o}static create(o,a){if(null!=a){const c=a.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:a=>r.create(o,a||n0()),deps:[[r,new vr,new xr]]}}find(o){const a=this.factories.find(c=>c.supports(o));if(null!=a)return a;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(r){return r.name||typeof r}(o)}'`)}}return r.\u0275prov=tn({token:r,providedIn:"root",factory:n0}),r})();function Ry(){return new xy([new t0])}let xy=(()=>{class r{constructor(o){this.factories=o}static create(o,a){if(a){const c=a.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:a=>r.create(o,a||Ry()),deps:[[r,new vr,new xr]]}}find(o){const a=this.factories.find(c=>c.supports(o));if(a)return a;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return r.\u0275prov=tn({token:r,providedIn:"root",factory:Ry}),r})();const HA=[new t0],WA=new Sy([new fc]),zA=new xy(HA),qA=Rp(null,"core",[{provide:my,useValue:"unknown"},{provide:Ch,deps:[Bn]},{provide:VE,deps:[]},{provide:zD,deps:[]}]),YA=[{provide:Np,useClass:Np,deps:[ds,Bn,Cd,yh,cc]},{provide:OT,deps:[ds],useFactory:function(r){let i=[];return r.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(o){i.push(o)}}},{provide:cc,useClass:cc,deps:[[new xr,Cp]]},{provide:On,useClass:On,deps:[]},GD,{provide:Sy,useFactory:function(){return WA},deps:[]},{provide:xy,useFactory:function(){return zA},deps:[]},{provide:yy,useFactory:function(r){return r||"undefined"!=typeof $localize&&$localize.locale||Am},deps:[[new qr(yy),new xr,new vr]]},{provide:qD,useValue:"USD"}];let pb=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(ke(Np))},r.\u0275mod=Te({type:r}),r.\u0275inj=gn({providers:YA}),r})()},6293:(et,ve,k)=>{"use strict";k.d(ve,{Z:()=>We});var v=k(4213),V=k(1177),P=k(1572),se=k(3855);class ae{constructor(de,Y){this._delegate=de,this.firebase=Y,(0,P._addComponent)(de,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(de,Y=P._DEFAULT_ENTRY_NAME){var ue;this._delegate.checkDestroyed();const Ce=this._delegate.container.getProvider(de);return!Ce.isInitialized()&&"EXPLICIT"===(null===(ue=Ce.getComponent())||void 0===ue?void 0:ue.instantiationMode)&&Ce.initialize(),Ce.getImmediate({identifier:Y})}_removeServiceInstance(de,Y=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(Y)}_addComponent(de){(0,P._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,P._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new v.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function he(){const Be=function(Be){const de={},Y={__esModule:!0,initializeApp:function(Je,at={}){const re=P.initializeApp(Je,at);if((0,v.r3)(de,re.name))return de[re.name];const fe=new Be(re,Y);return de[re.name]=fe,fe},app:Ce,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function(Je){const at=Je.name,re=at.replace("-compat","");if(P._registerComponent(Je)&&"PUBLIC"===Je.type){const fe=(_e=Ce())=>{if("function"!=typeof _e[re])throw oe.create("invalid-app-argument",{appName:at});return _e[re]()};void 0!==Je.serviceProps&&(0,v.ZB)(fe,Je.serviceProps),Y[re]=fe,Be.prototype[re]=function(..._e){return this._getService.bind(this,at).apply(this,Je.multipleInstances?_e:[])}}return"PUBLIC"===Je.type?Y[re]:null},removeApp:function(Je){delete de[Je]},useAsService:function(Je,at){return"serverAuth"===at?null:at},modularAPIs:P}};function Ce(Je){if(!(0,v.r3)(de,Je=Je||P._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:Je});return de[Je]}return Y.default=Y,Object.defineProperty(Y,"apps",{get:function(){return Object.keys(de).map(Je=>de[Je])}}),Ce.App=Be,Y}(ae);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function(Y){(0,v.ZB)(Be,Y)},createSubscribe:v.ne,ErrorFactory:v.LL,deepExtend:v.ZB}),Be}(),j=new se.Yd("@firebase/app-compat");if((0,v.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=H;(0,P.registerVersion)("@firebase/app-compat","0.1.10",undefined)},1572:(et,ve,k)=>{"use strict";k.r(ve),k.d(ve,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>yi,_DEFAULT_ENTRY_NAME:()=>$n,_addComponent:()=>pn,_addOrOverwriteComponent:()=>Tr,_apps:()=>Et,_clearComponents:()=>gn,_components:()=>At,_getProvider:()=>tn,_registerComponent:()=>Ar,_removeServiceInstance:()=>hs,deleteApp:()=>Hn,getApp:()=>Oe,getApps:()=>_n,initializeApp:()=>Fi,onLog:()=>Ht,registerVersion:()=>Xe,setLogLevel:()=>hr});var v=k(8239),V=k(1177),P=k(3855),se=k(4213);class ae{constructor(ut){this.container=ut}getPlatformInfoString(){return this.container.getProviders().map(Mt=>{if(function(lt){const ut=lt.getComponent();return"VERSION"===(null==ut?void 0:ut.type)}(Mt)){const kt=Mt.getImmediate();return`${kt.library}/${kt.version}`}return null}).filter(Mt=>Mt).join(" ")}}const oe="@firebase/app",he=new P.Yd("@firebase/app"),$n="[DEFAULT]",vt={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Et=new Map,At=new Map;function pn(lt,ut){try{lt.container.addComponent(ut)}catch(Mt){he.debug(`Component ${ut.name} failed to register with FirebaseApp ${lt.name}`,Mt)}}function Tr(lt,ut){lt.container.addOrOverwriteComponent(ut)}function Ar(lt){const ut=lt.name;if(At.has(ut))return he.debug(`There were multiple attempts to register component ${ut}.`),!1;At.set(ut,lt);for(const Mt of Et.values())pn(Mt,lt);return!0}function tn(lt,ut){return lt.container.getProvider(ut)}function hs(lt,ut,Mt=$n){tn(lt,ut).clearInstance(Mt)}function gn(){At.clear()}const Qt=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class fs{constructor(ut,Mt,kt){this._isDeleted=!1,this._options=Object.assign({},ut),this._config=Object.assign({},Mt),this._name=Mt.name,this._automaticDataCollectionEnabled=Mt.automaticDataCollectionEnabled,this._container=kt,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ut){this.checkDestroyed(),this._automaticDataCollectionEnabled=ut}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ut){this._isDeleted=ut}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}const yi="9.5.0";function Fi(lt,ut={}){"object"!=typeof ut&&(ut={name:ut});const Mt=Object.assign({name:$n,automaticDataCollectionEnabled:!1},ut),kt=Mt.name;if("string"!=typeof kt||!kt)throw Qt.create("bad-app-name",{appName:String(kt)});const Wn=Et.get(kt);if(Wn){if((0,se.vZ)(lt,Wn.options)&&(0,se.vZ)(Mt,Wn.config))return Wn;throw Qt.create("duplicate-app",{appName:kt})}const rn=new V.H0(kt);for(const ot of At.values())rn.addComponent(ot);const $e=new fs(lt,Mt,rn);return Et.set(kt,$e),$e}function Oe(lt=$n){const ut=Et.get(lt);if(!ut)throw Qt.create("no-app",{appName:lt});return ut}function _n(){return Array.from(Et.values())}function Hn(lt){return _i.apply(this,arguments)}function _i(){return(_i=(0,v.Z)(function*(lt){const ut=lt.name;Et.has(ut)&&(Et.delete(ut),yield Promise.all(lt.container.getProviders().map(Mt=>Mt.delete())),lt.isDeleted=!0)})).apply(this,arguments)}function Xe(lt,ut,Mt){var kt;let Wn=null!==(kt=vt[lt])&&void 0!==kt?kt:lt;Mt&&(Wn+=`-${Mt}`);const rn=Wn.match(/\s|\//),$e=ut.match(/\s|\//);if(rn||$e){const ot=[`Unable to register library "${Wn}" with version "${ut}":`];return rn&&ot.push(`library name "${Wn}" contains illegal characters (whitespace or "/")`),rn&&$e&&ot.push("and"),$e&&ot.push(`version name "${ut}" contains illegal characters (whitespace or "/")`),void he.warn(ot.join(" "))}Ar(new V.wA(`${Wn}-version`,()=>({library:Wn,version:ut}),"VERSION"))}function Ht(lt,ut){if(null!==lt&&"function"!=typeof lt)throw Qt.create("invalid-log-argument");(0,P.Am)(lt,ut)}function hr(lt){(0,P.Ub)(lt)}Ar(new V.wA("platform-logger",ut=>new ae(ut),"PRIVATE")),Xe(oe,"0.7.9",""),Xe(oe,"0.7.9","esm2017"),Xe("fire-js","")},1177:(et,ve,k)=>{"use strict";k.d(ve,{wA:()=>P,H0:()=>ie});var v=k(8239),V=k(4213);class P{constructor(H,j,X){this.name=H,this.instanceFactory=j,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const se="[DEFAULT]";class ae{constructor(H,j){this.name=H,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const j=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(j)){const X=new V.BH;if(this.instancesDeferred.set(j,X),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:j});Ve&&X.resolve(Ve)}catch(Ve){}}return this.instancesDeferred.get(j).promise}getImmediate(H){var j;const X=this.normalizeInstanceIdentifier(null==H?void 0:H.identifier),Ve=null!==(j=null==H?void 0:H.optional)&&void 0!==j&&j;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Se){if(Ve)return null;throw Se}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if("EAGER"===H.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:se})}catch(j){}for(const[j,X]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(j);try{const Se=this.getOrInitializeService({instanceIdentifier:Ve});X.resolve(Se)}catch(Se){}}}}clearInstance(H=se){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,v.Z)(function*(){const j=Array.from(H.instances.values());yield Promise.all([...j.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...j.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=se){return this.instances.has(H)}getOptions(H=se){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:j={}}=H,X=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:X,options:j});for(const[Se,We]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Se)&&We.resolve(Ve);return Ve}onInit(H,j){var X;const Ve=this.normalizeInstanceIdentifier(j),Se=null!==(X=this.onInitCallbacks.get(Ve))&&void 0!==X?X:new Set;Se.add(H),this.onInitCallbacks.set(Ve,Se);const We=this.instances.get(Ve);return We&&H(We,Ve),()=>{Se.delete(H)}}invokeOnInitCallbacks(H,j){const X=this.onInitCallbacks.get(j);if(X)for(const Ve of X)try{Ve(H,j)}catch(Se){}}getOrInitializeService({instanceIdentifier:H,options:j={}}){let X=this.instances.get(H);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(he=H,he===se?void 0:he),options:j}),this.instances.set(H,X),this.instancesOptions.set(H,j),this.invokeOnInitCallbacks(X,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,X)}catch(Ve){}var he;return X||null}normalizeInstanceIdentifier(H=se){return this.component?this.component.multipleInstances?H:se:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ie{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const j=this.getProvider(H.name);if(j.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);j.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const j=new ae(H,this);return this.providers.set(H,j),j}getProviders(){return Array.from(this.providers.values())}}},3855:(et,ve,k)=>{"use strict";k.d(ve,{in:()=>V,Yd:()=>oe,Ub:()=>ie,Am:()=>he});const v=[];var V=(()=>{return(H=V||(V={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",V;var H})();const P={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},se=V.INFO,ae={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},ge=(H,j,...X)=>{if(j<H.logLevel)return;const Ve=(new Date).toISOString(),Se=ae[j];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Se](`[${Ve}]  ${H.name}:`,...X)};class oe{constructor(j){this.name=j,this._logLevel=se,this._logHandler=ge,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in V))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?P[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...j),this._logHandler(this,V.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...j),this._logHandler(this,V.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,V.INFO,...j),this._logHandler(this,V.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,V.WARN,...j),this._logHandler(this,V.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...j),this._logHandler(this,V.ERROR,...j)}}function ie(H){v.forEach(j=>{j.setLogLevel(H)})}function he(H,j){for(const X of v){let Ve=null;j&&j.level&&(Ve=P[j.level]),X.userLogHandler=null===H?null:(Se,We,...Be)=>{const de=Be.map(Y=>{if(null==Y)return null;if("string"==typeof Y)return Y;if("number"==typeof Y||"boolean"==typeof Y)return Y.toString();if(Y instanceof Error)return Y.message;try{return JSON.stringify(Y)}catch(ue){return null}}).filter(Y=>Y).join(" ");We>=(null!=Ve?Ve:Se.logLevel)&&H({level:V[We].toLowerCase(),message:de,args:Be,type:Se.name})}}}},8239:(et,ve,k)=>{"use strict";function v(P,se,ae,ge,oe,ie,he){try{var H=P[ie](he),j=H.value}catch(X){return void ae(X)}H.done?se(j):Promise.resolve(j).then(ge,oe)}function V(P){return function(){var se=this,ae=arguments;return new Promise(function(ge,oe){var ie=P.apply(se,ae);function he(j){v(ie,ge,oe,he,H,"next",j)}function H(j){v(ie,ge,oe,he,H,"throw",j)}he(void 0)})}}k.d(ve,{Z:()=>V})}},et=>{et(et.s=7155)}]);